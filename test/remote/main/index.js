System.register("chunks:///_virtual/AnimFSMState.ts",["cc"],(function(t){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){var n;e._RF.push({},"623facAyltJOaSeQxDlZbwK","AnimFSMState",void 0);var a=c.ccclass;c.property,t("AnimFSMState",a("AnimFSMState")(n=function(){})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimFSMSystem.ts",["cc"],(function(e){var t,c;return{setters:[function(e){t=e.cclegacy,c=e._decorator}],execute:function(){var n;t._RF.push({},"7e176vjz1ZBCoYvSCveD70k","AnimFSMSystem",void 0);var r=c.ccclass;c.property,e("AnimFSMSystem",r("AnimFSMSystem")(n=function(){})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/ArrowTower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHero.ts","./CharacterEnum.ts","./GameEntry.ts","./ProcedureEnum.ts"],(function(t){var e,r,o,n,a,i,l,c,s,u,h,m,w,p,f,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){i=t.cclegacy,l=t._decorator,c=t.Node,s=t.SkeletalAnimation,u=t.tween,h=t.v3},function(t){m=t.GameHero},function(t){w=t.CharacterState,p=t.CharacterAnim},function(t){f=t.GameEntry},function(t){_=t.ItemEnum}],execute:function(){var d,y,A,g,T,D,v,B,b;i._RF.push({},"62959iQgrdLDo7DVDEpvEz4","ArrowTower",void 0);var C=l.ccclass,E=l.property;t("ArrowTower",(d=C("ArrowTower"),y=E(c),A=E(c),g=E(c),d((v=e((D=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).m_arrowTowerData=void 0,o(e,"m_Bow",v,n(e)),o(e,"m_Belt",B,n(e)),o(e,"m_EnergyNode",b,n(e)),e.m_EnergyBar=void 0,e.m_bowAnim=void 0,e.m_BeltAnim=void 0,e}r(e,t);var i=e.prototype;return i.OnShow=function(e){t.prototype.OnShow.call(this,e),this.m_arrowTowerData=e,null!=this.m_arrowTowerData?(this.m_Bow=this.node.getChildByName("Bow"),null!=this.m_Bow?(this.m_bowAnim=this.m_Bow.getComponent(s),u(this.node).by(1,{position:h(0,3.5,0)}).start()):console.error("Bow is null")):console.error("ArrowTowerData is null")},i.lateUpdate=function(t){},i.CharacterTurnToTarget=function(t){if(null!=t){var e=h(0,0,0);e=t instanceof c?t.position:t;var r=this.CachedNode.position.x-e.x,o=this.CachedNode.position.z-e.z,n=h(r,0,o),a=Math.atan2(n.x,n.z)/(Math.PI/180)+180,i=this.m_Bow.eulerAngles.y+this.CachedNode.eulerAngles.y,l=a-i;l>180?l-=360:l<-180&&(l+=360);var s=i+l,u=this.m_arrowTowerData.TrunSpeed;if(u=s-i>0?u:-1*u,!(Math.abs(s-i)<Math.abs(s-(i+u)))){var m=this.m_Bow.eulerAngles.y;this.m_Bow.eulerAngles=h(0,m+u,0)}}},i.CharacterMoveToTarget=function(t){},i.ChangeCharacterAnim=function(t,e){null!=this.m_bowAnim&&null!=this.m_BeltAnim&&this.m_arrowTowerData.AnimState!=t&&this.m_CharacterState!=w.Death&&(this.m_arrowTowerData.AnimState=t,t==p.Attack&&this.m_bowAnim.play())},i.addArrowNum=function(t){},i.AttackAction=function(){t.prototype.AttackAction.call(this)},i.CharacterDeath=function(e){t.prototype.CharacterDeath.call(this,e),f.Entity.ShowAttachhEffect(this,2,_.BuildingDestroyEffect)},i.CharacterLookAtTarget=function(t){},i.OnHide=function(){t.prototype.OnHide.call(this)},a(e,[{key:"arrowTowerData",get:function(){return this.m_arrowTowerData}}]),e}(m)).prototype,"m_Bow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(D.prototype,"m_Belt",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(D.prototype,"m_EnergyNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=D))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/ArrowTowerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHeroData.ts"],(function(r){var t,o,e,u,a;return{setters:[function(r){t=r.inheritsLoose,o=r.createClass},function(r){e=r.cclegacy,u=r._decorator},function(r){a=r.GameHeroData}],execute:function(){var i;e._RF.push({},"00fe4pzH79OrK+iq7db4KEF","ArrowTowerData",void 0);var n=u.ccclass;u.property,r("ArrowTowerData",n("ArrowTowerData")(i=function(r){function e(t,o){var e;return(e=r.call(this,t,o)||this).m_MaxArrowNum=0,e.m_ArrowNum=0,e}return t(e,r),o(e,[{key:"ArrowNum",get:function(){return this.m_ArrowNum},set:function(r){this.m_ArrowNum=r,this.ArrowNum<0&&(this.ArrowNum=0),this.m_ArrowNum>this.m_MaxArrowNum&&(this.MaxArrowNum=this.m_ArrowNum)}},{key:"MaxArrowNum",get:function(){return this.m_MaxArrowNum},set:function(r){this.m_MaxArrowNum=r}}]),e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/AssetUtility.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t._decorator}],execute:function(){var r;n._RF.push({},"a2b68PR3kJE5rKZJAnB6E1b","AssetUtility",void 0);var i=e.ccclass;e.property,t("AssetUtility",i("AssetUtility")(r=function(){function t(){}return t.GetSoundAsset=function(t){return"Sound/"+t},t.GetCharacterAsset=function(t){return"Entity/Character/"+t},t.GetEntityAsset=function(t){return"Entity/"+t},t.GetUIFormAsset=function(t){return"UIForm/"+t},t.GetWeaponAsset=function(t){return"Entity/Weapon/"+t},t.GetBuildingAsset=function(t){return"Entity/Building/"+t},t.GetItemAsset=function(t){return"Entity/Item/"+t},t.GetEmptyNode=function(){return"Entity/Item/EmptyNode"},t}())||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/AttachToEntityEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(t){var e,c,a,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,a=t._decorator,i=t.v3},function(t){o=t.Entity}],execute:function(){var f;c._RF.push({},"6d301XYCPFAo6crKIGHeh34","AttachToEntityEffect",void 0);var n=a.ccclass;a.property,t("AttachToEntityEffect",n("AttachToEntityEffect")(f=function(t){function c(){for(var e,c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).m_AttachToEntityEffectData=void 0,e}e(c,t);var a=c.prototype;return a.OnShow=function(e){if(t.prototype.OnShow.call(this,e),this.m_AttachToEntityEffectData=e,null!=this.m_AttachToEntityEffectData){var c=this.m_AttachToEntityEffectData.m_EffectTarget.node.getPosition();this.node.setPosition(i(c.x,.5,c.z));try{var a=this.m_AttachToEntityEffectData.m_EffectTarget;null!=a&&a.m_AttachEffect.push(this)}catch(t){console.error(t)}this.m_AttachToEntityEffectData.m_ExistTime>0&&this.DelayHide(this.m_AttachToEntityEffectData.m_ExistTime)}else console.error("AttachToEntityEffectData is null")},a.DelayHide=function(e){try{var c=this.m_AttachToEntityEffectData.m_EffectTarget;null!=c&&c.m_AttachEffect.splice(c.m_AttachEffect.indexOf(this),1);for(var a=0;a<this.m_AttachToEntityEffectData.m_effect.length;a++)this.m_AttachToEntityEffectData.m_effect[a].stop()}catch(t){console.error(t)}t.prototype.DelayHide.call(this,e)},c}(o))||f);c._RF.pop()}}}));

System.register("chunks:///_virtual/AttachToEntityEffectData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(t){var e,c,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,a=t._decorator},function(t){i=t.EntityData}],execute:function(){var n;c._RF.push({},"ea7adHZddpAA7WSmvcm/qZx","AttachToEntityEffectData",void 0);var o=a.ccclass;a.property,t("AttachToEntityEffectData",o("AttachToEntityEffectData")(n=function(t){function c(e,c,a,i){var n;return(n=t.call(this,e,c)||this).m_ExistTime=void 0,n.m_EffectTarget=void 0,n.m_effect=[],n.m_ExistTime=a,n.m_EffectTarget=i,n}return e(c,t),c}(i))||n);c._RF.pop()}}}));

System.register("chunks:///_virtual/AttackBuildingState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Building.ts","./BattleUtility.ts","./FSMState.ts"],(function(t){var a,e,r,i,s,n,c,o,h;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,i=t.Vec3},function(t){s=t.Building},function(t){n=t.BattleUtility},function(t){c=t.Transition,o=t.FSMState,h=t.StateID}],execute:function(){var m;e._RF.push({},"0f16dK+DBJJ/aGPh+tfpkag","AttackBuildingState",void 0);var l=r.ccclass;r.property,t("AttackBuildingState",l("AttackBuildingState")(m=function(t){function e(a,e){var r;return(r=t.call(this,a,e)||this).m_stateID=h.AttackBuilding,r}a(e,t);var r=e.prototype;return r.Act=function(a){if(t.prototype.Act.call(this,a),null!=this.m_target&&null!=this.m_target.node){this.m_character.gameHeroData.AttackTarget!=this.m_target&&this.m_character.SetAttackTarget(this.m_target),this.m_character.CharacterTurnToTarget(this.m_target.node);var e=this.m_character.CachedNode.position,r=this.m_target.node.position,n=0;if(this.m_target instanceof s)n=this.m_target.buildingData.BuildingRange;i.distance(e,r)>this.m_character.gameHeroData.AttackDistance+n?this.m_character.CharacterMoveToTarget(this.m_target.node):this.m_character.CharacterReadyAttack()}},r.Reason=function(t){if(this.m_character&&this.m_character.Available)try{var a=n.GetClosestEnemyCanFind(this.m_character);if(a)return this.m_target=a,void this.fsm.PreformTransition(c.FindCharacter);var e=n.GetClosestEnemyBuilding(this.m_character);if(e)return void(this.m_target=e);var r=n.GetClosestEnemy(this.m_character);if(r)return this.m_target=r,void this.fsm.PreformTransition(c.FindCharacter);this.fsm.PreformTransition(c.LostTarget)}catch(t){console.log(t),this.fsm.PreformTransition(c.LostTarget)}else this.fsm.PreformTransition(c.LostTarget)},e}(o))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackCharacterState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSMState.ts","./BattleUtility.ts"],(function(t){var a,e,r,i,c,s,n,o,h;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,i=t.Vec3,c=t.tween},function(t){s=t.Transition,n=t.FSMState,o=t.StateID},function(t){h=t.BattleUtility}],execute:function(){var m;e._RF.push({},"cd170b8b+NFyJrjfDEiAFn3","AttackCharacterState",void 0);var l=r.ccclass;r.property,t("AttackCharacterState",l("AttackCharacterState")(m=function(t){function e(a,e){var r;return(r=t.call(this,a,e)||this).m_FollowTime=0,r.m_FollowState=!1,r.m_stateID=o.AttackCharacter,r}a(e,t);var r=e.prototype;return r.Act=function(a){if(t.prototype.Act.call(this,a),null!=this.m_target&&null!=this.m_target.node){this.m_character.gameHeroData.AttackTarget!=this.m_target&&this.m_character.SetAttackTarget(this.m_target),this.m_character.CharacterTurnToTarget(this.m_target.node);var e=this.m_character.CachedNode.position,r=this.m_target.node.position;i.squaredDistance(e,r)>this.m_character.gameHeroData.AttackDistance*this.m_character.gameHeroData.AttackDistance?this.m_character.CharacterMoveToTarget(this.m_target.node):this.m_character.CharacterReadyAttack()}},r.OnEnter=function(){var a=this;t.prototype.OnEnter.call(this),this.m_CanExit=!1,c(this).delay(this.m_ExistTime).call((function(){a.m_CanExit=!0})).start(),this.m_target=h.GetClosestEnemy(this.m_character)},r.Reason=function(t){this.m_CanExit&&(null==this.m_target||0==this.m_target.Available?this.fsm.PreformTransition(s.LostTarget):i.squaredDistance(this.m_character.node.position,this.m_target.node.position)>this.m_character.gameHeroData.AttackDistance*this.m_character.gameHeroData.AttackDistance&&(this.m_target=null,this.fsm.PreformTransition(s.LostTarget)))},e}(n))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSpeedUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./WeaponFireBulletEventArgs.ts","./BattleUtility.ts","./WeaponEnum.ts"],(function(t){var e,a,p,i,n,c,r,o,s,l,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,p=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.Entity},function(t){o=t.GameEntry},function(t){s=t.WeaponFireBulletEventArgs},function(t){l=t.BattleUtility},function(t){d=t.BulletType}],execute:function(){var m,A,u;n._RF.push({},"8e54agMDrJDbL+i+0yBcluL","AttackSpeedUp",void 0);var h=c.ccclass,k=c.property;t("AttackSpeedUp",h("AttackSpeedUp")((u=e((A=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n))||this,p(e,"m_AttackSpeedUpData",u,i(e)),e}a(e,t);var n=e.prototype;return n.OnShow=function(e){var a=this;t.prototype.OnShow.call(this,e),this.m_AttackSpeedUpData=e,null!=this.m_AttackSpeedUpData?null!=this.m_AttackSpeedUpData.TargetHero&&this.m_AttackSpeedUpData.TargetHero.Available?(o.Event.Subscribe(s.EventId,this.OnWeaponFireBullet,this),this.m_AttackSpeedUpData.Weapons=this.m_AttackSpeedUpData.TargetHero.gameHeroData.Weapons,o.Entity.AttachEntity(this,this.m_AttackSpeedUpData.TargetHero),this.AddValue(),this.scheduleOnce((function(){a.RestoreValue(),o.Entity.HideEntity(a)}),this.m_AttackSpeedUpData.AttackSpeedUpTime)):o.Entity.HideEntity(this):console.error("AttackSpeedUpData is null")},n.OnWeaponFireBullet=function(t){if(t.ownerId==this.m_AttackSpeedUpData.TargetHero.Id){this.getCanAttackEnemy();var e;this.m_AttackSpeedUpData.attackenemyId>=this.m_AttackSpeedUpData.enemy.length&&(this.m_AttackSpeedUpData.attackenemyId=0),e=this.m_AttackSpeedUpData.enemy[this.m_AttackSpeedUpData.attackenemyId],this.m_AttackSpeedUpData.attackenemyId++,null!=e&&this.m_AttackSpeedUpData.TargetHero.SetAttackTarget(e)}},n.getCanAttackEnemy=function(){var t=l.GetAllEnemyCanAttack(this.m_AttackSpeedUpData.TargetHero);this.m_AttackSpeedUpData.enemy=t},n.AddValue=function(){this.m_AttackSpeedUpData.TargetHero.gameHeroData.AttackSpeed+=this.m_AttackSpeedUpData.AttackSpeedUpValue,this.m_AttackSpeedUpData.TargetHero.gameHeroData.AttackDamage+=this.m_AttackSpeedUpData.DamageUpValue,this.m_AttackSpeedUpData.Weapons.forEach((function(t){t.gameWeaponData.BulletType=d.Arrow_Fire}))},n.RestoreValue=function(){null!=this.m_AttackSpeedUpData.TargetHero&&this.m_AttackSpeedUpData.TargetHero.Available&&(this.m_AttackSpeedUpData.TargetHero.gameHeroData.AttackSpeed-=this.m_AttackSpeedUpData.AttackSpeedUpValue,this.m_AttackSpeedUpData.TargetHero.gameHeroData.AttackDamage-=this.m_AttackSpeedUpData.DamageUpValue,this.m_AttackSpeedUpData.Weapons.forEach((function(t){t.gameWeaponData.BulletType=d.Arrow_s})))},n.OnHide=function(){t.prototype.OnHide.call(this),o.Event.UnSubscribe(s.EventId,this.OnWeaponFireBullet,this)},e}(r)).prototype,"m_AttackSpeedUpData",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=A))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSpeedUpData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(t){var e,a,n,i,c;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy,i=t._decorator},function(t){c=t.EntityData}],execute:function(){var o;n._RF.push({},"fee51cm0m5K/KN65+B9lWqi","AttackSpeedUpData",void 0);var r=i.ccclass;i.property,t("AttackSpeedUpData",r("AttackSpeedUpData")(o=function(t){function n(e,a){var n;return(n=t.call(this,e,a)||this).m_targetHero=void 0,n.m_AttackSpeedUpValue=void 0,n.m_AttackSpeedUpTime=void 0,n.m_DamageUpValue=void 0,n.m_Weapons=void 0,n.attackenemyId=0,n.enemy=[],n}return e(n,t),a(n,[{key:"TargetHero",get:function(){return this.m_targetHero},set:function(t){this.m_targetHero=t}},{key:"AttackSpeedUpValue",get:function(){return this.m_AttackSpeedUpValue},set:function(t){this.m_AttackSpeedUpValue=t}},{key:"AttackSpeedUpTime",get:function(){return this.m_AttackSpeedUpTime},set:function(t){this.m_AttackSpeedUpTime=t}},{key:"DamageUpValue",get:function(){return this.m_DamageUpValue},set:function(t){this.m_DamageUpValue=t}},{key:"Weapons",get:function(){return this.m_Weapons},set:function(t){this.m_Weapons=t}}]),n}(c))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Barracks.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Building.ts","./GameEntry.ts","./CharacterDeathEventArgs.ts","./CommonUtility.ts"],(function(r){var t,a,e,n,i,s,o,c,l,u,h,m,d,p;return{setters:[function(r){t=r.applyDecoratedDescriptor,a=r.inheritsLoose,e=r.initializerDefineProperty,n=r.assertThisInitialized,i=r.asyncToGenerator,s=r.regeneratorRuntime},function(r){o=r.cclegacy,c=r._decorator,l=r.tween,u=r.v3},function(r){h=r.Building},function(r){m=r.GameEntry},function(r){d=r.CharacterDeathEventArgs},function(r){p=r.CommonUtility}],execute:function(){var _,f,D;o._RF.push({},"9e216iUxDNFKJPCapBXwMLM","Barracks",void 0);var B=c.ccclass,k=c.property;r("Barracks",B("Barracks")((D=t((f=function(r){function t(){for(var t,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=r.call.apply(r,[this].concat(i))||this,e(t,"m_BarracksData",D,n(t)),t.m_SoldierId=[],t}a(t,r);var o=t.prototype;return o.OnShow=function(t){var a=this;if(r.prototype.OnShow.call(this,t),this.m_BarracksData=t,null!=this.m_BarracksData){var e=m.DataTable.OtherTable.getDataById(5).configData.split("/");5==e.length?(this.m_BarracksData.m_creatInterval=parseInt(e[1]),this.m_BarracksData.m_creatSoldierType=parseInt(e[2]),this.m_BarracksData.m_creatNumber=parseInt(e[3]),this.m_BarracksData.m_maxNumber=parseInt(e[4]),l(this.node).by(1,{position:u(0,3.5,0)}).start(),m.Procedure.m_CurrentProcedure2.m_Barracks=this.node,m.Event.Subscribe(d.EventId,this.OnSoldierDeath,this),this.scheduleOnce((function(){a.CreatSoldier()}),1)):console.error("BarracksData is error")}else console.error("BarracksData is null")},o.OnSoldierDeath=function(r){var t=r;null!=t&&this.m_SoldierId.indexOf(t.entityId)>=0&&this.m_SoldierId.splice(this.m_SoldierId.indexOf(t.entityId),1)},o.CreatSoldier=function(){var r=i(s().mark((function r(){var t,a,e,n,i,o=this;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.scheduleOnce((function(){o.CreatSoldier()}),this.m_BarracksData.m_creatInterval),!(this.m_SoldierId.length>=this.m_BarracksData.m_maxNumber)){r.next=3;break}return r.abrupt("return");case 3:for(t=0;t<this.m_BarracksData.m_creatNumber;t++)a=p.GetIntegerRandom(-2,2),e=p.GetIntegerRandom(-2,2),n=u(this.m_BarracksData.m_creatPos.x+a,0,this.m_BarracksData.m_creatPos.z+e),i=p.GeneratePermanentId(),this.m_SoldierId.push(i),m.Entity.ShowHero(i,this.m_BarracksData.m_creatSoldierType,n);case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t}(h)).prototype,"m_BarracksData",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=f))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/BarracksData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuildingData.ts"],(function(r){var a,t,e,c,n;return{setters:[function(r){a=r.inheritsLoose},function(r){t=r.cclegacy,e=r._decorator,c=r.v3},function(r){n=r.BuildingData}],execute:function(){var s;t._RF.push({},"f920bqUe7VA+oPhvWsGlNeW","BarracksData",void 0);var i=e.ccclass;e.property,r("BarracksData",i("BarracksData")(s=function(r){function t(a,t){var e;return(e=r.call(this,a,t)||this).m_creatSoldierType=0,e.m_creatInterval=0,e.m_creatNumber=0,e.m_maxNumber=0,e.m_creatPos=c(0,0,0),e}return a(t,r),t}(n))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./CommonUtility.ts"],(function(e){var n,o,t,r,a,u,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,r=e.sys,a=e.director},function(e){u=e.FrameworkComponent},function(e){s=e.LanguageType,i=e.PlatformType}],execute:function(){var c;o._RF.push({},"5db89vyfZ5M7p13rpf2mPmD","BaseComponent",void 0);var m=t.ccclass;t.property,e("BaseComponent",m("BaseComponent")(c=function(e){function o(){for(var n,o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];return(n=e.call.apply(e,[this].concat(t))||this).m_LanguageType=void 0,n.m_platform=void 0,n}n(o,e);var t=o.prototype;return t.Oninit=function(){var e,n=r.languageCode,o=r.platform;console.log(n),console.log(o);var t={zh:s.中文,"zh-cn":s.中文,"cn-zh":s.中文,"zh-tw":s.中文繁体,"zh-hk":s.中文繁体,"zh-mo":s.中文繁体,"zh-sg":s.中文繁体,en:s.英文,"en-au":s.英文,"en-bz":s.英文,"en-ca":s.英文,"en-gb":s.英文,"en-ie":s.英文,"en-jm":s.英文,"en-nz":s.英文,"en-ph":s.英文,"en-tt":s.英文,"en-us":s.英文,"en-za":s.英文,"en-zw":s.英文,ja:s.日文,"ja-JP":s.日文,ko:s.韩文,"ko-KR":s.韩文,th:s.泰文,ru:s.俄文,"ru-md":s.俄文,"ru-RU":s.俄文,"ru-UA":s.俄文,"ru-BY":s.俄文,"ru-KZ":s.俄文,"ru-KG":s.俄文,de:s.德文,"de-at":s.德文,"de-ch":s.德文,"de-li":s.德文,"de-lu":s.德文,"de-AT":s.德文,"de-CH":s.德文,"de-LI":s.德文,"de-LU":s.德文,"de-BE":s.德文,"de-DE":s.德文};this.m_LanguageType=null!=(e=t[n])?e:s.英文,o===r.Platform.IOS||o===r.Platform.MACOS?this.m_platform=i.ios:this.m_platform=i.other},t.PauseGame=function(){a.isPaused()||a.pause()},t.ResumeGame=function(){a.isPaused()&&a.resume()},o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/BattleUtility.ts",["cc","./GameEntry.ts","./CharacterEnum.ts","./ProcedureEnum.ts","./FSMState.ts","./FSMSystem.ts","./AttackBuildingState.ts","./AttackCharacterState.ts","./IdleState.ts","./PlayerState.ts"],(function(t){var a,e,n,r,i,o,l,c,u,s,d,m,p,h,v,f,C;return{setters:[function(t){a=t.cclegacy,e=t._decorator,n=t.Vec3},function(t){r=t.GameEntry},function(t){i=t.RelationType,o=t.CharacterState,l=t.CharacterAttribute,c=t.CampType,u=t.CharacterType},function(t){s=t.ChooseType},function(t){d=t.Transition,m=t.StateID},function(t){p=t.FSMSystem},function(t){h=t.AttackBuildingState},function(t){v=t.AttackCharacterState},function(t){f=t.IdleState},function(t){C=t.PlayerState}],execute:function(){var y;a._RF.push({},"3cc5dRRrlpDTL7Y/GvKd0MT","BattleUtility",void 0);var A=e.ccclass;e.property,t("BattleUtility",A("BattleUtility")(y=function(){function t(){}return t.CaculateAttackInterval=function(t,a){var e=a.gameWeaponData.BaseAttackInterval,n=t.gameHeroData.AttackSpeed;return n<20&&(n=20),n>700&&(n=700),e/(.01*n)},t.GetClosestEnemyCanAttak=function(t){var a=this;if(!t||!t.Available)return null;var e=null,o=r.Entity.GetEntityByGroup("Character"),l=[];o.forEach((function(e,r){var o=e;if(o&&o.Available&&a.GetRelation(o.gameCharacterData.Camp,t.gameHeroData.Camp)==i.Hostile&&o.Available){var c=t.gameHeroData.AttackDistance*t.gameHeroData.AttackDistance;n.squaredDistance(o.node.position,t.node.position)<c&&l.push(o)}}));for(var c=1e6,u=0;u<l.length;u++){var s=l[u],d=n.squaredDistance(t.node.position,s.node.position);d<c&&(c=d,e=s)}return e},t.GetAllEnemyCanAttack=function(t){var a=this;if(!t||!t.Available)return null;var e=r.Entity.GetEntityByGroup("Character"),o=[];return e.forEach((function(e,r){var l=e;if(l&&l.Available&&a.GetRelation(l.gameCharacterData.Camp,t.gameHeroData.Camp)==i.Hostile&&l.Available){var c=t.gameHeroData.AttackDistance*t.gameHeroData.AttackDistance;n.squaredDistance(l.node.position,t.node.position)<c&&o.push(l)}})),o},t.GetClosestEnemyCanFind=function(t){var a=this;if(!t||!t.Available)return null;var e=null,o=r.Entity.GetEntityByGroup("Character"),l=[];o.forEach((function(e,r){var o=e;if(o&&o.Available&&a.GetRelation(o.gameCharacterData.Camp,t.gameHeroData.Camp)==i.Hostile&&o.Available){var c=t.gameHeroData.FindEnemyDistance*t.gameHeroData.FindEnemyDistance;n.squaredDistance(o.node.position,t.node.position)<c&&l.push(o)}}));for(var c=1e5,u=0;u<l.length;u++){var s=l[u],d=n.squaredDistance(t.node.position,s.node.position);d<c&&(c=d,e=s)}return e},t.GetClosestEnemy=function(t){var a=this;if(!t||!t.Available)return null;var e=null,o=r.Entity.GetEntityByGroup("Character"),l=[];o.forEach((function(e,n){var r=e;r&&r.Available&&a.GetRelation(r.gameCharacterData.Camp,t.gameCharacterData.Camp)==i.Hostile&&l.push(r)}));for(var c=1e5,u=0;u<l.length;u++){var s=l[u],d=n.squaredDistance(t.node.position,s.node.position);d<c&&(c=d,e=s)}return e},t.GetClosestEnemyBuilding=function(t){var a=this;if(!t||!t.Available)return null;var e=null,o=r.Entity.GetEntityByGroup("Building"),l=[];o.forEach((function(e,n){var r=e;r&&r.Available&&a.GetRelation(r.gameCharacterData.Camp,t.gameCharacterData.Camp)==i.Hostile&&l.push(r)}));for(var c=1e5,u=0;u<l.length;u++){var s=l[u],d=n.squaredDistance(t.node.position,s.node.position);d<c&&(c=d,e=s)}return e},t.GetClosestEnemyBuildingCanAttack=function(t){var a=this;if(!t||!t.Available)return null;var e=null,o=r.Entity.GetEntityByGroup("Building"),l=[];o.forEach((function(e,n){var r=e;r&&r.Available&&a.GetRelation(r.gameCharacterData.Camp,t.gameHeroData.Camp)==i.Hostile&&l.push(r)}));for(var c=1e5,u=0;u<l.length;u++){var s=l[u],d=n.squaredDistance(t.node.position,s.node.position);d<c&&(c=d,e=s)}return e},t.ChangeCharacterAttribute=function(t,a,e,n,r){if(void 0===r&&(r=!0),t&&t.Available&&t.CharacterState!=o.Death)switch(r||(e=-e),a){case l.TruthHealth:var i=parseFloat(e);t.gameCharacterData.setHP(i,n)}else console.warn("ChangeCharacterAttribute's character is null")},t.GetRelation=function(t,a){if(t>a){var e=t;t=a,a=e}var n=[{camp1:c.Player,camp2:c.Player,relation:i.Friend},{camp1:c.Player,camp2:c.Enemy,relation:i.Hostile},{camp1:c.Player,camp2:c.Netural,relation:i.Netural},{camp1:c.Enemy,camp2:c.Enemy,relation:i.Friend},{camp1:c.Enemy,camp2:c.Netural,relation:i.Hostile},{camp1:c.Netural,camp2:c.Netural,relation:i.Netural}];if(t==c.Unknown)return i.Netural;for(var r=0;r<n.length;r++){var o=n[r];if(o.camp1==t&&o.camp2==a)return o.relation}return i.Unknown},t.GetFSMSystem=function(t){if(!t)return null;var a=new p,e=new h(a,t),n=new v(a,t),r=new f(a,t);switch(t.gameCharacterData.CharacterType){case u.Player:var i=new C(a,t);a.AddState(i);break;case u.Hero:r.AddTransition(d.FindCharacter,m.AttackCharacter),r.AddTransition(d.FindBuilding,m.AttackBuilding),a.AddState(r),n.AddTransition(d.LostTarget,m.Idle),n.AddTransition(d.FindBuilding,m.AttackBuilding),a.AddState(n),e.AddTransition(d.LostTarget,m.Idle),e.AddTransition(d.FindCharacter,m.AttackCharacter),a.AddState(e);break;default:return null}return a},t.GetChooseDescribe=function(t){switch(t){case s.ChooseHero:return"选择士兵";case s.ChooseTower:return"选择塔";default:return""}},t}())||y);a._RF.pop()}}}));

System.register("chunks:///_virtual/Building.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCharacter.ts","./GameEntry.ts","./CharacterEnum.ts","./CharacterDeathEventArgs.ts"],(function(t){var e,a,r,i,n,l,c,s,h,o,u;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass},function(t){r=t.cclegacy,i=t._decorator,n=t.CapsuleCharacterController,l=t.Color},function(t){c=t.GameCharacter},function(t){s=t.GameEntry},function(t){h=t.CharacterState,o=t.CharacterAnim},function(t){u=t.CharacterDeathEventArgs}],execute:function(){var d;r._RF.push({},"fcbe3KieblE6rnsDW4eLXF4","Building",void 0);var C=i.ccclass;i.property,t("Building",C("Building")(d=function(t){function r(){for(var e,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).m_BuildingData=void 0,e}e(r,t);var i=r.prototype;return i.OnShow=function(e){if(t.prototype.OnShow.call(this,e),this.m_BuildingData=e,null!=this.m_BuildingData){1002==this.m_BuildingData.TypeId&&(s.Procedure.m_CurrentProcedure2.m_Gate=this.CachedNode,s.Procedure.m_CurrentProcedure2.m_GateEntity=this,this.Available=!1,this.Visible=!1);try{var a=this.CachedNode.getComponent(n);null!=a&&(this.m_BuildingData.BuildingRange=a.radius)}catch(t){console.error(t)}}else console.error("BuildingData is null")},i.CharacterDeath=function(t){var e=this;this.m_CharacterState!=h.Death&&(this.ChangeCharacterAnim(o.Death),this.m_CharacterState=h.Death,this.Available=!1,console.log("角色死亡"),this.m_CharacterController&&(this.m_CharacterController.enabled=!1),null!=this.m_CharacterMaterial&&this.scheduleOnce((function(){e.m_CharacterMaterial.setProperty("emissive",new l(150,150,150,255))}),.12),s.Event.Fire(u.Creat(this.m_BuildingData.Id,this,null)),s.Entity.HideEntity(this.m_HPBar),this.DelayHide(2))},a(r,[{key:"buildingData",get:function(){return this.m_BuildingData}}]),r}(c))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/BuildingData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCharacterData.ts"],(function(t){var n,i,a,e,r;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){a=t.cclegacy,e=t._decorator},function(t){r=t.GameCharacterData}],execute:function(){var u;a._RF.push({},"4109dgvzrZMvY+4b1Ogwffd","BuildingData",void 0);var c=e.ccclass;e.property,t("BuildingData",c("BuildingData")(u=function(t){function a(n,i){var a;return(a=t.call(this,n,i)||this).m_BuildingRange=0,a}return n(a,t),i(a,[{key:"BuildingRange",get:function(){return this.m_BuildingRange},set:function(t){this.m_BuildingRange=t}}]),a}(r))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/BuyActionSuccess.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(t){var c,e,n,r;return{setters:[function(t){c=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.GameEventArgs}],execute:function(){var u,s;e._RF.push({},"f85d9tPtQVBq5dhX0mVY54L","BuyActionSuccess",void 0);var o=n.ccclass;n.property,t("BuyActionSuccess",o("BuyActionSuccess")(((s=function(t){function e(){for(var c,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(c=t.call.apply(t,[this].concat(n))||this).buyPlane=void 0,c}return c(e,t),e.Creat=function(t){var c=new e;return c.buyPlane=t,c},e}(r)).EventName="BuyActionSuccess",u=s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/BuyPlane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./PlayerInteractiveBuyPlane.ts","./CommonUtility.ts","./DropGoldData.ts","./GoldNumberChangeEventArgs.ts","./BuyActionSuccess.ts","./ProcedureEnum.ts"],(function(e){var t,a,n,r,i,o,l,s,c,h,u,d,m,_,P,y,b,g,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,s=e.BoxCollider,c=e.tween,h=e.v3,u=e.log},function(e){d=e.Entity},function(e){m=e.GameEntry},function(e){_=e.PlayerInteractiveBuyPlane},function(e){P=e.CommonUtility},function(e){y=e.DropGoldData},function(e){b=e.GoldNumberChangeEventArgs},function(e){g=e.BuyActionSuccess},function(e){v=e.SoundEnum}],execute:function(){var p,D,B;i._RF.push({},"a8015KU5aJJvq34uqV6weHk","BuyPlane",void 0);var f=o.ccclass,w=o.property;e("BuyPlane",f("BuyPlane")((B=t((D=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"m_BuyPlaneData",B,r(t)),t.m_Describelab=void 0,t.m_goldLab=void 0,t.m_PlayerInside=!1,t.m_background=void 0,t.m_tipArrow=void 0,t.needTime=.05,t.chooseTime=0,t.soldierType=void 0,t.soldierNum=void 0,t.soldierCoolTime=0,t}a(t,e);var i=t.prototype;return i.OnShow=function(t){if(e.prototype.OnShow.call(this,t),this.m_BuyPlaneData=t,null!=this.m_BuyPlaneData){this.CachedNode.setScale(this.m_BuyPlaneData.Scale),this.Name=this.m_BuyPlaneData.Name,this.m_Describelab=this.CachedNode.children[0].children[0].getComponent(l),null!=this.m_Describelab&&(this.m_Describelab.string=this.m_BuyPlaneData.chooseStr),this.m_goldLab=this.CachedNode.children[0].children[1].getComponent(l),null!=this.m_goldLab&&(this.m_goldLab.string=this.m_BuyPlaneData.haveGold+"/"+this.m_BuyPlaneData.needGold),this.m_background=this.node.children[1],null==this.m_background&&console.error("ChoosePlane background is null"),this.m_tipArrow=this.node.children[2],null!=this.m_tipArrow&&(this.m_tipArrow.active=!1),this.CachedNode.getComponent(s).on("onTriggerEnter",this.onTriggerEnter,this),m.Event.Subscribe(_.EventId,this.onPlayerInteractiveBuyPlane,this),m.Event.Subscribe(b.EventId,this.onGoldNumChange,this);var a;switch(this.Name){case"SoldierPlane":m.Procedure.m_CurrentProcedure2.m_buyPlane_s=this,a=m.DataTable.OtherTable.getDataById(5).configData.split("/"),this.m_BuyPlaneData.needGold=parseInt(a[0]),this.m_tipArrow.destroy();break;case"arrowPlane1":if(m.Procedure.m_CurrentProcedure2.m_buyPlane_t1=this,2!=(a=m.DataTable.OtherTable.getDataById(1).configData.split("/")).length)return void console.error("DataTransfer error");this.m_BuyPlaneData.needGold=parseInt(a[0]);break;case"arrowPlane2":if(m.Procedure.m_CurrentProcedure2.m_buyPlane_t2=this,2!=(a=m.DataTable.OtherTable.getDataById(1).configData.split("/")).length)return void console.error("DataTransfer error");this.m_BuyPlaneData.needGold=parseInt(a[1]),this.m_tipArrow.destroy();break;case"wallPlane":if(m.Procedure.m_CurrentProcedure2.m_buyPlane_w=this,1!=(a=m.DataTable.OtherTable.getDataById(3).configData.split("/")).length)return void console.error("DataTransfer error");this.m_BuyPlaneData.needGold=parseInt(a[0]),this.m_tipArrow.destroy()}}else console.error("BuyPlaneData is null")},i.OnUpdate=function(t){e.prototype.OnUpdate.call(this,t),this.Available&&(m.Procedure.m_GameProcedure.GoldNum<=0?this.chooseTime=0:this.m_PlayerInside&&(this.chooseTime+=t,this.chooseTime>=this.needTime&&(this.chooseTime=0,this.m_BuyPlaneData.haveGold++,m.Procedure.m_GameProcedure.ChangeGoldNum(-1),this.SetBackRatio(this.m_BuyPlaneData.haveGold/this.m_BuyPlaneData.needGold),this.flyGold(),this.m_BuyPlaneData.haveGold>=this.m_BuyPlaneData.needGold&&this.onBuySuccess())))},i.flyGold=function(){m.Sound.PlaySoundByEnum(v.ThrowGold);var e=new y(P.GeneratePermanentId(),1004);e.m_canPickTime=1e3,e.Position=m.Control.m_ControlCharacter.CachedNode.worldPosition,e.m_flytoPlane=!0,e.m_PlaneBuyTarget=this,m.Entity.ShowflyGold(e),this.m_goldLab.string=this.m_BuyPlaneData.haveGold+"/"+this.m_BuyPlaneData.needGold,this.ShakePlane()},i.ShakePlane=function(){c(this.CachedNode).delay(.2).to(.05,{scale:h(1.1,1.1,1.1)}).to(.05,{scale:h(1,1,1)}).start()},i.onBuySuccess=function(){var e=this;console.log("购买成功"),m.Sound.PlaySoundByEnum(v.CreatBuilding);var t=this.Name;switch(m.Event.Fire(g.Creat(t)),t){case"SoldierPlane":m.Procedure.m_CurrentProcedure2.CreatBarracks(),this.Available=!1,this.scheduleOnce((function(){e.node.active=!1}));break;case"arrowPlane1":this.Available=!1,this.scheduleOnce((function(){e.node.active=!1}),1),m.Procedure.m_CurrentProcedure2.creatTower1();break;case"arrowPlane2":this.Available=!1,this.scheduleOnce((function(){e.node.active=!1}),1),m.Procedure.m_CurrentProcedure2.creatTower2();break;case"wallPlane":this.Available=!1,this.scheduleOnce((function(){e.node.active=!1}),1),m.Procedure.m_CurrentProcedure2.creatWall()}m.Event.UnSubscribe(b.EventId,this.onGoldNumChange,this),this.hideTipAtrrow()},i.refresh=function(){this.Available=!0,this.m_BuyPlaneData.haveGold=0,this.m_goldLab.string=this.m_BuyPlaneData.haveGold+"/"+this.m_BuyPlaneData.needGold,this.m_Describelab.string=this.m_BuyPlaneData.chooseStr},i.onPlayerInteractiveBuyPlane=function(e){var t=e;t.m_name==this.Name&&(t.m_active?this.m_PlayerInside=!0:this.m_PlayerInside=!1)},i.onGoldNumChange=function(e){var t=e;null!=t?this.Available&&(t.goldNum>=this.m_BuyPlaneData.needGold-this.m_BuyPlaneData.haveGold?this.showTipAtrrow():this.hideTipAtrrow()):console.warn("GoldNumberChangeEventArgs is null")},i.onTriggerEnter=function(e){u("onTriggerEnter"),console.log(e.type,e)},i.SetBackRatio=function(e){if(null!=this.m_background){var t=-.9*e+.9;this.m_background.setPosition(h(0,0,t)),e<.1?this.m_background.setScale(h(.7,1,e)):e>=.1&&e<.2?this.m_background.setScale(h(.8,1,e)):e>=.2&&e<.3?this.m_background.setScale(h(.9,1,e)):this.m_background.setScale(h(1,1,e))}},i.showTipAtrrow=function(){null!=this.m_tipArrow&&0==this.m_tipArrow.active&&(this.m_tipArrow.active=!0)},i.hideTipAtrrow=function(){null!=this.m_tipArrow&&this.m_tipArrow.active&&(this.m_tipArrow.active=!1)},t}(d)).prototype,"m_BuyPlaneData",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=D))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/BuyPlaneData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,r,i,n,a,o,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator},function(e){l=e.EntityData}],execute:function(){var u,c,s,p,f;a._RF.push({},"40957hffS1FU5ewS5S1kevF","BuyPlaneData",void 0);var y=o.ccclass,d=o.property;e("BuyPlaneData",y("BuyPlaneData")((s=t((c=function(e){function t(t,r){var a;return a=e.call(this,t,r)||this,i(a,"chooseStr",s,n(a)),i(a,"needGold",p,n(a)),i(a,"haveGold",f,n(a)),a}return r(t,e),t}(l)).prototype,"chooseStr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=t(c.prototype,"needGold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=t(c.prototype,"haveGold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterDeathEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.GameEventArgs}],execute:function(){r._RF.push({},"bda3dIT05lHQqRVY+57CMnh","CharacterDeathEventArgs",void 0),t("CharacterDeathEventArgs",function(t){function r(){var e;return(e=t.call(this)||this).entityId=void 0,e.deadChara=void 0,e.murder=void 0,e.entityId=0,e.deadChara=null,e.murder=null,e}return e(r,t),r.Creat=function(t,e,n){var a=new r;return a.entityId=e.Id,a.deadChara=e,a.murder=n,a},r.prototype.clear=function(){this.entityId=0,this.deadChara=null,this.murder=null},r}(n)).EventName="CharacterDeathEventArgs",r._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterEnum.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e._decorator}],execute:function(){t._RF.push({},"81d0fsaOEBFLIw7duwh2Uzg","CharacterEnum",void 0);a.ccclass,a.property;var n=e("EntityGroup",(function(){}));n.Character="Character",n.Building="Building",n.Weapon="Weapon",n.Item="Item",n.Effect="Effect";e("CharacterType",function(e){return e[e.Unknown=0]="Unknown",e[e.Player=1]="Player",e[e.Hero=2]="Hero",e[e.ArrowTower=3]="ArrowTower",e[e.ChoosePlane=4]="ChoosePlane",e[e.Max=5]="Max",e}({})),e("CharacterAnim",function(e){return e[e.None=0]="None",e[e.Idle=1]="Idle",e[e.Move=2]="Move",e[e.Attack=3]="Attack",e[e.Death=4]="Death",e[e.MoveAttack=5]="MoveAttack",e[e.Trun=6]="Trun",e[e.Max=7]="Max",e}({})),e("CampType",function(e){return e[e.Unknown=0]="Unknown",e[e.Player=1]="Player",e[e.Enemy=2]="Enemy",e[e.Netural=3]="Netural",e}({})),e("CharacterState",function(e){return e[e.Idle=0]="Idle",e[e.Move=1]="Move",e[e.Attack=2]="Attack",e[e.Death=3]="Death",e[e.MoveAttack=4]="MoveAttack",e[e.FollowTarget=5]="FollowTarget",e[e.Max=6]="Max",e}({})),e("RelationType",function(e){return e[e.Unknown=0]="Unknown",e[e.Friend=1]="Friend",e[e.Netural=2]="Netural",e[e.Hostile=3]="Hostile",e[e.Max=4]="Max",e}({})),e("CharacterAttribute",function(e){return e[e.Unknown=0]="Unknown",e[e.MaxHealthPoint=1]="MaxHealthPoint",e[e.TruthHealth=2]="TruthHealth",e[e.MagicHealth=3]="MagicHealth",e[e.PhysicalHealth=4]="PhysicalHealth",e[e.MoveSpeed=5]="MoveSpeed",e[e.TurnSpeed=6]="TurnSpeed",e[e.ViewDistance=7]="ViewDistance",e[e.MaxMagicPoint=8]="MaxMagicPoint",e[e.MagicPoint=9]="MagicPoint",e[e.AttackDamage=10]="AttackDamage",e[e.AttackSpeed=11]="AttackSpeed",e[e.AttackDistance=12]="AttackDistance",e[e.Armor=13]="Armor",e[e.Strength=14]="Strength",e[e.Agile=15]="Agile",e[e.Wisdom=16]="Wisdom",e[e.HPRecover=17]="HPRecover",e[e.MPRecover=18]="MPRecover",e[e.MagicResistance=19]="MagicResistance",e[e.CurrentHealthPercenHealth=20]="CurrentHealthPercenHealth",e[e.MaxHealthPercenHealth=21]="MaxHealthPercenHealth",e[e.SelfChangeHealth=22]="SelfChangeHealth",e[e.SelfChangeCurrentPercenHealth=23]="SelfChangeCurrentPercenHealth",e[e.SelfChangeMaxPercenHealth=24]="SelfChangeMaxPercenHealth",e}({})),e("PHY_GROUP",function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.Door=2]="Door",e[e.Enemy=4]="Enemy",e[e.SELF_BULLET=8]="SELF_BULLET",e[e.ENEMY_BULLET=16]="ENEMY_BULLET",e[e.BULLET_PROP=32]="BULLET_PROP",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ChoosePlane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./DropGoldData.ts","./CommonUtility.ts","./ProcedureEnum.ts","./UIExtension.ts"],(function(e){var o,t,n,a,s,r,i,h,l,c,d,u,m;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,a=e.v3,s=e.Label,r=e.Vec3,i=e.tween},function(e){h=e.Entity},function(e){l=e.GameEntry},function(e){c=e.DropGoldData},function(e){d=e.CommonUtility},function(e){u=e.ChooseType},function(e){m=e.UIFormId}],execute:function(){var C;t._RF.push({},"d861bRDQjBCU4iT7fJwx6T2","ChoosePlane",void 0);var P=n.ccclass;n.property,e("ChoosePlane",P("ChoosePlane")(C=function(e){function t(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(o=e.call.apply(e,[this].concat(n))||this).m_ChoosePlaneData=void 0,o.m_Describelab=void 0,o.m_goldLab=void 0,o.player=void 0,o.getGoldDelay=.1,o.needTime=.1,o.chooseTime=0,o}o(t,e);var n=t.prototype;return n.OnShow=function(o){if(e.prototype.OnShow.call(this,o),this.m_ChoosePlaneData=o,null!=this.m_ChoosePlaneData)switch(this.CachedNode.setRotationFromEuler(a(0,55,0)),this.m_Describelab=this.CachedNode.children[0].children[0].getComponent(s),null!=this.m_Describelab&&(this.m_Describelab.string=this.m_ChoosePlaneData.chooseStr),this.m_goldLab=this.CachedNode.children[0].children[1].getComponent(s),null!=this.m_goldLab&&(this.m_goldLab.string=this.m_ChoosePlaneData.HaveGold+"/"+this.m_ChoosePlaneData.NeedGold),this.player=l.Control.m_ControlCharacter,this.chooseTime=0,this.m_ChoosePlaneData.chooseType){case u.ChooseHero:l.Procedure.m_CurrentProcedure.choosePlaneEntity1=this,l.Procedure.m_CurrentProcedure.choosePlaneid1=this.Id;break;case u.ChooseTower:l.Procedure.m_CurrentProcedure.choosePlaneEntity2=this,l.Procedure.m_CurrentProcedure.choosePlaneid2=this.Id}else console.error("ChoosePlaneData is null")},n.OnUpdate=function(o){var t=this;(e.prototype.OnUpdate.call(this,o),this.Available)&&(r.distance(this.CachedNode.worldPosition,this.player.CachedNode.worldPosition)<20?(this.chooseTime+=o,this.chooseTime>this.needTime&&(this.chooseTime=0,l.Procedure.m_CurrentProcedure.GoldNum>0&&(this.m_ChoosePlaneData.HaveGold++,l.Procedure.m_CurrentProcedure.reduceGold(1),this.flyGold(),this.m_ChoosePlaneData.HaveGold>=this.m_ChoosePlaneData.NeedGold&&(this.scheduleOnce((function(){l.Procedure.m_CurrentProcedure.ChooseReady(t.m_ChoosePlaneData.chooseType)}),4),this.scheduleOnce((function(){l.UI.OpenUIFormByType(m.CountDownUI,4)}),.4),l.Procedure.m_CurrentProcedure.StopChoose(),this.needTime=1e3)))):this.chooseTime=0)},n.flyGold=function(){var e=new c(d.GeneratePermanentId(),1004);e.m_canPickTime=1e3,e.Position=l.Control.m_ControlCharacter.CachedNode.worldPosition,e.m_flytoPlane=!0,e.m_PlaneTarget=this,l.Entity.ShowflyGold(e),this.m_goldLab.string=this.m_ChoosePlaneData.HaveGold+"/"+this.m_ChoosePlaneData.NeedGold,this.ShakePlane()},n.ShakePlane=function(){i(this.CachedNode).delay(.2).to(.05,{scale:a(1.05,1.05,1.05)}).to(.05,{scale:a(1,1,1)}).start()},t}(h))||C);t._RF.pop()}}}));

System.register("chunks:///_virtual/ChoosePlaneData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,o,a,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,a=e._decorator},function(e){n=e.EntityData}],execute:function(){var r;o._RF.push({},"24be1wrVqtLAbhFAQeF5ddD","ChoosePlaneData",void 0);var c=a.ccclass;a.property,e("ChoosePlaneData",c("ChoosePlaneData")(r=function(e){function o(){for(var t,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).chooseType=0,t.chooseStr="",t.NeedGold=0,t.HaveGold=0,t}return t(o,e),o}(n))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtility.ts",["cc"],(function(n){var t,r,e;return{setters:[function(n){t=n.cclegacy,r=n._decorator,e=n.v3}],execute:function(){var o,a;t._RF.push({},"de96f9Ky2JLjqaP0EDtm8ws","CommonUtility",void 0);var i=r.ccclass;r.property,n("CommonUtility",i("CommonUtility")(((a=function(){function n(){}return n.GeneratePermanentId=function(){return++n.PermanentEntityId},n.GenerateTemporaryId=function(){return--n.TemporaryEntityId},n.ResetEntityID=function(){n.PermanentEntityId=0,n.TemporaryEntityId=0},n.GetOrAddComponent=function(n,t){return null==n?(console.warn("GetOrAddComponent: node is null"),null):n.getComponent(t)||n.addComponent(t)},n.GetIntegerRandom=function(n,t){return Math.floor(Math.random()*(t-n+1)+n)},n.GetRandomVec2=function(n,t){return e(Math.random()*(t-n)+n,Math.random()*(t-n)+n)},n.GetRandomVec3=function(n,t,r){return e(Math.random()*(n.x-n.y)+n.x,Math.random()*(t.x-t.y)+t.x,Math.random()*(r.x-r.y)+r.x)},n.StringHashCode=function(n){var t=0;if(0==n.length)return t.toString();for(var r=0;r<n.length;r++){t=(t<<5)-t+n.charCodeAt(r),t|=0}return t.toString()},n.GetBezierPoint=function(n,t,r,o){var a=(1-n)*(1-n)*t.x+2*n*(1-n)*r.x+n*n*o.x,i=(1-n)*(1-n)*t.y+2*n*(1-n)*r.y+n*n*o.y,u=(1-n)*(1-n)*t.z+2*n*(1-n)*r.z+n*n*o.z;return e(a,i,u)},n}()).PermanentEntityId=0,a.TemporaryEntityId=0,o=a))||o),n("LanguageType",function(n){return n[n["中文"]=0]="中文",n[n["中文繁体"]=1]="中文繁体",n[n["英文"]=2]="英文",n[n["日文"]=3]="日文",n[n["韩文"]=4]="韩文",n[n["法文"]=5]="法文",n[n["俄文"]=6]="俄文",n[n["阿拉伯文"]=7]="阿拉伯文",n[n["泰文"]=8]="泰文",n[n["德文"]=9]="德文",n}({})),n("PlatformType",function(n){return n[n.ios=0]="ios",n[n.other=1]="other",n}({})),n("commonVocabulary",function(n){return n[n["了解更多"]=0]="了解更多",n[n["返回"]=1]="返回",n[n["暂停"]=2]="暂停",n}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigInterface.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){c("ConfigInterface",void 0),e._RF.push({},"7740c+cXqdM/4Yl+vcj5ku4","ConfigInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigReader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts"],(function(e){var n,r,t,a,o,s;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,a=e._decorator,o=e.JsonAsset},function(e){s=e.GameEntry}],execute:function(){t._RF.push({},"cbadeIfw8hA2qMs6ZZlx0w+","ConfigReader",void 0);a.ccclass,a.property,e("JsonTableReader",function(){function e(e){this.data=[],this.fileName=e}var t=e.prototype;return t.loadData=function(){var e=n(r().mark((function e(n){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){""!=n&&null!=n||(n=s.Resource.m_ResourceBundleName[0]),s.Resource.ResourceBundle.get(n).load("Configs/"+t.fileName,o,(function(n,a){if(n)return console.error("Failed to load JSON table:",n),void r(n);"object"!=typeof a.json||Array.isArray(a.json)?Array.isArray(a.json)?t.data=a.json:(console.error("Loaded data is neither an array nor an object:",a.json),r(new Error("Loaded data is neither an array nor an object"))):t.data=Object.keys(a.json).reduce((function(e,n){var r=a.json[n];return null!==r&&"object"==typeof r&&e.push(r),e}),[]),e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.getAllData=function(){return this.data},t.getDataById=function(e){return this.data.find((function(n){return n.Id===e}))},t.getDataCount=function(){return this.data.length},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./UGuiForm.ts"],(function(t){var e,n,i,r,a,u,o,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,u=t._decorator,o=t.Label},function(t){l=t.GameEntry},function(t){c=t.UGuiForm}],execute:function(){var g,s,m,h,f,b,p,y,d;a._RF.push({},"7f2c2ovNmJBl6tThMCxH00s","ConfigUI",void 0);var C=u.ccclass,T=u.property;t("ConfigUI",(g=C("ConfigUI"),s=T(o),m=T(o),h=T(o),g((p=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a))||this,i(e,"langren",p,r(e)),i(e,"gebuling",y,r(e)),i(e,"automaticCreatTimeLabel",d,r(e)),e.langrenNum=1,e.gebulingNum=1,e.automaticCreatEnemy=!0,e.creatEnemyTime=10,e}n(e,t);var a=e.prototype;return a.OnOpen=function(e){t.prototype.OnOpen.call(this,e),l.Procedure.m_CurrentProcedure2.configUI=this},a.addLangren=function(){this.langrenNum++,this.langren.string="狼人"+this.langrenNum.toString()},a.reduceLangren=function(){this.langrenNum--,this.langren.string="狼人"+this.langrenNum.toString()},a.addGebuling=function(){this.gebulingNum++,this.gebuling.string="哥布林"+this.gebulingNum.toString()},a.reduceGebuling=function(){this.gebulingNum--,this.gebuling.string="哥布林"+this.gebulingNum.toString()},a.addTime=function(){this.creatEnemyTime++,this.automaticCreatTimeLabel.string=this.creatEnemyTime.toString()},a.reduceTime=function(){this.creatEnemyTime--,this.automaticCreatTimeLabel.string=this.creatEnemyTime.toString()},a.automaticCreatEnemyChange=function(){this.automaticCreatEnemy=!this.automaticCreatEnemy},a.creatEnemy=function(){},e}(c)).prototype,"langren",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(b.prototype,"gebuling",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(b.prototype,"automaticCreatTimeLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=b))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/ControlComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts"],(function(t){var o,e,n,r,i,a,s,l,h,m,_,c,p,C;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.Camera,l=t.v2,h=t.input,m=t.Input,_=t.Vec3,c=t.v3,p=t.KeyCode},function(t){C=t.FrameworkComponent}],execute:function(){var u,y,f,d,E,v;i._RF.push({},"2858a4OVQ5AoJEfXkNaE94P","ControlComponent",void 0);var K=a.ccclass,b=a.property;t("ControlComponent",(u=K("ControlComponent"),y=b(s),u((E=o((d=function(t){function o(){for(var o,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(o=t.call.apply(t,[this].concat(i))||this).m_ControlCharacter=null,o.m_Horizontal=0,o.m_Vertical=0,n(o,"m_UICamera",E,r(o)),n(o,"m_MinInput",v,r(o)),o.m_JoyStick=null,o.m_ThirdPersonCamera=null,o.m_EnableControl=!0,o.m_dir=l(0,0),o.m_NoneInput=!0,o.m_ShowMoveTipTime=3,o.m_NoneInputTime=0,o.m_MoveTipOpened=!1,o.m_MoveTipUI=null,o}e(o,t);var i=o.prototype;return i.Oninit=function(){h.on(m.EventType.KEY_DOWN,this.onKeyDown,this),h.on(m.EventType.KEY_UP,this.onKeyUp,this),this.m_componentCompleted=!0},i.OnUpdate=function(o){if(t.prototype.OnUpdate.call(this,o),this.m_EnableControl&&null!=this.m_ControlCharacter&&this.m_ControlCharacter.Available&&this.m_ControlCharacter.Visible){if(0!=this.m_Horizontal||0!=this.m_Vertical){new _(this.m_Horizontal,0,this.m_Vertical);this.m_ControlCharacter.MoveUseCharacterController(c(-this.m_Horizontal,0,this.m_Vertical)),this.m_ControlCharacter.CharacterTrun(c(this.m_Horizontal,0,-this.m_Vertical)),this.m_NoneInput=!1,this.m_ControlCharacter.BeControl=!0}null!=this.m_JoyStick&&(this.m_dir=this.m_JoyStick.m_dir,(Math.abs(this.m_dir.x)>this.m_MinInput||Math.abs(this.m_dir.y)>this.m_MinInput)&&(this.m_ControlCharacter.MoveUseCharacterController(c(-this.m_dir.x,0,this.m_dir.y)),this.m_ControlCharacter.CharacterTrun(c(this.m_dir.x,0,-this.m_dir.y)),this.m_NoneInput=!1,this.m_ControlCharacter.BeControl=!0)),this.m_NoneInput&&(this.m_ControlCharacter.CharacterIdle(),this.m_ControlCharacter.BeControl=!1),this.m_NoneInput=!0}},i.onKeyDown=function(t){switch(t.keyCode){case p.KEY_A:this.m_Horizontal=-1;break;case p.KEY_D:this.m_Horizontal=1;break;case p.KEY_W:this.m_Vertical=1;break;case p.KEY_S:this.m_Vertical=-1}},i.onKeyUp=function(t){switch(t.keyCode){case p.KEY_A:case p.KEY_D:this.m_Horizontal=0;break;case p.KEY_W:case p.KEY_S:this.m_Vertical=0}},i.SetJoySitck=function(t){this.m_JoyStick=t,this.m_dir=t.m_dir},i.onDestroy=function(){h.off(m.EventType.KEY_DOWN,this.onKeyDown,this),h.off(m.EventType.KEY_UP,this.onKeyUp,this)},o}(C)).prototype,"m_UICamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(d.prototype,"m_MinInput",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/CountDownUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./UGuiForm.ts"],(function(t){var o,i,n,e,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Label},function(t){s=t.GameEntry},function(t){r=t.UGuiForm}],execute:function(){var h;i._RF.push({},"ababfXEpL9Ihp+bZ48lBxW8","CountDownUI",void 0);var a=n.ccclass;n.property,t("CountDownUI",a("CountDownUI")(h=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).m_ShowLab=null,o.time=0,o.ShowTime=0,o}o(i,t);var n=i.prototype;return n.OnOpen=function(o){return t.prototype.OnOpen.call(this,o),this.Available=!0,this.time=o,isNaN(this.time)||this.time<0?(console.warn("CountDownUI data error"),void s.UI.CloseUIForm(this)):(this.m_ShowLab=this.CachedNode.children[0].getComponent(e),null==this.m_ShowLab?(console.warn("show label is null"),void s.UI.CloseUIForm(this)):void(this.m_ShowLab.string=this.time.toString()))},n.OnUpdate=function(o){t.prototype.OnUpdate.call(this,o),this.Available&&(this.time-=o,Math.floor(this.time)!=this.ShowTime&&(this.ShowTime=Math.floor(this.time),this.m_ShowLab.string=this.ShowTime.toString(),this.ShowTime<=0&&(this.Available=!1,s.UI.CloseUIForm(this))))},i}(r))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/DataTableComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./ConfigReader.ts"],(function(e){var t,a,l,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,l=e._decorator},function(e){i=e.FrameworkComponent},function(e){n=e.JsonTableReader}],execute:function(){var o;a._RF.push({},"fcfebWeoRVOr4I9qGuvihvQ","DataTableComponent",void 0);var r=l.ccclass;l.property,e("DataTableComponent",r("DataTableComponent")(o=function(e){function a(){for(var t,a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(t=e.call.apply(e,[this].concat(l))||this).EntityTable=void 0,t.CharacterEntityTable=void 0,t.HeroConfigTable=void 0,t.GameProcadureTable=void 0,t.RoleAttributesTable=void 0,t.SceneTable=void 0,t.SoundTable=void 0,t.WeaponTable=void 0,t.BulletTable=void 0,t.BuildingTable=void 0,t.UIFormTable=void 0,t.CreatEnemyTable=void 0,t.OtherTable=void 0,t.tables=new Map,t}t(a,e);var l=a.prototype;return l.Oninit=function(){for(var e in this.CharacterEntityTable=new n("CharacterEntity"),this.tables.CharacterEntityTable=this.CharacterEntityTable,this.EntityTable=new n("Entity"),this.tables.EntityTable=this.EntityTable,this.GameProcadureTable=new n("GameProcedure"),this.tables.GameProcadureTable=this.GameProcadureTable,this.HeroConfigTable=new n("HeroConfig"),this.tables.HeroConfigTable=this.HeroConfigTable,this.RoleAttributesTable=new n("RoleAttributes"),this.tables.RoleAttributesTable=this.RoleAttributesTable,this.SceneTable=new n("Scene"),this.tables.SceneTable=this.SceneTable,this.SoundTable=new n("Sound"),this.tables.SoundTable=this.SoundTable,this.WeaponTable=new n("Weapon"),this.tables.WeaponTable=this.WeaponTable,this.BulletTable=new n("Bullet"),this.tables.BulletTable=this.BulletTable,this.BuildingTable=new n("Building"),this.tables.BuildingTable=this.BuildingTable,this.UIFormTable=new n("UIForm"),this.tables.UIFormTable=this.UIFormTable,this.CreatEnemyTable=new n("CreatEnemy"),this.tables.CreatEnemyTable=this.CreatEnemyTable,this.OtherTable=new n("Other"),this.tables.OtherTable=this.OtherTable,this.tables)try{this.tables[e].loadData()}catch(t){return void console.error("Failed to load table "+e+":",t)}this.m_componentCompleted=!0},l.getTable=function(e){return this.tables[e]},a}(i))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/DelayHideEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(e){var t,i,a,l,n;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,a=e._decorator,l=e.ParticleSystem},function(e){n=e.Entity}],execute:function(){var c;i._RF.push({},"6cfa6mvUmZFXKWTS8AF1geX","DelayHideEffect",void 0);var o=a.ccclass;a.property,e("DelayHideEffect",o("DelayHideEffect")(c=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).m_DelayHideEffectData=void 0,t}return t(i,e),i.prototype.OnShow=function(t){if(e.prototype.OnShow.call(this,t),this.m_DelayHideEffectData=t,null!=this.m_DelayHideEffectData){for(var i=this.node.getComponentsInChildren(l),a=0;a<i.length;a++)i[a].stop(),i[a].clear(),i[a].play();this.m_DelayHideEffectData.lifeTime>0&&this.DelayHide(this.m_DelayHideEffectData.lifeTime)}else console.error("DelayHideEffectData is null")},i}(n))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/DelayHideEffectData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,a,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e._decorator},function(e){c=e.EntityData}],execute:function(){var n;a._RF.push({},"4ea5ew+VVZKu6qY5HK1h7cG","DelayHideEffectData",void 0);var r=i.ccclass;i.property,e("DelayHideEffectData",r("DelayHideEffectData")(n=function(e){function a(t,a,i){var c;return(c=e.call(this,t,a)||this).lifeTime=0,c.lifeTime=i,c}return t(a,e),a}(c))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/DrawerButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,r,n,a,s,u,l,c,d,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Enum,u=t.Node,l=t.Button,c=t.UITransform,d=t.v3,m=t.tween,h=t.Component}],execute:function(){var v,p,f,y,N,b,g,w,T;n._RF.push({},"d36efmj6GNN/7OuXg2LNRoo","DrawerButton",void 0);var D=a.ccclass,I=a.property,B=t("diration",function(t){return t[t["上"]=1]="上",t[t["下"]=2]="下",t[t["左"]=3]="左",t[t["右"]=4]="右",t}({}));t("DrawerButton",(v=D("DrawerButton"),p=I({type:s(B),displayName:"移动方向"}),f=I({displayName:"移动时间"}),y=I({type:u,displayName:"移动对象",tooltip:"把要移动的节点放在这里"}),v((g=e((b=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"dira",g,r(e)),i(e,"moveTime",w,r(e)),i(e,"moveNode",T,r(e)),e.moveNodeUITransform=void 0,e.button=void 0,e.moveDir=!0,e.canMove=!0,e}o(e,t);var n=e.prototype;return n.start=function(){this.button=this.node.getComponent(l),null!=this.moveNode&&(this.moveNodeUITransform=this.moveNode.getComponent(c))},n.clickButton=function(){var t=this;if(null!=this.moveNode&&this.canMove){this.canMove=!1;var e=d(0,0,0);e=this.moveNode.position,1==this.dira?(this.dira=2,e=d(e.x,e.y+this.moveNodeUITransform.height,0)):2==this.dira?(this.dira=1,e=d(e.x,e.y-this.moveNodeUITransform.height,0)):3==this.dira?(this.dira=4,e=d(e.x-this.moveNodeUITransform.width,e.y,0)):4==this.dira&&(this.dira=3,e=d(e.x+this.moveNodeUITransform.width,e.y,0)),m(this.moveNode).to(this.moveTime,{position:e}).call((function(){t.canMove=!0})).start()}},e}(h)).prototype,"dira",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.上}}),w=e(b.prototype,"moveTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=e(b.prototype,"moveNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=b))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/DropGold.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./ProcedureEnum.ts"],(function(t){var o,n,a,e,i,l,r,s,u,d,c,p,h,m,y;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,e=t.assertThisInitialized,i=t.createClass},function(t){l=t.cclegacy,r=t._decorator,s=t.v3,u=t.Tween,d=t.tween,c=t.Quat,p=t.Vec3},function(t){h=t.Entity},function(t){m=t.GameEntry},function(t){y=t.SoundEnum}],execute:function(){var D,f,G;l._RF.push({},"89c73kmF3dN14/043h+yjTd","DropGold",void 0);var _=r.ccclass,g=r.property;t("DropGold",_("DropGold")((G=o((f=function(t){function o(){for(var o,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return o=t.call.apply(t,[this].concat(i))||this,a(o,"m_DropGoldData",G,e(o)),o}n(o,t);var l=o.prototype;return l.OnShow=function(o){t.prototype.OnShow.call(this,o),this.m_DropGoldData=o,null!=this.m_DropGoldData?(this.Available=!1,this.CachedNode.scale=s(1,1,1),u.stopAllByTarget(this.node),this.m_DropGoldData.m_flytoPlane?this.flyToPlane():this.RnadomJump()):console.error("DropGoldData is null")},l.flytoHero=function(t){var o=this;this.Available&&(this.Available=!1,d(this.node).to(.2,{position:t.node.position,scale:s(.1,.1,.1)}).call((function(){m.Sound.PlaySoundByEnum(y.GetGold),m.Procedure.m_GameProcedure.ChangeGoldNum(o.m_DropGoldData.GoldNum),m.Entity.HideEntity(o)})).start())},l.flyToPlane=function(){var t=this,o=s(0,0,0);null!=this.m_DropGoldData.m_PlaneTarget&&(o=this.m_DropGoldData.m_PlaneTarget.node.getPosition()),null!=this.m_DropGoldData.m_PlaneBuyTarget&&(o=this.m_DropGoldData.m_PlaneBuyTarget.node.getPosition());var n=s(0,0,0),a=this.CachedNode.position.x+o.x,e=this.CachedNode.position.z+o.z;n=s(.5*a,4,.5*e),this.CachedNode.scale=s(0,0,0);var i=new c,l=new c;c.fromEuler(i,0,180,0),c.fromEuler(l,0,0,0),d(this.CachedNode).to(.2,{position:n,scale:s(1,1,1)}).to(.2,{position:o}).call((function(){m.Entity.HideEntity(t)})).start()},l.RnadomJump=function(){var t=this,o=s(0,0,0);p.random(o),o.multiplyScalar(.8),d(this.node).by(.2,{position:s(o.x,4,o.z)},{easing:"quadOut"}).by(.2,{position:s(o.x,-4,o.z)},{easing:"quadIn"}).call((function(){m.Sound.PlaySoundByEnum(y.DropGold)})).by(.25,{position:s(.4*o.x,2,.4*o.z)},{easing:"quadOut"}).by(.25,{position:s(.4*o.x,-2,.4*o.z)},{easing:"quadIn"}).call((function(){t.Available=!0})).start()},i(o,[{key:"dropGoldData",get:function(){return this.m_DropGoldData}}]),o}(h)).prototype,"m_DropGoldData",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=f))||D);l._RF.pop()}}}));

System.register("chunks:///_virtual/DropGoldData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(t){var o,e,n,a,r;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,a=t._decorator},function(t){r=t.EntityData}],execute:function(){var i;n._RF.push({},"1b895XhR8lDvq6MxqWt46yV","DropGoldData",void 0);var c=a.ccclass;a.property,t("DropGoldData",c("DropGoldData")(i=function(t){function n(o,e){var n;return(n=t.call(this,o,e)||this).m_GoldNum=void 0,n.m_canPickTime=.9,n.m_flytoPlane=!1,n.m_PlaneTarget=void 0,n.m_PlaneBuyTarget=void 0,n}return o(n,t),e(n,[{key:"GoldNum",get:function(){return this.m_GoldNum},set:function(t){this.m_GoldNum=t}}]),n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityLogic.ts","./GameEntry.ts"],(function(t){var n,i,e,o,a,s,r,c;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,o=t._decorator,a=t.tween,s=t.Tween},function(t){r=t.EntityLogic},function(t){c=t.GameEntry}],execute:function(){var l;e._RF.push({},"72172EA8WZACpuVzYYR1gDt","Entity",void 0);var y=o.ccclass;o.property,t("Entity",y("Entity")(l=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).m_EntityData=null,n}n(e,t);var o=e.prototype;return o.Oninit=function(n,i,e,o){t.prototype.Oninit.call(this,n,i,e,o)},o.OnRecycle=function(){t.prototype.OnRecycle.call(this)},o.OnShow=function(n){if(t.prototype.OnShow.call(this,n),this.m_EntityData=n,null==this.m_EntityData)return console.error("EntityData is null"),void this.DelayHide(0);this.TypeId=this.m_EntityData.TypeId,this.m_EntityData.AssetPath=this.EntityAssetPath,this.CachedNode.setPosition(this.m_EntityData.Position),this.CachedNode.setRotationFromEuler(this.m_EntityData.Rotation),this.EnableUpdate=!0},o.DelayHide=function(t){var n=this;void 0===t&&(t=0),a(this.node).delay(t).call((function(){c.Entity.HideEntity(n)})).start()},o.OnHide=function(){t.prototype.OnHide.call(this),s.stopAllByTarget(this.node),s.stopAllByTarget(this)},i(e,[{key:"EntityData",get:function(){return this.m_EntityData}}]),e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/EntityComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./IEntityManager.ts","./FrameworkEntry.ts"],(function(t){var n,e,r,i,o,a,u,s,c,y,p,E,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass,a=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,y=t.CCString},function(t){p=t.FrameworkComponent},function(t){E=t.IEntityManager},function(t){l=t.FrameworkEntry}],execute:function(){var m,f,h,_,g,M;s._RF.push({},"07a53dtOT9AMJWEMHLXPO2b","EntityComponent",void 0);var d=c.ccclass,G=c.property;t("EntityComponent",(m=d("EntityComponent"),f=G([y]),m((g=n((_=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,r(n,"m_PoolSize",g,i(n)),r(n,"m_EntityGroups",M,i(n)),n.m_EntityManager=void 0,n}e(n,t);var s=n.prototype;return s.Oninit=function(){t.prototype.Oninit.call(this),l.RegisterModule("IEntityManager",E.GetInstance(this.node,this.m_PoolSize,this.m_EntityGroups)),this.m_EntityManager=l.GetModule("IEntityManager"),this.m_componentCompleted=!0},s.ShowEntity=function(){var t=a(u().mark((function t(n,e,r,i,o){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.m_EntityManager._ShowEntity(n,e,r,i,o);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t,this)})));return function(n,e,r,i,o){return t.apply(this,arguments)}}(),s.HideEntity=function(t){this.m_EntityManager._HideEntity(t)},s.AttachEntity=function(t,n,e,r){this.m_EntityManager._AttachEntity(t,n,e,r)},s.GetEntity=function(t){return this.m_EntityManager._GetEntity(t)},s.GetEntityByGroup=function(t){return this.m_EntityManager._GetEntityByGroup(t)},o(n,[{key:"EntityGroupNodes",get:function(){return this.m_EntityManager.m_EntityGroupNodes}}]),n}(p)).prototype,"m_PoolSize",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),M=n(_.prototype,"m_EntityGroups",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=_))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/EntityData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,n=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator,a=t.Vec3}],execute:function(){var s,u,c,l,m,h,f;r._RF.push({},"f092dsKVhtN5LVuuywvO1EZ","EntityData",void 0);var _=o.ccclass,y=o.property;t("EntityData",_("EntityData")((c=e((u=function(){function t(t,e){n(this,"m_Id",c,this),n(this,"m_TypeId",l,this),n(this,"m_Position",m,this),n(this,"m_Rotation",h,this),n(this,"m_Scale",f,this),this.m_Name="",this.m_AssetPath="",this.m_Id=t,this.m_TypeId=e}return i(t,[{key:"Id",get:function(){return this.m_Id}},{key:"TypeId",get:function(){return this.m_TypeId}},{key:"AssetPath",get:function(){return this.m_AssetPath},set:function(t){this.m_AssetPath=t}},{key:"Position",get:function(){return this.m_Position},set:function(t){this.m_Position=t}},{key:"Rotation",get:function(){return this.m_Rotation},set:function(t){this.m_Rotation=t}},{key:"Scale",get:function(){return this.m_Scale},set:function(t){this.m_Scale=t}},{key:"Name",get:function(){return this.m_Name},set:function(t){this.m_Name=t}}]),t}()).prototype,"m_Id",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=e(u.prototype,"m_TypeId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(u.prototype,"m_Position",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(0,0,0)}}),h=e(u.prototype,"m_Rotation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(0,0,0)}}),f=e(u.prototype,"m_Scale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(1,1,1)}}),s=u))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/EntityExtension.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./CommonUtility.ts","./GameHeroData.ts","./GameHero.ts","./CharacterEnum.ts","./AssetUtility.ts","./GameWeaponData.ts","./GameWeapon.ts","./GameBulletData.ts","./GameBullet.ts","./Building.ts","./DropGold.ts","./DropGoldData.ts","./BuildingData.ts","./ArrowTowerData.ts","./ArrowTower.ts","./AttackSpeedUpData.ts","./AttackSpeedUp.ts","./ProcedureEnum.ts","./AttachToEntityEffectData.ts","./AttachToEntityEffect.ts","./PlayerHero.ts","./PlayerHeroData.ts","./FrameworkEntry.ts","./BuyPlane.ts","./EntityData.ts","./LeaderLineData.ts","./LeaderLine.ts","./PushBackBullet.ts","./BarracksData.ts","./Barracks.ts","./DelayHideEffectData.ts","./DelayHideEffect.ts","./LeadCircleData.ts","./LeadCircle.ts"],(function(t){var e,n,a,r,i,o,s,c,u,p,l,d,m,f,y,A,h,D,I,w,g,E,S,v,M,G,P,k,B,T,x,b,C,H,W,L,_,N,R,F;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,i=t.v3},function(t){o=t.GameEntry},function(t){s=t.CommonUtility},function(t){c=t.GameHeroData},function(t){u=t.GameHero},function(t){p=t.EntityGroup},function(t){l=t.AssetUtility},function(t){d=t.GameWeaponData},function(t){m=t.GameWeapon},function(t){f=t.GameBulletData},function(t){y=t.GameBullet},function(t){A=t.Building},function(t){h=t.DropGold},function(t){D=t.DropGoldData},function(t){I=t.BuildingData},function(t){w=t.ArrowTowerData},function(t){g=t.ArrowTower},function(t){E=t.AttackSpeedUpData},function(t){S=t.AttackSpeedUp},function(t){v=t.ItemEnum},function(t){M=t.AttachToEntityEffectData},function(t){G=t.AttachToEntityEffect},function(t){P=t.PlayerHero},function(t){k=t.PlayerHeroData},function(t){B=t.FrameworkEntry},function(t){T=t.BuyPlane},function(t){x=t.EntityData},function(t){b=t.LeaderLineData},function(t){C=t.LeaderLine},function(t){H=t.PushBackBullet},function(t){W=t.BarracksData},function(t){L=t.Barracks},function(t){_=t.DelayHideEffectData},function(t){N=t.DelayHideEffect},function(t){R=t.LeadCircleData},function(t){F=t.LeadCircle}],execute:function(){var U;a._RF.push({},"19156aLAhlDC5v5VQHb2FGb","EntityExtension",void 0);var V=r.ccclass;r.property,t("EntityExtension",V("EntityExtension")(U=function(){function t(){this.m_IEntityManager=void 0}var a=t.prototype;return a.ShowHero=function(){var t=e(n().mark((function t(e,a,r){var s,d,m,f,y;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=i(0,0,0)),(s=new c(e,a)).Position=r,s.Rotation=i(0,-144,0),d=o.DataTable.HeroConfigTable.getDataById(a),m=d.CharacterEntityId,f=o.DataTable.CharacterEntityTable.getDataById(m),s.AssetPath=l.GetCharacterAsset(f.AssetName),s.IdleAnim=f.IdleAnim,s.MoveAnim=f.MoveAnim,s.AttackAnim=f.AttackAnim,s.DeathAnim=f.DeathAnim,s.HeroName=d.HeroName,s.CharacterEntityId=d.CharacterEntityId,s.Camp=d.Camp,s.CharacterType=d.CharacterType,s.MaxHP=d.MaxHealthPoint,s.MoveSpeed=d.MoveSpeed,s.TrunSpeed=d.TurnSpeed,s.BodyScale=i(d.BodyScale,d.BodyScale,d.BodyScale),s.ViewDistance=d.ViewDistance,s.MaxMagicPoint=d.MaxMagicPoint,s.AttackDamage=d.AttackDamage,s.AttackSpeed=d.AttackSpeed,s.AttackDistance=d.AttackDistance,s.Armor=d.Armor,s.MagicResistance=d.MagicResistance,s.Strength=d.Strength,s.Agile=d.Agile,s.Wisdom=d.Wisdom,s.FindEnemyDistance=d.FindEnemyDistance,s.PursuitDistance=d.PursuitDistance,s.PursuitTime=d.PursuitTime,s.WeaponId=d.WeaponId.split(",").map(Number),s.FunctionId=d.FunctionId,s.DropGold=d.DropGold,s.AngerState=d.Anger,t.next=39,B.GetModule("IEntityManager")._ShowEntity(u,e,p.Character,s.AssetPath,s);case 39:return y=t.sent,t.abrupt("return",y);case 41:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a.ShowPlayerHero=function(){var t=e(n().mark((function t(e,a,r){var s,c,u,d,m;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=i(0,0,0)),(s=new k(e,a)).Position=r,s.Rotation=i(0,-144,0),c=o.DataTable.HeroConfigTable.getDataById(a),u=c.CharacterEntityId,d=o.DataTable.CharacterEntityTable.getDataById(u),s.AssetPath=l.GetCharacterAsset(d.AssetName),s.IdleAnim=d.IdleAnim,s.MoveAnim=d.MoveAnim,s.AttackAnim=d.AttackAnim,s.DeathAnim=d.DeathAnim,s.HeroName=c.HeroName,s.CharacterEntityId=c.CharacterEntityId,s.Camp=c.Camp,s.CharacterType=c.CharacterType,s.MaxHP=c.MaxHealthPoint,s.MoveSpeed=c.MoveSpeed,s.TrunSpeed=c.TurnSpeed,s.BodyScale=i(c.BodyScale,c.BodyScale,c.BodyScale),s.ViewDistance=c.ViewDistance,s.MaxMagicPoint=c.MaxMagicPoint,s.AttackDamage=c.AttackDamage,s.AttackSpeed=c.AttackSpeed,s.AttackDistance=c.AttackDistance,s.Armor=c.Armor,s.MagicResistance=c.MagicResistance,s.Strength=c.Strength,s.Agile=c.Agile,s.Wisdom=c.Wisdom,s.FindEnemyDistance=c.FindEnemyDistance,s.PursuitDistance=c.PursuitDistance,s.PursuitTime=c.PursuitTime,s.WeaponId=c.WeaponId.split(",").map(Number),s.FunctionId=c.FunctionId,s.DropGold=c.DropGold,s.AngerState=c.Anger,t.next=39,B.GetModule("IEntityManager")._ShowEntity(P,e,p.Character,s.AssetPath,s);case 39:return m=t.sent,t.abrupt("return",m);case 41:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a.ShowGameWeapon=function(){var t=e(n().mark((function t(e,a,r){var i,s,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new d(e,a)).Owner=r,s=o.DataTable.WeaponTable.getDataById(a),i.BulletType=s.BulletType,i.AttackSound=s.AttackSound,i.HitSound=s.HitSound,i.BulletLifeTime=s.BulletLifeTime,i.BulletSpeed=s.BulletSpeed,i.BaseAttackInterval=s.BaseAttackInterval,t.next=11,B.GetModule("IEntityManager")._ShowEntity(m,e,p.Weapon,l.GetWeaponAsset(s.AssetName),i);case 11:return c=t.sent,t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a.ShowBullet=function(){var t=e(n().mark((function t(e,a,r,i){var s,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(s=new f(e,a)).Owner=r,s.Target=i.gameWeaponData.Target,s.BulletSpeed=i.gameWeaponData.BulletSpeed,s.BulletLifeTime=i.gameWeaponData.BulletLifeTime,s.Damage=r.gameHeroData.AttackDamage,s.HitSound=i.gameWeaponData.HitSound,s.Position=i.node.worldPosition,c=o.DataTable.BulletTable.getDataById(a),t.t0=a,t.next=1002===t.t0?12:1003===t.t0?15:18;break;case 12:return t.next=14,B.GetModule("IEntityManager")._ShowEntity(H,e,p.Weapon,l.GetWeaponAsset(c.AssetName),s);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,B.GetModule("IEntityManager")._ShowEntity(H,e,p.Weapon,l.GetWeaponAsset(c.AssetName),s);case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,B.GetModule("IEntityManager")._ShowEntity(y,e,p.Weapon,l.GetWeaponAsset(c.AssetName),s);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),a.ShowBuilding=function(){var t=e(n().mark((function t(e,a,r,s){var c,u,d,m,f,y,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=new I(e,a),u=o.DataTable.BuildingTable.getDataById(a),d=u.EntityId,m=u.Position.split(","),f=u.Angle.split(","),null==r?(c.Position=i(parseInt(m[0]),parseInt(m[1]),parseInt(m[2])),c.Rotation=i(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]))):(c.Position=r,c.Rotation=s),y=o.DataTable.CharacterEntityTable.getDataById(d),c.AssetPath=l.GetBuildingAsset(y.AssetName),c.IdleAnim=y.IdleAnim,c.MoveAnim=y.MoveAnim,c.AttackAnim=y.AttackAnim,c.DeathAnim=y.DeathAnim,c.Camp=u.Camp,c.MaxHP=u.MaxHP,t.next=16,B.GetModule("IEntityManager")._ShowEntity(A,e,p.Building,c.AssetPath,c);case 16:return h=t.sent,t.abrupt("return",h);case 18:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),a.ShowBarrack=function(){var t=e(n().mark((function t(e,a,r,s,c){var u,d,m,f,y,A,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=new W(e,a),d=o.DataTable.BuildingTable.getDataById(a),m=d.EntityId,f=d.Position.split(","),y=d.Angle.split(","),null==s?(u.Position=i(parseInt(f[0]),parseInt(f[1]),parseInt(f[2])),u.Rotation=i(parseInt(y[0]),parseInt(y[1]),parseInt(y[2]))):(u.Position=s,u.Rotation=c),A=o.DataTable.CharacterEntityTable.getDataById(m),u.AssetPath=l.GetBuildingAsset(A.AssetName),u.IdleAnim=A.IdleAnim,u.MoveAnim=A.MoveAnim,u.AttackAnim=A.AttackAnim,u.DeathAnim=A.DeathAnim,u.Camp=d.Camp,u.MaxHP=d.MaxHP,u.m_creatPos=r,t.next=17,B.GetModule("IEntityManager")._ShowEntity(L,e,p.Building,u.AssetPath,u);case 17:return h=t.sent,t.abrupt("return",h);case 19:case"end":return t.stop()}}),t)})));return function(e,n,a,r,i){return t.apply(this,arguments)}}(),a.ShowDropGold=function(){var t=e(n().mark((function t(e,a){var r,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.GeneratePermanentId(),(i=new D(r,1004)).Position=e,i.GoldNum=a,t.next=6,B.GetModule("IEntityManager")._ShowEntity(h,r,p.Item,l.GetItemAsset("Gold"),i);case 6:return o=t.sent,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.ShowflyGold=function(){var t=e(n().mark((function t(e){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.GetModule("IEntityManager")._ShowEntity(h,e.Id,p.Item,l.GetItemAsset("Gold"),e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.ShowTower=function(){var t=e(n().mark((function t(e,a,r,s){var c,u,d,m,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=i(0,0,0)),void 0===s&&(s=i(0,0,0)),(c=new w(e,a)).Position=r,c.Rotation=s,u=o.DataTable.HeroConfigTable.getDataById(a),d=u.CharacterEntityId,m=o.DataTable.CharacterEntityTable.getDataById(d),c.AssetPath=l.GetCharacterAsset(m.AssetName),c.IdleAnim=m.IdleAnim,c.MoveAnim=m.MoveAnim,c.AttackAnim=m.AttackAnim,c.DeathAnim=m.DeathAnim,c.HeroName=u.HeroName,c.CharacterEntityId=u.CharacterEntityId,c.Camp=u.Camp,c.CharacterType=u.CharacterType,c.MaxHP=u.MaxHealthPoint,c.MoveSpeed=u.MoveSpeed,c.TrunSpeed=u.TurnSpeed,c.BodyScale=i(u.BodyScale,u.BodyScale,u.BodyScale),c.ViewDistance=u.ViewDistance,c.MaxMagicPoint=u.MaxMagicPoint,c.AttackDamage=u.AttackDamage,c.AttackSpeed=u.AttackSpeed,c.AttackDistance=u.AttackDistance,c.Armor=u.Armor,c.MagicResistance=u.MagicResistance,c.Strength=u.Strength,c.Agile=u.Agile,c.Wisdom=u.Wisdom,c.FindEnemyDistance=u.FindEnemyDistance,c.PursuitDistance=u.PursuitDistance,c.PursuitTime=u.PursuitTime,c.WeaponId=u.WeaponId.split(",").map(Number),c.FunctionId=u.FunctionId,c.DropGold=u.DropGold,t.next=39,B.GetModule("IEntityManager")._ShowEntity(g,e,p.Character,c.AssetPath,c);case 39:return f=t.sent,t.abrupt("return",f);case 41:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),a.ShowAttackSpeedUpEffect=function(t,e,n,a){var r=s.GeneratePermanentId(),i=new E(r,1005);i.TargetHero=t,i.AttackSpeedUpTime=e,i.AttackSpeedUpValue=n,i.DamageUpValue=a,B.GetModule("IEntityManager")._ShowEntity(S,r,p.Item,l.GetItemAsset("SpeedUpEffect"),i)},a.ShowGetGoldEffect=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.ShowAttachhEffect=function(){var t=e(n().mark((function t(e,a,r){var i,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=new M(s.GeneratePermanentId(),r,a,e),c=o.DataTable.EntityTable.getDataById(r),B.GetModule("IEntityManager")._ShowEntity(G,i.Id,p.Item,l.GetItemAsset(c.AssetName),i);case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a.ShowEffect=function(){var t=e(n().mark((function t(e,a,r,i){var c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(c=new _(s.GeneratePermanentId(),e,a)).Position=r,c.Rotation=i,u=o.DataTable.EntityTable.getDataById(e),B.GetModule("IEntityManager")._ShowEntity(N,c.Id,p.Item,l.GetItemAsset(u.AssetName),c);case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),a.ShowLeadCircle=function(){var t=e(n().mark((function t(e,a,r){var i,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new R(s.GeneratePermanentId())).Position=e,i.Rotation=a,i.Player=r,i.playerPos=r.getWorldPosition(),c=o.DataTable.EntityTable.getDataById(v.LeadCircle),B.GetModule("IEntityManager")._ShowEntity(F,i.Id,p.Item,l.GetItemAsset(c.AssetName),i);case 7:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a.ShowItem=function(){var t=e(n().mark((function t(e,a){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===v.speedUpEffect?3:4;break;case 3:return t.abrupt("break",4);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.ShowBuyPlane=function(){var t=e(n().mark((function t(e,a){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(r=e)){t.next=4;break}return console.error("BuyPlaneData is null"),t.abrupt("return");case 4:r.AssetPath=l.GetItemAsset(a),B.GetModule("IEntityManager")._ShowEntity(T,r.Id,p.Item,r.AssetPath,r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.ShowSolider=function(){var t=e(n().mark((function t(e){var a,r,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=0;a<2;a++)for(r=0;r<e;r++)o=i(20*r-4,0,157+20*a),this.ShowHero(s.GeneratePermanentId(),1001,o);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.ShowLeadLine=function(){var t=e(n().mark((function t(e,a){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=new b(s.GeneratePermanentId(),1009)).m_plane=a,r.m_player=e,r.Name="LeaderLine",B.GetModule("IEntityManager")._ShowEntity(C,r.Id,p.Item,l.GetItemAsset("EmptyNode"),r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.ShowLeaderLine=function(){var t=e(n().mark((function t(e,a){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new x(s.GeneratePermanentId(),1009),t.abrupt("return",B.GetModule("IEntityManager")._ShowEntity(C,r.Id,p.Item,l.GetItemAsset("EmptyNode"),r));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.extensionMethod=function(){console.log("Extension method called")},t}())||U);a._RF.pop()}}}));

System.register("chunks:///_virtual/EntityLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,s;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,o=t._decorator,s=t.Component}],execute:function(){var u;i._RF.push({},"f6932AsM2xAAoIXQY7j+qsy","EntityLogic",void 0);var a=o.ccclass;o.property,t("EntityLogic",a("EntityLogic")(u=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_Id=0,e.m_TypeId=0,e.m_EntityAssetPath="",e.m_EntityGroup="",e.m_Available=!1,e.m_Visible=!1,e.m_CachedNode=null,e.m_EnableUpdate=!1,e.m_PutIntoPool=!0,e}e(i,t);var o=i.prototype;return o.Oninit=function(t,e,n,i){this.m_Id=t,this.m_EntityAssetPath=e,this.m_EntityGroup=n,this.m_CachedNode=this.node},o.OnRecycle=function(){},o.OnShow=function(t){this.m_Available=!0,this.Visible=!0},o.update=function(t){this.Available&&this.EnableUpdate&&this.OnUpdate(t)},o.OnUpdate=function(t){},o.OnHide=function(){this.Visible=!1,this.m_Available=!1},o.InternalSetVisible=function(t){this.node.active=t},n(i,[{key:"CachedNode",get:function(){return this.m_CachedNode}},{key:"Id",get:function(){return this.m_Id}},{key:"TypeId",get:function(){return this.m_TypeId},set:function(t){this.m_TypeId=t}},{key:"EntityAssetPath",get:function(){return this.m_EntityAssetPath}},{key:"Name",get:function(){return this.node.name},set:function(t){this.node.name=t}},{key:"EntityGroup",get:function(){return this.m_EntityGroup}},{key:"Available",get:function(){return this.m_Available},set:function(t){this.m_Available=t}},{key:"Visible",get:function(){return this.m_Visible},set:function(t){this.m_Visible!=t&&(this.m_Visible=t,this.InternalSetVisible(t))}},{key:"EnableUpdate",get:function(){return this.m_EnableUpdate},set:function(t){this.m_EnableUpdate=t}},{key:"PutIntoPool",get:function(){return this.m_PutIntoPool},set:function(t){this.m_PutIntoPool=t}}]),i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/EventComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts"],(function(e){var t,n,o,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.EventTarget},function(e){a=e.FrameworkComponent}],execute:function(){var i;n._RF.push({},"eeb0bUHo8VJAr1ENzRY0lO1","EventComponent",void 0);var s=o.ccclass;o.property,e("EventComponent",s("EventComponent")(i=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).m_eventTarget=void 0,t.m_eventMap=new Map,t}t(n,e);var o=n.prototype;return o.Oninit=function(){this.m_eventTarget=new r,this.m_eventMap.clear(),this.m_componentCompleted=!0},o.Subscribe=function(e,t,n,o){void 0===o&&(o=!1);var r=n?n.uuid:"null";this.m_eventMap.has(r)||this.m_eventMap.set(r,new Map);var a=this.m_eventMap.get(r);a.has(e)&&console.warn("Multiple Subscribe for the same target and eventId "),a.set(e,t),this.m_eventTarget.on(e,t,n,o)},o.UnSubscribe=function(e,t,n){var o=n?n.uuid:"null";if(this.m_eventMap.has(o)){var r=this.m_eventMap.get(o);if(r.has(e)){var a=r.get(e);r.delete(e),this.m_eventTarget.off(e,a,n)}0===r.size&&this.m_eventMap.delete(o)}else console.warn("No callback for the eventId")},o.Fire=function(e){this.m_eventTarget.emit(e.eventId,e)},o.Check=function(e,t){var n=t?t.uuid:"null";return this.m_eventMap.has(n)&&this.m_eventMap.get(n).get(e)||null},o.OnLeave=function(){},n}(a))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/FrameworkComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r,c,i;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){r=n.cclegacy,c=n._decorator,i=n.Component}],execute:function(){var a;r._RF.push({},"ca4a7D1DcdA2bBef1VlWnT6","FrameworkComponent",void 0);var u=c.ccclass;c.property,n("FrameworkComponent",u("FrameworkComponent")(a=function(n){function r(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).m_componentCompleted=!1,t}t(r,n);var c=r.prototype;return c.start=function(){this.OnEnter()},c.update=function(n){this.m_componentCompleted&&this.OnUpdate(n)},c.Oninit=function(){},c.OnEnter=function(){},c.OnUpdate=function(n){},c.onDestroy=function(){this.OnLeave()},c.OnLeave=function(){},c.executeTask=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.Oninit(),n.next=3,new Promise((function(n){return setTimeout(n,50)}));case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r}(i))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/FrameworkEntry.ts",["cc"],(function(r){var e,n;return{setters:[function(r){e=r.cclegacy,n=r._decorator}],execute:function(){e._RF.push({},"78cf0LRf8dDsaSycQBF/V43","FrameworkEntry",void 0);n.ccclass,n.property;var t={};r("FrameworkEntry",function(){function r(){}return r.GetModule=function(r){return function(r){var e=t[r];return e||console.warn("Model "+r+" is not registered"),e}(r)},r.RegisterModule=function(r,e){!function(r,e){t[r]&&console.warn("Model "+r+" is already registered"),t[r]=e}(r,e)},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FSMState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,a;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy,a=t._decorator}],execute:function(){var e;i._RF.push({},"5c7fclBPfhO2pza5oFpL2M7","FSMState",void 0);var r=a.ccclass,s=(a.property,t("FSMState",r("FSMState")(e=function(){function t(t,n){this.m_character=void 0,this.m_stateID=void 0,this.map=new Map,this.fsm=void 0,this.m_target=void 0,this.m_ExistTime=1,this.m_CanExit=!1,this.fsm=t,this.m_character=n}var i=t.prototype;return i.AddTransition=function(t,n){t!==o.NullTransition?n!==s.NullState?this.map.has(t)?console.warn(t+" Transition is already exist"):this.map.set(t,n):console.warn("StateID is null"):console.warn("Transition is null")},i.RemoveTransition=function(t){t!=o.NullTransition?this.map.has(t)?this.map.delete(t):console.warn(t+" Transition is not exist"):console.warn("Transition is null")},i.GetState=function(t){return this.map.has(t)?this.map.get(t):s.NullState},i.OnEnter=function(){},i.OnExit=function(){},i.Act=function(t){},i.Reason=function(t){},i.SetTarget=function(t){this.m_target=t},i.CanExit=function(){return this.m_CanExit},n(t,[{key:"ID",get:function(){return this.m_stateID}}]),t}())||e),t("StateID",function(t){return t[t.NullState=0]="NullState",t[t.Idle=1]="Idle",t[t.AttackBuilding=2]="AttackBuilding",t[t.AttackCharacter=3]="AttackCharacter",t[t.PlayerState=4]="PlayerState",t}({}))),o=t("Transition",function(t){return t[t.NullTransition=0]="NullTransition",t[t.FindCharacter=1]="FindCharacter",t[t.FindBuilding=2]="FindBuilding",t[t.LostCharacter=3]="LostCharacter",t[t.LostBuilding=4]="LostBuilding",t[t.LostTarget=5]="LostTarget",t}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/FSMSystem.ts",["cc","./FSMState.ts"],(function(t){var e,n,s,r;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.StateID,r=t.Transition}],execute:function(){var a;e._RF.push({},"da335GrxZVD06v5eoLjJeaS","FSMSystem",void 0);var i=n.ccclass;n.property,t("FSMSystem",i("FSMSystem")(a=function(){function t(){this.m_currentState=void 0,this.m_currentStateID=void 0,this.m_states=new Map,this.m_updateTime=0,this.m_ReasonTime=.05}var e=t.prototype;return e.Update=function(t,e){null!=this.m_currentState&&(this.m_currentState.Act(t),this.m_currentState.Reason(t))},e.AddState=function(t){null!=t?(null==this.m_currentState&&(this.m_currentState=t,this.m_currentStateID=t.ID,this.m_currentState.OnEnter()),t.ID!=s.NullState?this.m_states.set(t.ID,t):console.warn("stateID is null")):console.warn("state is null")},e.RemoveState=function(t){null!=t?t.ID!=s.NullState?this.m_states.delete(t.ID):console.warn("stateID is null"):console.warn("state is null")},e.RemoveAllState=function(){this.m_states.clear(),this.m_currentState=null,this.m_currentStateID=s.NullState},e.PreformTransition=function(t){if(t!=r.NullTransition){var e=this.m_currentState.GetState(t);if(e!=s.NullState)if(this.m_states.has(e)){this.m_updateTime=this.m_ReasonTime;var n=this.m_states.get(e);this.m_currentState.OnExit(),this.m_currentState=n,this.m_currentStateID=e,this.m_currentState.OnEnter()}else console.warn("state is not exist");else console.warn("stateID is null")}else console.warn("Transition is null")},e.GetCurrentState=function(){return this.m_currentState},t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./BattleUtility.ts","./CharacterEnum.ts","./ProcedureEnum.ts","./CommonUtility.ts","./WeaponEnum.ts"],(function(t){var e,a,i,l,o,n,r,s,u,m,h,c,f,d,_,p,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,r=t.ParticleSystem,s=t.v3,u=t.Vec3,m=t.tween},function(t){h=t.Entity},function(t){c=t.GameEntry},function(t){f=t.BattleUtility},function(t){d=t.CharacterAttribute},function(t){_=t.ItemEnum},function(t){p=t.CommonUtility},function(t){B=t.BulletType}],execute:function(){var g,y,D;o._RF.push({},"e30838ahcNEMIICkTcxynL5","GameBullet",void 0);var G=n.ccclass,E=n.property;t("GameBullet",G("GameBullet")((D=e((y=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,i(e,"m_GameBulletData",D,l(e)),e.m_targetPos=void 0,e.m_bulletParticle=void 0,e}a(e,t);var o=e.prototype;return o.OnShow=function(e){t.prototype.OnShow.call(this,e),this.m_GameBulletData=e,null!=this.m_GameBulletData?(null!=this.node.children[0]&&(this.m_bulletParticle=this.node.children[0].getComponent(r)),null!=this.m_bulletParticle&&this.m_bulletParticle.play(),this.ParabolaMove(2),this.BulletDelayHide()):console.error("GameBulletData is null")},o.OnUpdate=function(e){t.prototype.OnUpdate.call(this,e)},o.ParabolaMove=function(t){var e=this;void 0===t&&(t=1);var a=this.node.getPosition();if(null==this.m_GameBulletData.Target)return console.log("GameBulletData.Target is null"),void c.Entity.HideEntity(this);this.m_targetPos=this.m_GameBulletData.Target.node.getPosition(),this.m_targetPos.add(s(0,1,0));var i=[],l=s(0,0,0);u.add(l,a,this.m_targetPos),u.divide(l,l,s(2,2,2)),l.add(s(0,t,0));for(var o=0;o<3;o++){var n=(o+1)/4,r=p.GetBezierPoint(n,a,l,this.m_targetPos);i.push(r)}var h=u.distance(this.node.position,this.m_targetPos)/this.m_GameBulletData.BulletSpeed;h*=.02,this.m_GameBulletData.TypeId==B.Arrow_Fire?m(this.node).to(4*h,{position:this.m_targetPos}).call((function(){e.ShowHitEffect(),e.CauseDamage(),c.Entity.HideEntity(e)})).start():m(this.node).to(h,{position:i[0]}).to(h,{position:i[1]}).to(h,{position:i[2]}).to(h,{position:this.m_targetPos}).call((function(){e.ShowHitEffect(),e.CauseDamage(),c.Entity.HideEntity(e)})).start()},o.lateUpdate=function(t){this.LookAtTarget()},o.LookAtTarget=function(){null!=this.m_GameBulletData.Target&&this.CachedNode.lookAt(this.m_targetPos,s(0,1,0))},o.CauseDamage=function(){null!=this.m_GameBulletData.Target&&0!=this.m_GameBulletData.Target.Available&&(this.m_GameBulletData.CompleteTask||(this.m_GameBulletData.CompleteTask=!0,f.ChangeCharacterAttribute(this.m_GameBulletData.Target,d.TruthHealth,-this.m_GameBulletData.Damage,this.m_GameBulletData.Owner)))},o.FollowTarget=function(){this.m_GameBulletData.Target},o.ShowHitEffect=function(){null!=this.m_GameBulletData.Target&&0!=this.m_GameBulletData.Target.Available&&(this.m_GameBulletData.CompleteTask||(this.TypeId==B.Arrow_Fire?c.Entity.ShowAttachhEffect(this.m_GameBulletData.Target,.3,_.HitEffect_Fire):c.Entity.ShowAttachhEffect(this.m_GameBulletData.Target,.3,_.HitEffect)))},o.BulletDelayHide=function(){var t=this;m(this.node).delay(this.m_GameBulletData.BulletLifeTime).call((function(){console.log("子弹自然销毁"+t.m_GameBulletData.BulletLifeTime),c.Entity.HideEntity(t)})).start()},o.OnHide=function(){t.prototype.OnHide.call(this),null!=this.m_bulletParticle&&this.m_bulletParticle.stop()},e}(h)).prototype,"m_GameBulletData",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameBulletData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,i,n,r,l,a,u,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.createClass},function(e){a=e.cclegacy,u=e._decorator},function(e){o=e.EntityData}],execute:function(){var m,s,c,f,p,_,g,h;a._RF.push({},"d59f3VdoZdBNJb+mNh/tagG","GameBulletData",void 0);var b=u.ccclass,y=u.property;e("GameBulletData",b("GameBulletData")((c=t((s=function(e){function t(t,i){var l;return l=e.call(this,t,i)||this,n(l,"m_Owner",c,r(l)),n(l,"m_Target",f,r(l)),n(l,"m_BulletSpeed",p,r(l)),n(l,"m_BulletLifeTime",_,r(l)),n(l,"m_Damage",g,r(l)),n(l,"m_HitSound",h,r(l)),l.m_completeTask=!1,l}return i(t,e),l(t,[{key:"BulletSpeed",get:function(){return this.m_BulletSpeed},set:function(e){this.m_BulletSpeed=e}},{key:"BulletLifeTime",get:function(){return this.m_BulletLifeTime},set:function(e){this.m_BulletLifeTime=e}},{key:"HitSound",get:function(){return this.m_HitSound},set:function(e){this.m_HitSound=e}},{key:"Owner",get:function(){return this.m_Owner},set:function(e){this.m_Owner=e}},{key:"Target",get:function(){return this.m_Target},set:function(e){this.m_Target=e}},{key:"Damage",get:function(){return this.m_Damage},set:function(e){this.m_Damage=e}},{key:"CompleteTask",get:function(){return this.m_completeTask},set:function(e){this.m_completeTask=e}}]),t}(o)).prototype,"m_Owner",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(s.prototype,"m_Target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=t(s.prototype,"m_BulletSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(s.prototype,"m_BulletLifeTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(s.prototype,"m_Damage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(s.prototype,"m_HitSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=s))||m);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./CharacterEnum.ts","./GameEntry.ts","./CharacterDeathEventArgs.ts","./HPBar.ts","./CommonUtility.ts","./HPBarData.ts","./AssetUtility.ts"],(function(a){var t,e,r,i,h,n,o,c,s,l,m,C,d,_,u,v,p,A,f,S,D,M,y,G;return{setters:[function(a){t=a.applyDecoratedDescriptor,e=a.inheritsLoose,r=a.initializerDefineProperty,i=a.assertThisInitialized,h=a.createClass},function(a){n=a.cclegacy,o=a._decorator,c=a.CharacterController,s=a.SkeletalAnimation,l=a.MeshRenderer,m=a.Color,C=a.v3,d=a.Vec3,_=a.Node},function(a){u=a.Entity},function(a){v=a.CharacterState,p=a.EntityGroup,A=a.CharacterAnim},function(a){f=a.GameEntry},function(a){S=a.CharacterDeathEventArgs},function(a){D=a.HPBar},function(a){M=a.CommonUtility},function(a){y=a.HPBarData},function(a){G=a.AssetUtility}],execute:function(){var g,k,P;n._RF.push({},"c0cf7UcZOZGToXhKeeq8skQ","GameCharacter",void 0);var z=o.ccclass,I=o.property;a("GameCharacter",z("GameCharacter")((P=t((k=function(a){function t(){for(var t,e=arguments.length,h=new Array(e),n=0;n<e;n++)h[n]=arguments[n];return t=a.call.apply(a,[this].concat(h))||this,r(t,"m_GameCharacterData",P,i(t)),t.m_CharacterController=void 0,t.m_CharacterSkeletalAnimation=void 0,t.m_CharacterState=v.Idle,t.m_CharacterSkinMesh=void 0,t.m_CharacterMaterial=void 0,t.m_HPBar=void 0,t.m_HPBarPoint=void 0,t.BeControl=!1,t.m_AttachEffect=[],t}e(t,a);var n=t.prototype;return n.OnShow=function(t){if(a.prototype.OnShow.call(this,t),this.m_GameCharacterData=t,null!=this.m_GameCharacterData){this.m_GameCharacterData.gameCharacter=this,this.m_CharacterController=this.CachedNode.getComponent(c),null!=this.m_CharacterController&&(this.m_CharacterController.enabled=!0,this.m_GameCharacterData.CharacterController=this.m_CharacterController),this.m_CharacterSkeletalAnimation=this.node.children[0].getComponent(s),null!=this.m_CharacterSkeletalAnimation&&(this.m_GameCharacterData.CharacterSkeletalAnimation=this.m_CharacterSkeletalAnimation,this.m_CharacterSkeletalAnimation.crossFade(this.m_GameCharacterData.IdleAnim));try{this.m_HPBarPoint=this.node.children[1]}catch(a){console.error("GameCharacter OnShow error:"+a)}this.CachedNode.setPosition(this.m_GameCharacterData.Position),this.CachedNode.setScale(this.m_GameCharacterData.BodyScale),this.m_CharacterState=v.Idle;var e=M.GeneratePermanentId(),r=new y(e,1003);r.character=this,f.Entity.ShowEntity(D,e,p.Item,G.GetItemAsset("HPBar"),r);try{this.m_CharacterSkinMesh=this.node.children[0].children[0].children[0].getComponent(l),null!=this.m_CharacterSkinMesh&&(this.m_CharacterMaterial=this.m_CharacterSkinMesh.getMaterialInstance(0),null!=this.m_CharacterMaterial&&this.m_CharacterMaterial.setProperty("emissive",new m(0,0,0,255)))}catch(a){}}else console.error("GameCharacterData is null")},n.CharacterMove=function(a){var t=C(0,0,0),e=this.m_GameCharacterData.MoveSpeed;d.multiply(t,a,C(.1,.1,.1));var r=C(0,0,0);d.multiply(r,t,C(e,e,e));var i=C(0,0,0);d.add(i,this.CachedNode.position,r),this.CachedNode.setPosition(i),this.ChangeCharacterAnim(A.Move)},n.CharacterTrun=function(a){var t=Math.atan2(a.x,a.z)/(Math.PI/180)+180,e=this.CachedNode.eulerAngles.y,r=t-e;r>180&&(r-=360),r<-180&&(r+=360);var i=e+r,h=.1*this.m_GameCharacterData.TrunSpeed;h=i-e>0?h:-h,Math.abs(i-e)<Math.abs(i-(e+h))||(this.CachedNode.eulerAngles=C(0,i,0))},n.CharacterMoveToTarget=function(a){if(!this.BeControl&&null!=a){var t=C(0,0,0);t=a instanceof _?a.position:a;var e=this.CachedNode.position.x-t.x,r=this.CachedNode.position.z-t.z,i=C(e,0,r);i.normalize();this.m_GameCharacterData.MoveSpeed;var h=C(-i.x*this.m_GameCharacterData.MoveSpeed,0,-i.z*this.m_GameCharacterData.MoveSpeed);this.m_CharacterController.move(h),this.ChangeCharacterAnim(A.Move),this.m_CharacterState=v.FollowTarget}},n.CharacterMoveToTargetBySpeed=function(a,t){if(null!=a){var e=C(0,0,0);e=a instanceof _?a.position:a;var r=this.CachedNode.position.x-e.x,i=this.CachedNode.position.z-e.z,h=C(r,0,i);h.normalize();var n=C(-h.x*t*.1,0,-h.z*t*.1);this.m_CharacterController.move(n),this.ChangeCharacterAnim(A.Move),this.m_CharacterState=v.FollowTarget}},n.CharacterTurnToTarget=function(a){if(null!=a){var t=C(0,0,0);t=a instanceof _?a.position:a;var e=this.CachedNode.position.x-t.x,r=this.CachedNode.position.z-t.z,i=C(e,0,r),h=Math.atan2(i.x,i.z)/(Math.PI/180)+180,n=this.CachedNode.eulerAngles.y,o=h-n;o>180?o-=360:o<-180&&(o+=360);var c=this.m_GameCharacterData.TrunSpeed;c=o>0?c:-1*c,Math.abs(o)<Math.abs(o-c)||(this.CachedNode.eulerAngles=C(0,n+c,0))}},n.CharacterLookAtTarget=function(a){if(null!=a){var t=C(0,0,0);t=a instanceof _?a.position:a;var e=this.CachedNode.position.x-t.x,r=this.CachedNode.position.z-t.z,i=C(e,0,r),h=Math.atan2(i.x,i.z)/(Math.PI/180)+180;this.CachedNode.eulerAngles=C(0,h,0)}},n.MoveUseCharacterController=function(a){a.normalize();var t=this.m_GameCharacterData.MoveSpeed;a.multiply3f(t,t,t),this.m_CharacterController.move(a),this.ChangeCharacterAnim(A.Move),this.m_CharacterState=v.Move},n.CharacterIdle=function(){this.m_CharacterState!=v.Attack&&this.ChangeCharacterAnim(A.Idle)},n.CharacterDeath=function(a){var t=this;void 0===a&&(a=null),this.m_CharacterState!=v.Death&&(this.ChangeCharacterAnim(A.Death),this.m_CharacterState=v.Death,this.Available=!1,this.m_CharacterController&&(this.m_CharacterController.enabled=!1),null!=this.m_CharacterMaterial&&this.scheduleOnce((function(){t.m_CharacterMaterial.setProperty("emissive",new m(150,150,150,255))}),.12),null!=a&&this.CharacterLookAtTarget(a.node),f.Event.Fire(S.Creat(this.m_GameCharacterData.Id,this,null)),f.Entity.HideEntity(this.m_HPBar),this.DelayHide(2))},n.ChangeCharacterAnim=function(a,t,e){var r=this;void 0===t&&(t=0),void 0===e&&(e=1),null!=this.m_CharacterSkeletalAnimation&&this.m_GameCharacterData.AnimState!=a&&this.m_CharacterState!=v.Death&&(this.m_GameCharacterData.AnimState=a,this.scheduleOnce((function(){switch(a){case A.Idle:r.m_CharacterSkeletalAnimation.getState(r.m_GameCharacterData.IdleAnim).speed=e,r.m_CharacterSkeletalAnimation.crossFade(r.m_GameCharacterData.IdleAnim);break;case A.Move:r.m_CharacterSkeletalAnimation.getState(r.m_GameCharacterData.MoveAnim).speed=e,r.m_CharacterSkeletalAnimation.crossFade(r.m_GameCharacterData.MoveAnim);break;case A.Attack:r.m_CharacterSkeletalAnimation.getState(r.m_GameCharacterData.AttackAnim).speed=e,r.m_CharacterSkeletalAnimation.crossFade(r.m_GameCharacterData.AttackAnim),r.scheduleOnce((function(){r.ChangeCharacterAnim(A.Idle),r.m_CharacterState=v.Idle}),.7);break;case A.Death:r.m_CharacterSkeletalAnimation.getState(r.m_GameCharacterData.DeathAnim).speed=e,r.m_CharacterSkeletalAnimation.crossFade(r.m_GameCharacterData.DeathAnim)}}),t))},n.CharacterBeAttack=function(){},n.ModelFlicker=function(){var a=this;null!=this.m_CharacterMaterial&&(this.m_CharacterMaterial.setProperty("emissive",new m(150,150,150,255)),this.scheduleOnce((function(){a.m_CharacterMaterial.setProperty("emissive",new m(0,0,0,255))}),.1))},n.OnHide=function(){this.m_AttachEffect.forEach((function(a){f.Entity.HideEntity(a)})),a.prototype.OnHide.call(this)},h(t,[{key:"gameCharacterData",get:function(){return this.m_GameCharacterData}},{key:"CharacterState",get:function(){return this.m_CharacterState}}]),t}(u)).prototype,"m_GameCharacterData",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=k))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameCharacterData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts","./CharacterEnum.ts"],(function(e){var t,i,n,r,a,o,m,l,u,c,h,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,m=e._decorator,l=e.v3},function(e){u=e.EntityData},function(e){c=e.CharacterType,h=e.CampType,s=e.CharacterAnim}],execute:function(){var _,p,f,y,b,C,g,A,d,k,S,v,w,M,z,T,H;o._RF.push({},"cd7afViCIJLnLHOg/sA4qr6","GameCharacterData",void 0);var P=m.ccclass,D=m.property;e("GameCharacterData",P("GameCharacterData")((f=t((p=function(e){function t(t,i){var a;return a=e.call(this,t,i)||this,n(a,"m_MaxHP",f,r(a)),n(a,"m_HP",y,r(a)),n(a,"m_MoveSpeed",b,r(a)),n(a,"m_TrunSpeed",C,r(a)),n(a,"m_BodyScale",g,r(a)),n(a,"m_IdleAnim",A,r(a)),n(a,"m_MoveAnim",d,r(a)),n(a,"m_AttackAnim",k,r(a)),n(a,"m_DeathAnim",S,r(a)),n(a,"m_Camp",v,r(a)),a.m_CharacterType=c.Unknown,n(a,"m_gameCharacter",w,r(a)),n(a,"m_CharacterController",M,r(a)),n(a,"m_CharacterSkeletalAnimation",z,r(a)),n(a,"m_AnimState",T,r(a)),n(a,"m_MoveToward",H,r(a)),a}return i(t,e),t.prototype.setHP=function(e,t){void 0===t&&(t=null),e<0&&(this.m_gameCharacter.CharacterBeAttack(),this.m_gameCharacter.ModelFlicker()),this.m_HP+=e,this.m_HP<=0&&(this.m_HP=0,this.m_gameCharacter.CharacterDeath(t))},a(t,[{key:"MaxHP",get:function(){return this.m_MaxHP},set:function(e){this.m_MaxHP=e,this.m_HP=e}},{key:"HP",get:function(){return this.m_HP}},{key:"MoveSpeed",get:function(){return this.m_MoveSpeed},set:function(e){this.m_MoveSpeed=.01*e}},{key:"TrunSpeed",get:function(){return this.m_TrunSpeed},set:function(e){this.m_TrunSpeed=e}},{key:"BodyScale",get:function(){return this.m_BodyScale},set:function(e){this.m_BodyScale=e}},{key:"IdleAnim",get:function(){return this.m_IdleAnim},set:function(e){this.m_IdleAnim=e}},{key:"MoveAnim",get:function(){return this.m_MoveAnim},set:function(e){this.m_MoveAnim=e}},{key:"AttackAnim",get:function(){return this.m_AttackAnim},set:function(e){this.m_AttackAnim=e}},{key:"DeathAnim",get:function(){return this.m_DeathAnim},set:function(e){this.m_DeathAnim=e}},{key:"CharacterType",get:function(){return this.m_CharacterType},set:function(e){this.m_CharacterType=e}},{key:"gameCharacter",get:function(){return this.m_gameCharacter},set:function(e){this.m_gameCharacter=e}},{key:"Camp",get:function(){return this.m_Camp},set:function(e){this.m_Camp=e}},{key:"CharacterController",get:function(){return this.m_CharacterController},set:function(e){this.m_CharacterController=e}},{key:"CharacterSkeletalAnimation",get:function(){return this.m_CharacterSkeletalAnimation},set:function(e){this.m_CharacterSkeletalAnimation=e}},{key:"AnimState",get:function(){return this.m_AnimState},set:function(e){this.m_AnimState=e}},{key:"MoveToward",get:function(){return this.m_MoveToward},set:function(e){this.m_MoveToward=e}}]),t}(u)).prototype,"m_MaxHP",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(p.prototype,"m_HP",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(p.prototype,"m_MoveSpeed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(p.prototype,"m_TrunSpeed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(p.prototype,"m_BodyScale",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(1,1,1)}}),A=t(p.prototype,"m_IdleAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(p.prototype,"m_MoveAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(p.prototype,"m_AttackAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(p.prototype,"m_DeathAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(p.prototype,"m_Camp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Unknown}}),w=t(p.prototype,"m_gameCharacter",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(p.prototype,"m_CharacterController",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(p.prototype,"m_CharacterSkeletalAnimation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(p.prototype,"m_AnimState",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.Idle}}),H=t(p.prototype,"m_MoveToward",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l(0,0,0)}}),_=p))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts"],(function(e){var n,o,t,r;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator},function(e){r=e.FrameworkComponent}],execute:function(){var c;o._RF.push({},"e3a874Lhx1LD4LaH6UhOHNW","GameComponent",void 0);var a=t.ccclass;t.property,e("GameComponent",a("GameComponent")(c=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityComponent.ts","./BaseComponent.ts","./EventComponent.ts","./SceneComponent.ts","./UIComponent.ts","./SoundComponent.ts","./ProcedureComponent.ts","./GameComponent.ts","./ControlComponent.ts","./DataTableComponent.ts","./ResourceComponent.ts","./EntityExtension.ts","./UIExtension.ts","./SoundExtension.ts"],(function(e){var t,n,o,r,i,a,u,c,l,p,s,m,y,f,d,b,_,k,C,g,v,E,x,h,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,l=e.Node,p=e.director,s=e.Component},function(e){m=e.EntityComponent},function(e){y=e.BaseComponent},function(e){f=e.EventComponent},function(e){d=e.SceneComponent},function(e){b=e.UIComponent},function(e){_=e.SoundComponent},function(e){k=e.ProcedureComponent},function(e){C=e.GameComponent},function(e){g=e.ControlComponent},function(e){v=e.DataTableComponent},function(e){E=e.ResourceComponent},function(e){x=e.EntityExtension},function(e){h=e.UIExtension},function(e){w=e.SoundExtension}],execute:function(){var S,G,P,T,z,D,I,R,U,B,O,j,A,F,N,L,M,V,H,J,K,q,Q,W,X,Y;e("applyMixins",ee),u._RF.push({},"227ecFDgSRCoKofD9VkVG1J","GameEntry",void 0);var Z=c.ccclass,$=c.property;e("GameEntry",(S=Z("GameEntry"),G=$(l),P=$(l),T=$(l),z=$(l),D=$(l),I=$(l),R=$(l),U=$(l),B=$(l),O=$(l),j=$(l),S(((Y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"m_Base",N,r(t)),o(t,"m_Entity",L,r(t)),o(t,"m_Event",M,r(t)),o(t,"m_Scene",V,r(t)),o(t,"m_UI",H,r(t)),o(t,"m_Sound",J,r(t)),o(t,"m_Procedure",K,r(t)),o(t,"m_Game",q,r(t)),o(t,"m_Control",Q,r(t)),o(t,"m_DataTable",W,r(t)),o(t,"m_Resource",X,r(t)),t}n(t,e);var u=t.prototype;return u.onLoad=function(){null===t.instance?(t.instance=this,p.addPersistRootNode(this.node)):this.destroy()},u.start=function(){this.executeTasksInOrder()},u.executeTasksInOrder=function(){var e=i(a().mark((function e(){var n,o,r,i,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,o=[{key:"m_Base",type:y,target:"Base"},{key:"m_Resource",type:E,target:"Resource"},{key:"m_Entity",type:m,target:"Entity"},{key:"m_Event",type:f,target:"Event"},{key:"m_UI",type:b,target:"UI"},{key:"m_Sound",type:_,target:"Sound"},{key:"m_Procedure",type:k,target:"Procedure"},{key:"m_DataTable",type:v,target:"DataTable"},{key:"m_Game",type:C,target:"Game"},{key:"m_Control",type:g,target:"Control"},{key:"m_Scene",type:d,target:"Scene"}];case 2:if(!(n<o.length)){e.next=31;break}if(r=o[n],e.prev=4,i=r.key,!((u=this[i])instanceof l)){e.next=22;break}if(!(c=u.getComponent(r.type))){e.next=19;break}if(!c||"function"!=typeof c.executeTask){e.next=16;break}return t[r.target]=c,e.next=14,c.executeTask();case 14:e.next=17;break;case 16:console.warn("Component of type "+r.type.name+" not found on node "+r.key+" or does not have executeTask method.");case 17:e.next=20;break;case 19:console.warn("Component of type "+r.type.name+" not found on node "+r.key);case 20:e.next=23;break;case 22:console.error("Property "+r.key+" is not a Node instance.");case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(4),console.error("Failed to execute task for "+r.key+":",e.t0);case 28:n++,e.next=2;break;case 31:t.mixApplied||(t.mixApplied=!0,ee(m,[x]),ee(b,[h]),ee(_,[w]));case 32:case"end":return e.stop()}}),e,this,[[4,25]])})));return function(){return e.apply(this,arguments)}}(),t}(s)).Base=void 0,Y.Entity=void 0,Y.Event=void 0,Y.Scene=void 0,Y.UI=void 0,Y.Sound=void 0,Y.Procedure=void 0,Y.Game=void 0,Y.Control=void 0,Y.DataTable=void 0,Y.Resource=void 0,Y.instance=null,Y.GameEntry=void 0,Y.mixApplied=!1,N=t((F=Y).prototype,"m_Base",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"m_Entity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(F.prototype,"m_Event",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(F.prototype,"m_Scene",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(F.prototype,"m_UI",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(F.prototype,"m_Sound",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"m_Procedure",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(F.prototype,"m_Game",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(F.prototype,"m_Control",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(F.prototype,"m_DataTable",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(F.prototype,"m_Resource",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=F))||A));function ee(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}))}))}u._RF.pop()}}}));

System.register("chunks:///_virtual/GameEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonUtility.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.CommonUtility}],execute:function(){n._RF.push({},"85f97lnUixPfqo3uXXEyPpp","GameEventArgs",void 0),t("GameEventArgs",function(){function t(){this.eventId=i.StringHashCode(this.constructor.EventName),this.data=void 0}return e(t,null,[{key:"EventId",get:function(){return i.StringHashCode(this.EventName)}}]),t}()).EventName="GameEventArgs",n._RF.pop()}}}));

System.register("chunks:///_virtual/GameHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./CommonUtility.ts","./CharacterEnum.ts","./BattleUtility.ts","./Building.ts","./GameCharacter.ts"],(function(t){var a,e,i,r,n,o,c,s,m,h,l,u,p,A,D;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,c=t._decorator,s=t.Vec3},function(t){m=t.GameEntry},function(t){h=t.CommonUtility},function(t){l=t.CharacterState,u=t.CharacterAnim},function(t){p=t.BattleUtility},function(t){A=t.Building},function(t){D=t.GameCharacter}],execute:function(){var _,G,d;o._RF.push({},"177c3uWvARIBae6UAQgFx7t","GameHero",void 0);var H=c.ccclass,f=c.property;t("GameHero",H("GameHero")((d=a((G=function(t){function a(){for(var a,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return a=t.call.apply(t,[this].concat(n))||this,i(a,"m_GameHeroData",d,r(a)),a.m_FSMSystem=void 0,a}e(a,t);var o=a.prototype;return o.OnShow=function(a){if(t.prototype.OnShow.call(this,a),this.m_GameHeroData=a,null!=this.m_GameHeroData){this.m_GameHeroData.CanAttack=!0,this.CachedNode.name=this.gameHeroData.HeroName+this.Id.toString(),this.InitFSM();for(var e=this.gameHeroData.WeaponId,i=0;i<e.length;i++){var r=e[i];m.Entity.ShowGameWeapon(h.GeneratePermanentId(),r,this)}}else console.error("GameHeroData is null")},o.OnUpdate=function(a){t.prototype.OnUpdate.call(this,a),this.Available&&(this.WeaponAttack(a),this.m_FSMSystem.Update(this,a))},o.WeaponAttack=function(t){if(this.CanAttackTarget())for(var a=0;a<this.m_GameHeroData.Weapons.length;a++){var e=this.m_GameHeroData.Weapons[a];e.WeaponUsable?e.OnWeaponTake(t,this.m_GameHeroData.AttackTarget):e.OnWeaponPut()}else this.PutWeapons()},o.PutWeapons=function(){this.m_GameHeroData.Weapons.forEach((function(t){t.OnWeaponPut()}))},o.ReceiveNormalAttackCommand=function(t){var a=p.GetClosestEnemy(this);null!=a&&a.Available&&a.CharacterState!=l.Death&&(s.distance(this.node.position,a.node.position)<=this.m_GameHeroData.AttackDistance&&(this.m_GameHeroData.AttackTarget=a,this.m_GameHeroData.CanAttack=!0))},o.ReceiveStopNormalAttackCommand=function(){this.m_GameHeroData.AttackTarget=null,this.m_CharacterState!=l.Attack&&(this.m_CharacterState=l.Idle)},o.CanAttackTarget=function(){if(null==this.m_GameHeroData.AttackTarget||!this.m_GameHeroData.AttackTarget.Available||this.m_GameHeroData.AttackTarget.CharacterState==l.Death||!this.m_GameHeroData.CanAttack||this.m_CharacterState==l.Death)return!1;var t=s.distance(this.node.position,this.m_GameHeroData.AttackTarget.node.position);this.m_GameHeroData.AttackTarget instanceof A&&(t-=this.m_GameHeroData.AttackTarget.buildingData.BuildingRange);return!(t>this.m_GameHeroData.AttackDistance)},o.AttackAction=function(){this.m_CharacterState!=l.Attack&&(this.m_CharacterState=l.Attack),this.m_GameHeroData.AnimState=u.Attack;var t=this.m_GameHeroData.AttackSpeed/100;this.m_CharacterSkeletalAnimation.getState(this.m_GameHeroData.AttackAnim).speed=t,this.m_CharacterSkeletalAnimation.crossFade(this.m_GameHeroData.AttackAnim)},o.FireBulletAction=function(){},o.SetAttackTarget=function(t){this.m_FSMSystem.GetCurrentState().SetTarget(t),this.m_GameHeroData.AttackTarget=t},o.CharacterDeath=function(a){void 0===a&&(a=null),t.prototype.CharacterDeath.call(this,a),this.m_GameHeroData.DropGold>0&&m.Entity.ShowDropGold(this.node.position,this.gameHeroData.DropGold)},o.CharacterIdle=function(){this.m_CharacterState!=l.Attack&&this.ChangeCharacterAnim(u.Idle)},o.CharacterDirectIdle=function(){this.m_CharacterState=l.Idle,this.ChangeCharacterAnim(u.Idle)},o.CharacterReadyAttack=function(){this.m_CharacterState!=l.Attack&&(this.m_CharacterState=l.Attack,this.ChangeCharacterAnim(u.Idle))},o.InitFSM=function(){this.m_FSMSystem=p.GetFSMSystem(this)},o.OnHide=function(){t.prototype.OnHide.call(this),this.m_GameHeroData.Weapons.forEach((function(t){m.Entity.HideEntity(t)}))},n(a,[{key:"gameHeroData",get:function(){return this.m_GameHeroData}}]),a}(D)).prototype,"m_GameHeroData",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=G))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameHeroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCharacterData.ts"],(function(t){var e,i,n,r,a,o,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,u=t._decorator},function(t){c=t.GameCharacterData}],execute:function(){var m,l,s,_,g,f,p,h,b,y,k,d,A,D,w,z,P,I,M,S,W;o._RF.push({},"6c4e5dsrrRABINMULdNSwUP","GameHeroData",void 0);var C=u.ccclass,F=u.property;t("GameHeroData",C("GameHeroData")((s=e((l=function(t){function e(e,i){var a;return a=t.call(this,e,i)||this,n(a,"m_HeroName",s,r(a)),n(a,"m_CharacterEntityId",_,r(a)),n(a,"m_ViewDistance",g,r(a)),n(a,"m_MaxMagicPoint",f,r(a)),n(a,"m_AttackDamage",p,r(a)),n(a,"m_AttackSpeed",h,r(a)),n(a,"m_AttackDistance",b,r(a)),n(a,"m_Armor",y,r(a)),n(a,"m_MagicResistance",k,r(a)),n(a,"m_Strength",d,r(a)),n(a,"m_Agile",A,r(a)),n(a,"m_Wisdom",D,r(a)),n(a,"m_FindEnemyDistance",w,r(a)),n(a,"m_PursuitDistance",z,r(a)),n(a,"m_PursuitTime",P,r(a)),n(a,"m_WeaponId",I,r(a)),n(a,"m_FunctionId",M,r(a)),n(a,"m_DropGold",S,r(a)),n(a,"m_AngerState",W,r(a)),a.m_CanAttack=!1,a.m_AttackTarget=void 0,a.m_Weapons=[],a}return i(e,t),a(e,[{key:"HeroName",get:function(){return this.m_HeroName},set:function(t){this.m_HeroName=t}},{key:"CharacterEntityId",get:function(){return this.m_CharacterEntityId},set:function(t){this.m_CharacterEntityId=t}},{key:"ViewDistance",get:function(){return this.m_ViewDistance},set:function(t){this.m_ViewDistance=t}},{key:"MaxMagicPoint",get:function(){return this.m_MaxMagicPoint},set:function(t){this.m_MaxMagicPoint=t}},{key:"AttackDamage",get:function(){return this.m_AttackDamage},set:function(t){this.m_AttackDamage=t}},{key:"AttackSpeed",get:function(){return this.m_AttackSpeed},set:function(t){this.m_AttackSpeed=t}},{key:"AttackDistance",get:function(){return this.m_AttackDistance},set:function(t){this.m_AttackDistance=t}},{key:"Armor",get:function(){return this.m_Armor},set:function(t){this.m_Armor=t}},{key:"MagicResistance",get:function(){return this.m_MagicResistance},set:function(t){this.m_MagicResistance=t}},{key:"Strength",get:function(){return this.m_Strength},set:function(t){this.m_Strength=t}},{key:"Agile",get:function(){return this.m_Agile},set:function(t){this.m_Agile=t}},{key:"Wisdom",get:function(){return this.m_Wisdom},set:function(t){this.m_Wisdom=t}},{key:"FindEnemyDistance",get:function(){return this.m_FindEnemyDistance},set:function(t){this.m_FindEnemyDistance=t}},{key:"PursuitDistance",get:function(){return this.m_PursuitDistance},set:function(t){this.m_PursuitDistance=t}},{key:"PursuitTime",get:function(){return this.m_PursuitTime},set:function(t){this.m_PursuitTime=t}},{key:"WeaponId",get:function(){return this.m_WeaponId},set:function(t){this.m_WeaponId=t}},{key:"FunctionId",get:function(){return this.m_FunctionId},set:function(t){this.m_FunctionId=t}},{key:"DropGold",get:function(){return this.m_DropGold},set:function(t){this.m_DropGold=t}},{key:"AngerState",get:function(){return this.m_AngerState},set:function(t){this.m_AngerState=t}},{key:"CanAttack",get:function(){return this.m_CanAttack},set:function(t){this.m_CanAttack=t}},{key:"AttackTarget",get:function(){return this.m_AttackTarget},set:function(t){this.m_AttackTarget=t}},{key:"Weapons",get:function(){return this.m_Weapons},set:function(t){this.m_Weapons=t}}]),e}(c)).prototype,"m_HeroName",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(l.prototype,"m_CharacterEntityId",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(l.prototype,"m_ViewDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=e(l.prototype,"m_MaxMagicPoint",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=e(l.prototype,"m_AttackDamage",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=e(l.prototype,"m_AttackSpeed",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(l.prototype,"m_AttackDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(l.prototype,"m_Armor",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(l.prototype,"m_MagicResistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(l.prototype,"m_Strength",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(l.prototype,"m_Agile",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(l.prototype,"m_Wisdom",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(l.prototype,"m_FindEnemyDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(l.prototype,"m_PursuitDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(l.prototype,"m_PursuitTime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(l.prototype,"m_WeaponId",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(l.prototype,"m_FunctionId",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(l.prototype,"m_DropGold",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(l.prototype,"m_AngerState",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=l))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameProcedure1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./ProcedureBase.ts","./ProcedureExtension.ts","./ThirdPersonCamera.ts","./AssetUtility.ts","./CharacterDeathEventArgs.ts","./ShowHeroEventArgs.ts","./ChoosePlaneData.ts","./CommonUtility.ts","./CharacterEnum.ts","./ChoosePlane.ts","./UIExtension.ts","./BattleUtility.ts","./ProcedureEnum.ts"],(function(e){var t,o,r,n,i,a,s,u,l,h,c,d,m,w,p,_,y,P,f,I,T,E,v,g,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,l=e.Node,h=e.Button,c=e.v3},function(e){d=e.GameEntry},function(e){m=e.ProcedureBase},function(e){w=e.ProcedureExtension},function(e){p=e.ThirdPersonCamera},function(e){_=e.AssetUtility},function(e){y=e.CharacterDeathEventArgs},function(e){P=e.ShowHeroEventArgs},function(e){f=e.ChoosePlaneData},function(e){I=e.CommonUtility},function(e){T=e.EntityGroup},function(e){E=e.ChoosePlane},function(e){v=e.UIFormId},function(e){g=e.BattleUtility},function(e){C=e.ChooseType}],execute:function(){var b,O,G,U,x,A,D,B,N,S,z,R,k,F,H;s._RF.push({},"391060hNiNOqKlFjd149MQy","GameProcedure1",void 0);var M=u.ccclass,L=u.property;e("GameProcedure1",(b=M("GameProcedure1"),O=L(l),G=L(h),U=L(l),x=L(l),A=L([l]),D=L([l]),b((S=t((N=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"m_ThirdPersonCamera",S,n(t)),t.m_procedureId=0,r(t,"m_testButton",z,n(t)),r(t,"m_ChoosePlane1",R,n(t)),r(t,"m_ChoosePlane2",k,n(t)),r(t,"m_BuildingPos",F,n(t)),r(t,"m_ArrowTowerNode",H,n(t)),t.m_arrowTowerPos=[],t.m_arrowTowerAng=[],t.choosePlaneid1=0,t.choosePlaneid2=0,t.choosePlaneEntity1=void 0,t.choosePlaneEntity2=void 0,t.m_arrowTowerId1=0,t.m_arrowTowerId2=0,t.m_arrowTower1=void 0,t.m_arrowTower2=void 0,t.m_NowRoundExistEnemy=void 0,t.m_baseId=0,t.m_PopupUIOpened=!1,t}o(t,e);var s=t.prototype;return s.Oninit=function(){d.Procedure.m_CurrentProcedure=this},s.OnEnter=function(){var e=this;if(this.m_ThirdPersonCamera)try{d.Control.m_ThirdPersonCamera=this.m_ThirdPersonCamera.getComponent(p)}catch(e){console.error("ThirdPersonCamera组件未找到，请检查场景配置。")}else console.error("ThirdPersonCamera为空，请检查场景配置。");this.GoldNum=0,this.m_gameOver=!1,d.UI.OpenUIFormByType(v.JoyStick,this),d.UI.OpenUIFormByType(v.MainUI,this),this.m_ArrowTowerNode.forEach((function(t){null!=t&&(e.m_arrowTowerPos.push(t.worldPosition),e.m_arrowTowerAng.push(c(t.eulerAngles.x,t.eulerAngles.y,t.eulerAngles.z)),t.destroy())})),this.m_NowRoundExistEnemy=new Map,d.Event.Subscribe(y.EventId,this.OnCharaterDeath,this),d.Event.Subscribe(P.EventId,this.OnShowHeroSuccess,this),this.NextProcedure()},s.NextProcedure=function(){if(this.m_gameOver)return console.log("游戏结束"),void(this.m_PopupUIOpened||(this.m_PopupUIOpened=!0,d.UI.OpenUIFormByType(v.PopupUI,"GameOver")));if(this.m_procedureId>=d.DataTable.GameProcadureTable.getDataCount()||this.m_gameOver)return console.log("游戏流程结束"),void(this.m_PopupUIOpened||(this.m_PopupUIOpened=!0,d.UI.OpenUIFormByType(v.PopupUI,"Win")));this.m_procedureId++;var e=d.DataTable.GameProcadureTable.getDataById(this.m_procedureId);console.log("开始游戏流程：",e.EventName+" 配置信息"+e.EventData),w.StartProcedure(e.EventId,e.EventData)},s.OnShowHeroSuccess=function(e){var t=e.detail;if(null!=t){var o=d.Entity.GetEntity(t.heroId);null!=o&&2==o.gameHeroData.Camp&&(console.log("创建敌方角色"),this.m_NowRoundExistEnemy.set(t.heroId,o))}else console.log("OnShowEntitySuccess事件detail为空")},s.OnCharaterDeath=function(e){var t=e.detail;if(null!=t){var o=t.deadChara;if(o.Id==d.Control.m_ControlCharacter.Id||o.Id==this.m_baseId)return console.log("游戏结束"),void this.OnGameOver();this.m_arrowTowerId1==o.Id&&(this.m_arrowTower1=null),this.m_arrowTowerId2==o.Id&&(this.m_arrowTower2=null),this.m_NowRoundExistEnemy.has(o.Id)&&this.m_NowRoundExistEnemy.delete(o.Id),0==this.m_NowRoundExistEnemy.size&&this.OnClearEnemy()}else console.log("OnCharaterDeath事件detail为空")},s.ShowChooseItem=function(){for(var e=d.DataTable.GameProcadureTable.getDataById(this.m_procedureId).EventData.split(":"),t=0;t<e.length;t++){var o=e[t].split(",");if(2==o.length){var r=parseInt(o[0]),n=parseInt(o[1]),i=new f(I.GeneratePermanentId(),r);i.chooseStr=g.GetChooseDescribe(r),i.chooseType=r,i.NeedGold=n,i.Position=c(-40*(t+1),0,40*t),d.Entity.ShowEntity(E,i.Id,T.Item,_.GetItemAsset("ChoosePlane"),i)}else console.warn("data format error")}},s.OnGameOver=function(){var e=this;this.m_gameOver=!0,this.scheduleOnce((function(){e.m_PopupUIOpened||(e.m_PopupUIOpened=!0,d.UI.OpenUIFormByType(v.PopupUI,"GameOver"))}),2)},s.StopChoose=function(){this.choosePlaneEntity1.Available=!1,this.choosePlaneEntity2.Available=!1},s.ChooseReady=function(e){switch(e){case C.ChooseTower:this.ChooseGetTower();break;case C.ChooseHero:this.ChooseGetSolider();break;case C.other:}d.Entity.HideEntity(this.choosePlaneid1),d.Entity.HideEntity(this.choosePlaneid2),this.NextProcedure()},s.ChooseGetTower=function(){var e=i(a().mark((function e(){var t,o,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("选择创造塔"),null!=this.m_arrowTower1){e.next=11;break}return this.m_arrowTowerId1=I.GeneratePermanentId(),t=this.m_arrowTowerPos[0],o=this.m_arrowTowerAng[0],e.next=7,d.Entity.ShowTower(this.m_arrowTowerId1,1004,t,c(o.x,o.y,o.z));case 7:e.sent&&(this.m_arrowTower1=d.Entity.GetEntity(this.m_arrowTowerId1)),e.next=12;break;case 11:this.m_arrowTower1.addArrowNum(100);case 12:if(null!=this.m_arrowTower2){e.next=22;break}return this.m_arrowTowerId2=I.GeneratePermanentId(),r=this.m_arrowTowerPos[1],n=this.m_arrowTowerAng[1],e.next=18,d.Entity.ShowTower(this.m_arrowTowerId2,1004,r,c(n.x,n.y,n.z));case 18:e.sent&&(this.m_arrowTower2=d.Entity.GetEntity(this.m_arrowTowerId2)),e.next=23;break;case 22:this.m_arrowTower2.addArrowNum(100);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.ChooseGetSolider=function(){console.log("选择创造兵");d.DataTable.GameProcadureTable.getDataById(this.m_procedureId);w.CreatRoundCharacter("1001,4",c(-20,0,148))},s.OnClearEnemy=function(){this.NextProcedure()},s.CreatWalls=function(){for(var e=0;e<this.m_BuildingPos.length;e++){var t=this.m_BuildingPos[e].position,o=this.m_BuildingPos[e].eulerAngles,r=I.GeneratePermanentId();d.Entity.ShowBuilding(r,1001,t,c(o.x,o.y,o.z))}this.m_BuildingPos.forEach((function(e){e.destroy()}))},s.OnLeave=function(){d.Event.UnSubscribe(y.EventId,this.OnCharaterDeath,this)},s.AddGold=function(e){this.GoldNum+=e},s.reduceGold=function(e){this.GoldNum-=e},t}(m)).prototype,"m_ThirdPersonCamera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(N.prototype,"m_testButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"m_ChoosePlane1",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(N.prototype,"m_ChoosePlane2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(N.prototype,"m_BuildingPos",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=t(N.prototype,"m_ArrowTowerNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=N))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameProcedure2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./ProcedureBase.ts","./ThirdPersonCamera.ts","./UIExtension.ts","./CharacterDeathEventArgs.ts","./CommonUtility.ts","./ShowEntitySuccessEventArgs.ts","./BuyPlaneData.ts","./GameCharacter.ts","./CharacterEnum.ts","./ProcedureEnum.ts"],(function(e){var t,n,r,a,o,i,l,s,m,h,c,u,y,_,d,P,w,f,b,p,g,E,S,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,l=e.Node,s=e.game,m=e.Quat,h=e.v3,c=e.Vec3,u=e.tween,y=e.BoxCollider},function(e){_=e.GameEntry},function(e){d=e.ProcedureBase},function(e){P=e.ThirdPersonCamera},function(e){w=e.UIFormId},function(e){f=e.CharacterDeathEventArgs},function(e){b=e.CommonUtility},function(e){p=e.ShowEntitySuccessEventArgs},function(e){g=e.BuyPlaneData},function(e){E=e.GameCharacter},function(e){S=e.CampType},function(e){v=e.SoundEnum,C=e.ItemEnum}],execute:function(){var I,T,G,O,W,B,z,D,N,U,A,x,R,L,k,F,H,M,j,V,q,J,Q,K,X,Y,Z,$,ee,te,ne,re,ae,oe,ie,le,se,me,he,ce,ue;o._RF.push({},"32154hxWuNBaaEs6xkh2fqg","GameProcedure2",void 0);var ye=i.ccclass,_e=i.property;e("GameProcedure2",(I=ye("GameProcedure2"),T=_e(l),G=_e(l),O=_e(l),W=_e(l),B=_e(l),z=_e(l),D=_e(l),N=_e(l),U=_e(l),A=_e(l),x=_e(l),R=_e(l),L=_e(l),k=_e(l),F=_e(l),H=_e(l),M=_e(l),j=_e(l),I((J=t((q=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"m_jumpWeb",J,a(t)),r(t,"m_ThirdPersonCamera",Q,a(t)),r(t,"m_player",K,a(t)),r(t,"m_base",X,a(t)),r(t,"m_Gate",Y,a(t)),r(t,"m_Barracks",Z,a(t)),r(t,"m_firstEnemyPos",$,a(t)),r(t,"m_enemyCreatPos",ee,a(t)),r(t,"m_chooseSoldierPlane1",te,a(t)),r(t,"m_chooseSoldierPlane2",ne,a(t)),r(t,"m_chooseTowerPlane1",re,a(t)),r(t,"m_chooseTowerPlane2",ae,a(t)),r(t,"m_chooseWallPlane",oe,a(t)),r(t,"m_arrowTower1",ie,a(t)),r(t,"m_arrowTower2",le,a(t)),r(t,"m_CreatSoldierNode",se,a(t)),r(t,"m_Wall1",me,a(t)),r(t,"m_Wall2",he,a(t)),r(t,"m_LeadCircle",ce,a(t)),r(t,"m_enemeyDecoy",ue,a(t)),t.m_playerId=0,t.m_baseId=0,t.m_buyPlane_s=void 0,t.m_buyPlane_t1=void 0,t.m_buyPlane_t2=void 0,t.m_buyPlane_w=void 0,t.m_GateEntity=void 0,t.m_leaderSoldier=!1,t.m_leaderTower1=!1,t.m_leaderTower2=!1,t.configUI=void 0,t.m_firstShowTip=!1,t.m_CreateEnemyWaves=0,t.m_NowWave=1,t.m_CreatEnemyFinsh=!1,t.m_ExistEnemy=[],t.m_popupUIOpened=!1,t.m_buyPlaneShowTime=new Map,t.enemyarr=[1002,1003,1005,1006],t.enemyNumber=5,t.MaxWave=3,t.waveNumber=0,t}n(t,e);var o=t.prototype;return o.Oninit=function(){_.Procedure.m_GameProcedure=this,_.Procedure.m_CurrentProcedure2=this,s.frameRate=59},o.OnEnter=function(){if(this.m_ThirdPersonCamera)try{_.Control.m_ThirdPersonCamera=this.m_ThirdPersonCamera.getComponent(P)}catch(e){console.error("ThirdPersonCamera组件未找到，请检查场景配置。")}else console.error("ThirdPersonCamera为空，请检查场景配置。");this.GoldNum=parseInt(_.DataTable.OtherTable.getDataById(6).configData),this.m_gameOver=!1,_.UI.OpenUIFormByType(w.JoyStick,this),_.UI.OpenUIFormByType(w.MainUI,this),_.Event.Subscribe(f.EventId,this.OnCharaterDeath,this),_.Event.Subscribe(p.EventId,this.OnShowHeroSuccess,this),null==this.m_player&&console.warn("player为空，请检查场景配置。"),this.m_playerId=b.GeneratePermanentId(),_.Entity.ShowPlayerHero(this.m_playerId,1e3,this.m_player.getPosition()),this.m_player.destroy(),this.m_baseId=b.GeneratePermanentId();var e=new m;e=this.m_base.getWorldRotation();var t=h(0,0,0);e.getEulerAngles(t),_.Entity.ShowBuilding(this.m_baseId,1e3,this.m_base.getWorldPosition(),t),this.m_base.destroy(),this.creatGate(),this.m_arrowTower1.active=!1,this.m_arrowTower2.active=!1,this.m_CreateEnemyWaves=_.DataTable.CreatEnemyTable.getDataCount(),this.SetShoosePlaneConfig(),_.Sound.PlaySoundByEnum(v.bgMusic)},o.OnShowHeroSuccess=function(e){var t=this,n=e;if(null!=n){if(n.entityId==this.m_playerId){var r=_.Entity.GetEntity(n.entityId);_.Control.m_ControlCharacter=r,this.m_player=r.node,null!=_.Control.m_ThirdPersonCamera&&(_.Control.m_ThirdPersonCamera.FollowEntity=r),_.Event.UnSubscribe(p.EventId,this.OnShowHeroSuccess,this),_.Event.Subscribe(p.EventId,this.OnShowEnemey,this),this.scheduleOnce((function(){t.CreatEnemyWave()}),2),_.Entity.ShowLeadCircle(this.m_LeadCircle.getPosition(),this.m_LeadCircle.eulerAngles,this.m_player),this.m_LeadCircle.destroy()}}else console.log("OnShowEntitySuccess事件detail为空")},o.OnShowEnemey=function(e){var t=e;null!=t&&(t.entity instanceof E&&t.entity.gameCharacterData.Camp==S.Enemy&&this.m_ExistEnemy.push(t.entityId))},o.OnCharaterDeath=function(e){var t=e;if(null!=t)return t.entityId==this.m_playerId||t.entityId==this.m_baseId?(this.m_gameOver=!0,void _.UI.OpenUIFormByType(w.PopupUI,"GameOver")):void(t.deadChara.gameCharacterData.Camp!=S.Enemy||(this.m_ExistEnemy.splice(this.m_ExistEnemy.indexOf(t.entityId),1),0!=this.m_ExistEnemy.length||!this.m_CreatEnemyFinsh||this.m_gameOver)||_.UI.OpenUIFormByType(w.PopupUI,"Win"));console.log("OnCharaterDeath事件detail为空")},o.SetShoosePlaneConfig=function(){var e=_.DataTable.OtherTable.getDataById(7).configData.split("/");4==e.length?(this.m_buyPlaneShowTime.set("arrowPlane1",parseInt(e[0])),this.m_buyPlaneShowTime.set("arrowPlane2",parseInt(e[1])),this.m_buyPlaneShowTime.set("SoldierPlane",parseInt(e[2])),this.m_buyPlaneShowTime.set("wallPlane",parseInt(e[3])),this.m_chooseSoldierPlane1.active=!1,this.m_chooseTowerPlane1.active=!1,this.m_chooseTowerPlane2.active=!1,this.m_chooseWallPlane.active=!1):console.error("DataTransfer error")},o.ShowChoosePlaneOne=function(e){switch(e){case"SoldierPlane":if(null!=this.m_chooseSoldierPlane1){var t=new g(b.GeneratePermanentId(),1008);t.Position=this.m_chooseSoldierPlane1.getPosition(),t.Rotation=this.m_chooseSoldierPlane1.eulerAngles,t.Scale=this.m_chooseSoldierPlane1.scale,t.Name="SoldierPlane",t.chooseStr="生产士兵",_.Entity.ShowBuyPlane(t,"ChoosePlaneSoldier"),this.m_chooseSoldierPlane1.destroy()}break;case"arrowPlane1":if(null!=this.m_chooseTowerPlane1){var n=new g(b.GeneratePermanentId(),1008);n.Position=this.m_chooseTowerPlane1.getPosition(),n.Rotation=this.m_chooseTowerPlane1.eulerAngles,n.Scale=this.m_chooseTowerPlane1.scale,n.Name="arrowPlane1",n.chooseStr="生产塔",_.Entity.ShowBuyPlane(n,"ChoosePlaneArrow"),this.m_chooseTowerPlane1.destroy()}break;case"arrowPlane2":if(null!=this.m_chooseTowerPlane2){var r=new g(b.GeneratePermanentId(),1008);r.Position=this.m_chooseTowerPlane2.getPosition(),r.Rotation=this.m_chooseTowerPlane2.eulerAngles,r.Scale=this.m_chooseTowerPlane2.scale,r.Name="arrowPlane2",r.chooseStr="生产塔",_.Entity.ShowBuyPlane(r,"ChoosePlaneArrow"),this.m_chooseTowerPlane2.destroy()}break;case"wallPlane":if(null==this.m_buyPlane_w){var a=new g(b.GeneratePermanentId(),1008);a.Position=this.m_chooseWallPlane.getPosition(),a.Rotation=this.m_chooseWallPlane.eulerAngles,a.Scale=this.m_chooseWallPlane.scale,a.Name="wallPlane",a.chooseStr="生产墙",_.Entity.ShowBuyPlane(a,"ChoosePlaneWall"),this.m_chooseWallPlane.destroy()}}},o.ShowChoosePlaneAll=function(){this.ShowChoosePlaneOne("SoldierPlane"),this.ShowChoosePlaneOne("arrowPlane1"),this.ShowChoosePlaneOne("arrowPlane2"),this.ShowChoosePlaneOne("wallPlane")},o.creatGate=function(){var e=this.m_Gate.getPosition(),t=this.m_Gate.eulerAngles;this.m_Gate.getScale();_.Entity.ShowBuilding(b.GeneratePermanentId(),1002,e,t),this.m_Gate.destroy()},o.creatFirstEnemy=function(){var e=this.m_firstEnemyPos.getPosition(),t=h(e.x+1,e.y,e.z-1),n=h(e.x-1,e.y,e.z+1);_.Entity.ShowHero(b.GeneratePermanentId(),1003,e),_.Entity.ShowHero(b.GeneratePermanentId(),1002,t),_.Entity.ShowHero(b.GeneratePermanentId(),1002,n)},o.creatEnemyGroup=function(){var e=this;if(!(this.m_gameOver||(this.waveNumber++,this.waveNumber>this.MaxWave))){for(var t=0;t<this.enemyNumber;t++){var n=this.m_enemyCreatPos.getPosition(),r=b.GetIntegerRandom(-2,2),a=b.GetIntegerRandom(-2,2);c.add(n,n,h(r,0,a));var o=b.GetIntegerRandom(0,this.enemyarr.length-1);_.Entity.ShowHero(b.GeneratePermanentId(),this.enemyarr[o],n)}this.enemyNumber+=5,console.log("准备下一波敌人"),this.scheduleOnce((function(){e.creatEnemyGroup()}),10),this.scheduleOnce((function(){console.log("开始倒计时"),_.UI.OpenUIFormByType(w.CountDownUI,4)}),7)}},o.creatEnemy=function(){var e=this;if(!this.m_gameOver){if(null!=this.configUI&&!this.configUI.automaticCreatEnemy)return console.log("自动生成敌人已关闭"),void this.scheduleOnce((function(){e.creatEnemy()}),this.configUI.creatEnemyTime);for(var t=0;t<this.enemyNumber;t++){var n=this.m_enemyCreatPos.getPosition(),r=b.GetIntegerRandom(-20,20),a=b.GetIntegerRandom(-20,20);c.add(n,n,h(r,0,a));var o=b.GetIntegerRandom(0,this.enemyarr.length-1);_.Entity.ShowHero(b.GeneratePermanentId(),this.enemyarr[o],n)}this.enemyNumber+=2;var i=12;null!=this.configUI&&(i=this.configUI.creatEnemyTime),this.scheduleOnce((function(){e.creatEnemy()}),i)}},o.CreatEnemyWave=function(){var e=this;if(!this.m_gameOver)if(this.m_NowWave>this.m_CreateEnemyWaves)this.m_CreatEnemyFinsh=!0;else{var t=_.DataTable.CreatEnemyTable.getDataById(this.m_NowWave);console.log("创建第"+this.m_NowWave+"波敌人,配置信息："+t.Data);for(var n=t.Data.split(":"),r=0;r<n.length;r++){var a=n[r].split(",");if(2!=a.length)return void console.error("enemy config error");for(var o=parseInt(a[0]),i=parseInt(a[1]),l=0;l<i;l++){var s=this.m_enemyCreatPos.getPosition(),m=b.GetIntegerRandom(-3,3),u=b.GetIntegerRandom(-3,3);c.add(s,s,h(m,0,u)),_.Entity.ShowHero(b.GeneratePermanentId(),o,s)}}this.m_buyPlaneShowTime.forEach((function(t,n){t==e.m_NowWave&&e.ShowChoosePlaneOne(n)})),this.m_NowWave++,this.scheduleOnce((function(){e.CreatEnemyWave()}),t.Time)}},o.CreatSoldier=function(e,t){void 0===t&&(t=4);for(var n=[],r=this.m_CreatSoldierNode.getPosition(),a=0;a<t;a++){var o=b.GetIntegerRandom(-3,3),i=b.GetIntegerRandom(-3,3);n.push(h(r.x+o,0,r.z+i))}for(var l=0;l<t;l++)_.Entity.ShowHero(b.GeneratePermanentId(),e,n[l])},o.CreatBarracks=function(){var e=this.m_Barracks.getPosition(),t=this.m_Barracks.eulerAngles,n=this.m_CreatSoldierNode.getPosition();_.Entity.ShowBarrack(b.GeneratePermanentId(),1003,n,e,t),_.Entity.ShowEffect(C.CreatBarracksEffect,3,h(e.x,0,e.z),t),this.m_Barracks.destroy()},o.creatTower2=function(){var e=this.m_arrowTower1.getPosition(),t=this.m_arrowTower1.eulerAngles;_.Entity.ShowTower(b.GeneratePermanentId(),1005,e,t),_.Entity.ShowEffect(C.CreatArrowTowerEffect,3,h(e.x,0,e.z),t)},o.creatTower1=function(){var e=this.m_arrowTower2.getPosition(),t=this.m_arrowTower2.eulerAngles;_.Entity.ShowTower(b.GeneratePermanentId(),1004,e,t),_.Entity.ShowEffect(C.CreatArrowTowerEffect,3,h(e.x,0,e.z),t)},o.creatWall=function(){var e=this;this.m_GateEntity.Visible=!0,u(this.m_Wall1).by(1,{position:h(0,3,0)}).call((function(){e.m_Wall1.getComponent(y).enabled=!0})).start(),u(this.m_Wall2).by(1,{position:h(0,3,0)}).call((function(){e.m_Wall2.getComponent(y).enabled=!0})).start(),u(this.m_Gate).by(1,{position:h(0,3.3,0)}).call((function(){e.m_GateEntity.Available=!0})).start();var t=this.m_Gate.getPosition();_.Entity.ShowEffect(C.CreatGateEffect,3,h(t.x,0,t.z),this.m_Gate.eulerAngles)},o.BuySuccess=function(e){},o.ShowTipLine=function(e){e==this.m_buyPlane_s&&(this.m_leaderSoldier||(this.m_leaderSoldier=!0,_.Entity.ShowLeadLine(this.m_player,e.CachedNode))),e==this.m_buyPlane_t1&&(this.m_leaderTower1||(this.m_leaderTower1=!0,_.Entity.ShowLeadLine(this.m_player,e.CachedNode))),e==this.m_buyPlane_t2&&(this.m_leaderTower2||(this.m_leaderTower2=!0,_.Entity.ShowLeadLine(this.m_player,e.CachedNode)))},t}(d)).prototype,"m_jumpWeb",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Q=t(q.prototype,"m_ThirdPersonCamera",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(q.prototype,"m_player",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(q.prototype,"m_base",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(q.prototype,"m_Gate",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(q.prototype,"m_Barracks",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(q.prototype,"m_firstEnemyPos",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(q.prototype,"m_enemyCreatPos",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(q.prototype,"m_chooseSoldierPlane1",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(q.prototype,"m_chooseSoldierPlane2",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(q.prototype,"m_chooseTowerPlane1",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(q.prototype,"m_chooseTowerPlane2",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(q.prototype,"m_chooseWallPlane",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(q.prototype,"m_arrowTower1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(q.prototype,"m_arrowTower2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(q.prototype,"m_CreatSoldierNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(q.prototype,"m_Wall1",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(q.prototype,"m_Wall2",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(q.prototype,"m_LeadCircle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(q.prototype,"m_enemeyDecoy",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=q))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./WeaponEnum.ts","./GameEntry.ts","./BattleUtility.ts","./CommonUtility.ts","./WeaponFireBulletEventArgs.ts","./ProcedureEnum.ts"],(function(e){var t,a,n,i,r,o,m,s,l,p,u,c,h,W,_,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,m=e._decorator,s=e.CapsuleCharacterController},function(e){l=e.Entity},function(e){p=e.WeaponState,u=e.BulletType},function(e){c=e.GameEntry},function(e){h=e.BattleUtility},function(e){W=e.CommonUtility},function(e){_=e.WeaponFireBulletEventArgs},function(e){y=e.SoundEnum}],execute:function(){var A,D,G;o._RF.push({},"d3759rXIIpCDbP7WQBqOODb","GameWeapon",void 0);var d=m.ccclass,g=m.property;e("GameWeapon",d("GameWeapon")((G=t((D=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"m_GameWeaponData",G,i(t)),t.m_WeaponState=void 0,t.m_AttackPrepareTime=void 0,t}a(t,e);var o=t.prototype;return o.OnShow=function(t){if(e.prototype.OnShow.call(this,t),this.m_GameWeaponData=t,null!=this.m_GameWeaponData)if(null!=this.m_GameWeaponData.Owner){c.Entity.AttachEntity(this,this.m_GameWeaponData.Owner),this.gameWeaponData.Owner.gameHeroData.Weapons.push(this),this.m_GameWeaponData.Owner.gameHeroData.CanAttack=!0,this.m_GameWeaponData.Camp=this.m_GameWeaponData.Owner.gameHeroData.Camp;try{var a=this.m_GameWeaponData.Owner.node.getComponent(s).height;this.node.setPosition(0,.8*a,0)}catch(e){console.error(e)}}else c.Entity.HideEntity(this);else console.error("GameWeaponData is null")},o.OnWeaponTake=function(e,t){void 0===t&&(t=null),this.m_WeaponState==p.Attacking&&this.m_GameWeaponData.Target==t?(this.m_AttackPrepareTime-=e,this.m_AttackPrepareTime<=0&&(this.FireBullet(),this.SleepWeapon(),this.m_GameWeaponData.Owner.FireBulletAction())):this.AwakeWeaponByTarget(t)},o.FireBullet=function(){c.Event.Fire(_.Creat(this.Id,this.m_GameWeaponData.Owner.Id,this.m_GameWeaponData.Target.Id)),c.Entity.ShowBullet(W.GeneratePermanentId(),this.gameWeaponData.BulletType,this.m_GameWeaponData.Owner,this);var e=0;switch(this.gameWeaponData.BulletType){case u.Bullet:c.Sound.PlaySoundByEnum(y.CloseAttack);break;case u.Arrow:c.Sound.PlaySoundByEnum(y.TowerFire);break;case u.Arrow_Fire:var t={1:y.FireArrow_1,2:y.FireArrow_2,3:y.FireArrow_3,4:y.FireArrow_4,5:y.FireArrow_5,6:y.FireArrow_6,7:y.FireArrow_7};e=W.GetIntegerRandom(1,7),c.Sound.PlaySoundByEnum(t[e]);break;case u.Arrow_s:(e=W.GetIntegerRandom(0,19))%2==0?c.Sound.PlaySoundByEnum(y.PlayerFire):c.Sound.PlaySoundByEnum(y.PlayerFire1)}},o.OnWeaponPut=function(){this.m_WeaponState==p.Attacking&&this.SleepWeapon()},o.AwakeWeapon=function(){if(null==this.m_GameWeaponData.Target||0==this.m_GameWeaponData.Target.Available)return this.m_WeaponState=p.Idle,void(this.m_GameWeaponData.Target=null);this.m_WeaponState=p.Attacking,this.m_AttackPrepareTime=h.CaculateAttackInterval(this.m_GameWeaponData.Owner,this),this.m_GameWeaponData.AttackInterval=this.m_AttackPrepareTime},o.AwakeWeaponByTarget=function(e){if(null==e||!e.Available)return this.m_WeaponState=p.Idle,void(this.m_GameWeaponData.Target=null);this.m_GameWeaponData.Target=e,this.m_GameWeaponData.Owner.AttackAction(),this.m_WeaponState=p.Attacking,this.m_AttackPrepareTime=h.CaculateAttackInterval(this.m_GameWeaponData.Owner,this),this.m_GameWeaponData.AttackInterval=this.m_AttackPrepareTime},o.SleepWeapon=function(){this.m_WeaponState=p.Locked,this.m_AttackPrepareTime=10},r(t,[{key:"WeaponUsable",get:function(){return!!this.Available}},{key:"gameWeaponData",get:function(){return this.m_GameWeaponData}}]),t}(l)).prototype,"m_GameWeaponData",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=D))||A);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameWeaponData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(t){var e,n,i,a,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,a=t._decorator},function(t){u=t.EntityData}],execute:function(){var o;i._RF.push({},"ae3a3k3nXZFpbXsB5Yka1eG","GameWeaponData",void 0);var r=a.ccclass;a.property,t("GameWeaponData",r("GameWeaponData")(o=function(t){function i(e,n){var i;return(i=t.call(this,e,n)||this).m_BulletType=void 0,i.m_AttackSound=void 0,i.m_HitSound=void 0,i.m_BulletLifeTime=void 0,i.m_BulletSpeed=void 0,i.m_BaseAttackInterval=void 0,i.m_Owner=void 0,i.m_Target=void 0,i.m_Damage=void 0,i.m_AttackInterval=void 0,i.m_Cmap=void 0,i}return e(i,t),n(i,[{key:"BulletType",get:function(){return this.m_BulletType},set:function(t){this.m_BulletType=t}},{key:"AttackSound",get:function(){return this.m_AttackSound},set:function(t){this.m_AttackSound=t}},{key:"HitSound",get:function(){return this.m_HitSound},set:function(t){this.m_HitSound=t}},{key:"BulletLifeTime",get:function(){return this.m_BulletLifeTime},set:function(t){this.m_BulletLifeTime=t}},{key:"BulletSpeed",get:function(){return this.m_BulletSpeed},set:function(t){this.m_BulletSpeed=t}},{key:"BaseAttackInterval",get:function(){return this.m_BaseAttackInterval},set:function(t){this.m_BaseAttackInterval=t}},{key:"AttackInterval",get:function(){return this.m_AttackInterval},set:function(t){this.m_AttackInterval=t}},{key:"Owner",get:function(){return this.m_Owner},set:function(t){this.m_Owner=t}},{key:"Damage",get:function(){return this.m_Damage},set:function(t){this.m_Damage=t}},{key:"Target",get:function(){return this.m_Target},set:function(t){this.m_Target=t}},{key:"Camp",get:function(){return this.m_Cmap},set:function(t){this.m_Cmap=t}}]),i}(u))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/GoldNumberChangeEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(e){var r,n,t,o;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator},function(e){o=e.GameEventArgs}],execute:function(){var u,a;n._RF.push({},"7f41f9qzzdM6Yzkfa8Bmvrl","GoldNumberChangeEventArgs",void 0);var s=t.ccclass;t.property,e("GoldNumberChangeEventArgs",s("GoldNumberChangeEventArgs")(((a=function(e){function n(){for(var r,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(r=e.call.apply(e,[this].concat(t))||this).goldNum=void 0,r}return r(n,e),n.Create=function(e){var r=new n;return r.goldNum=e,r},n}(o)).EventName="GoldNumberChangeEventArgs",u=a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/HPBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./CharacterEnum.ts"],(function(a){var t,r,e,o,i,n,s,h,c,m;return{setters:[function(a){t=a.inheritsLoose},function(a){r=a.cclegacy,e=a._decorator,o=a.ProgressBar,i=a.Color,n=a.v3,s=a.Vec3},function(a){h=a.Entity},function(a){c=a.GameEntry},function(a){m=a.CampType}],execute:function(){var l;r._RF.push({},"2a7edSYO2FPc5eK5VcPE9DA","HPBar",void 0);var u=e.ccclass;e.property,a("HPBar",u("HPBar")(l=function(a){function r(){for(var t,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(t=a.call.apply(a,[this].concat(e))||this).m_HPBarData=void 0,t.m_HPBar=null,t.m_Character=null,t.m_point=null,t.m_UITracker=void 0,t.RedHEX="#C30303",t.BlueHEX="#24C303",t.m_lookCamera=void 0,t}t(r,a);var e=r.prototype;return e.OnShow=function(t){if(a.prototype.OnShow.call(this,t),this.m_HPBarData=t,null!=this.m_HPBarData){if(this.m_HPBar=this.CachedNode.children[0].getComponent(o),this.m_Character=this.m_HPBarData.character,null==this.m_Character)return console.warn("HPBarData.character is null"),void c.Entity.HideEntity(this);switch(this.m_Character.m_HPBar=this,this.m_point=this.m_Character.m_HPBarPoint,this.m_Character.gameCharacterData.Camp){case m.Player:this.m_HPBar.barSprite.color=(new i).fromHEX(this.BlueHEX);break;case m.Enemy:this.m_HPBar.barSprite.color=(new i).fromHEX(this.RedHEX)}this.CachedNode.setParent(this.m_point),this.CachedNode.setPosition(n(0,0,0)),this.m_lookCamera=c.Control.m_ThirdPersonCamera.node}else console.error("HPBarData is null")},e.OnUpdate=function(a){null!=this.m_Character&&this.m_HPBar&&this.m_Character.gameCharacterData&&(this.m_HPBar.progress=this.m_Character.gameCharacterData.HP/this.m_Character.gameCharacterData.MaxHP)},e.LookAtCamera=function(){var a=this.NodeToCameraXYPlane();this.CachedNode.lookAt(a,n(0,1,0))},e.lateUpdate=function(a){this.LookAtCamera()},e.LookAtCameraPlane=function(){var a=n(0,0,0);s.transformQuat(a,s.UNIT_Z,this.m_lookCamera.worldRotation),a.normalize()},e.NodeToCameraXYPlane=function(){new s;var a=this.m_lookCamera.right,t=this.m_lookCamera.up,r=(this.m_lookCamera.forward,this.CachedNode.worldPosition.clone().subtract(this.m_lookCamera.worldPosition)),e=r.dot(a),o=r.dot(t);return this.m_lookCamera.worldPosition.add(a.multiplyScalar(e)).add(t.multiplyScalar(o))},r}(h))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/HPBarData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(t){var a,r,n,c;return{setters:[function(t){a=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){c=t.EntityData}],execute:function(){var e;r._RF.push({},"5f3922lqrRGPLXA9L7Nhv9W","HPBarData",void 0);var i=n.ccclass;n.property,t("HPBarData",i("HPBarData")(e=function(t){function r(a,r){var n;return(n=t.call(this,a,r)||this).character=void 0,n}return a(r,t),r}(c))||e);r._RF.pop()}}}));

System.register("chunks:///_virtual/IdleState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleUtility.ts","./FSMState.ts"],(function(t){var e,r,i,a,n,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,i=t._decorator},function(t){a=t.BattleUtility},function(t){n=t.Transition,s=t.StateID,c=t.FSMState}],execute:function(){var o;r._RF.push({},"32af8HJwpdKv6z6b/2PD6uY","IdleState",void 0);var l=i.ccclass;i.property,t("IdleState",l("IdleState")(o=function(t){function r(e,r){var i;return(i=t.call(this,e,r)||this).m_target=void 0,i.m_stateID=s.Idle,i}e(r,t);var i=r.prototype;return i.Act=function(t){this.m_target=a.GetClosestEnemyBuilding(this.m_character),null==this.m_target?(this.m_target=a.GetClosestEnemy(this.m_character),null==this.m_target?this.m_character.CharacterDirectIdle():this.fsm.PreformTransition(n.FindCharacter)):this.fsm.PreformTransition(n.FindBuilding)},i.Reason=function(t){},r}(c))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/IEntityManager.ts",["cc","./GameEntry.ts","./CommonUtility.ts","./ShowEntityFailEventArgs.ts","./ShowEntitySuccessEventArgs.ts"],(function(t){var n,e,i,o,s,r,u,y,a,l;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.NodePool,o=t.Prefab,s=t.instantiate,r=t.Node},function(t){u=t.GameEntry},function(t){y=t.CommonUtility},function(t){a=t.ShowEntityFailEventArgs},function(t){l=t.ShowEntitySuccessEventArgs}],execute:function(){var E,c;n._RF.push({},"4bba02OPL5NtYKLeL1OLy1K","IEntityManager",void 0);var m=e.ccclass;e.property,t("IEntityManager",m("IEntityManager")(((c=function(){function t(t,n,e){var i=this;this.m_EntityComponentNode=void 0,this.m_EntityGroups=void 0,this.m_PoolSize=0,this.m_EntityGroupNodes=void 0,this.m_EntityByGroupMap=void 0,this.m_ActiveEntitys=void 0,this.m_EntityPools=void 0,this.m_PoolSize=n,this.m_EntityComponentNode=t,this.m_EntityGroups=e,this.m_EntityGroupNodes=new Map,this.m_EntityByGroupMap=new Map,this.m_EntityGroups.forEach((function(t){var n=new r;n.name=t,n.setParent(i.m_EntityComponentNode),i.m_EntityGroupNodes.set(t,n),i.m_EntityByGroupMap.set(t,new Map)})),this.m_ActiveEntitys=new Map,this.m_EntityPools=new Map}t.GetInstance=function(n,e,i){return null==this.ins&&(this.ins=new t(n,e,i)),this.ins};var n=t.prototype;return n._ShowEntity=function(t,n,e,r,E,c){var m=this;return this.m_ActiveEntitys.has(n)?(u.Event.Fire(a.Creat(n,E)),Promise.reject(new Error("EntityId is already exist"))):null==r||"string"!=typeof r?(u.Event.Fire(a.Creat(n,E)),Promise.reject(new Error("EntityAssetPath is null"))):this.m_EntityGroupNodes.has(e)?new Promise((function(d,h){var p=null;if(m.m_EntityPools.has(r)){var _=m.m_EntityPools.get(r);if(_.size()>0){p=_.get();var v=y.GetOrAddComponent(p,t);return p.setParent(m.m_EntityGroupNodes.get(e)),v.Oninit(n,r,e,!1),v.OnShow(E),m.m_ActiveEntitys.set(n,v),m.m_EntityByGroupMap.get(e).set(n,v),u.Event.Fire(l.Creat(n,v,E)),void d(!0)}}else m.m_EntityPools.set(r,new i);""!=c&&null!=c||(c=u.Resource.m_ResourceBundleName[0]),u.Resource.ResourceBundle.get(c).load(r,o,(function(i,o){if(i)return console.error(i),u.Event.Fire(a.Creat(n,E)),void d(!1);try{p=s(o)}catch(t){return console.error(t),u.Event.Fire(a.Creat(n,E)),void d(!1)}var c=y.GetOrAddComponent(p,t);p.setParent(m.m_EntityGroupNodes.get(e)),c.Oninit(n,r,e,!0),c.OnShow(E),m.m_ActiveEntitys.set(n,c),m.m_EntityByGroupMap.get(e).set(n,c),u.Event.Fire(l.Creat(n,c,E)),d(!0)}))})):(u.Event.Fire(a.Creat(n,E)),Promise.reject(new Error("EntityGroup is not exist")))},n._GetEntity=function(t){return this.m_ActiveEntitys.has(t)?this.m_ActiveEntitys.get(t):null},n._GetEntityByGroup=function(t){return this.m_EntityByGroupMap.has(t)?this.m_EntityByGroupMap.get(t):null},n._HideEntity=function(t){var n=null;if(null!=(n="number"==typeof t?this._GetEntity(t):t)){if(this.m_ActiveEntitys.delete(n.Id),null==n.node)return console.warn("entity node is null"),void n.destroy();if(this.m_EntityByGroupMap.has(n.EntityGroup))this.m_EntityByGroupMap.get(n.EntityGroup).delete(n.Id)||console.warn("entity is not exist in group");if(n.OnHide(),n.PutIntoPool){n.OnRecycle();var e=this.m_EntityPools.get(n.EntityAssetPath);null!=e&&e.size()<this.m_PoolSize?e.put(n.node):n.node.destroy()}else n.node.destroy()}else console.warn("entity is null")},n._AttachEntity=function(t,n,e,i){null!=t?null!=n?null!=n.node&&null!=t.node?null!=e&&""!=e||n.node.addChild(t.node):console.warn("Node is null"):console.warn("parentEntity is null"):console.warn("childEntity is null")},t}()).ins=null,E=c))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/ISoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts"],(function(e){var o,n,u,t,i,r,s;return{setters:[function(e){o=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,u=e._decorator,t=e.AudioClip,i=e.AudioSource,r=e.Node},function(e){s=e.GameEntry}],execute:function(){var a,l;n._RF.push({},"75db8LcnfVI2IwVlVpIp2up","ISoundManager",void 0);var d=u.ccclass;u.property,e("ISoundManager",d("ISoundManager")(((l=function(){function e(e){this.m_SoundComponent=void 0,this.m_AudioSources=new Map,this.m_AudioSourceId=1,this.m_AudioClips=new Map,this.m_SoundComponent=e,this.m_AudioSourceId=1}e.GetInstance=function(o){return null==this.ins&&(this.ins=new e(o)),this.ins};var n=e.prototype;return n._PlaySound=function(e,o,n,u){var i=this;if(""!=e&&null!=e){var r=this.GetIdleAudioSource();if(r.volume=o,r.loop=n,r.playOnAwake=!1,this.m_AudioClips.has(e))return r.clip=this.m_AudioClips.get(e),void r.play();""!=u&&null!=u||(u=s.Resource.m_ResourceBundleName[0]),s.Resource.ResourceBundle.get(u).load(e,t,(function(o,n){o?console.log(o):(i.m_AudioClips.set(e,n),r.clip=n,r.play())}))}else console.warn("soundPath is null")},n.GetIdleAudioSource=function(){for(var e,n=o(this.m_AudioSources.entries());!(e=n()).done;){var u=e.value,t=(u[0],u[1]);if(null!=t&&t.state==i.AudioState.INIT)return t}var s=this.m_AudioSourceId++,a=new r("audioSource"+s);a.setParent(this.m_SoundComponent.node);var l=a.addComponent(i);return this.m_AudioSources.set(s,l),l},e}()).ins=null,a=l))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/IUIManager.ts",["cc","./UIFormLogic.ts","./GameEntry.ts","./CommonUtility.ts"],(function(o){var t,e,s,n,r,i,m,a,I,U,h;return{setters:[function(o){t=o.cclegacy,e=o._decorator,s=o.NodePool,n=o.Prefab,r=o.instantiate,i=o.Node,m=o.UITransform,a=o.Widget},function(o){I=o.UIFormLogic},function(o){U=o.GameEntry},function(o){h=o.CommonUtility}],execute:function(){var l,u;t._RF.push({},"cb4e9jkx1xPtr5j6FhtAPDn","IUIManager",void 0);var _=e.ccclass;e.property,o("IUIManager",_("IUIManager")(((u=function(){function o(o,t,e,s,n,r){var I=this;this.m_UIComponent=void 0,this.m_Canvas=void 0,this.m_UIRoot=void 0,this.m_UICamera=void 0,this.m_UIPoolSize=void 0,this.m_UIGroups=void 0,this.m_UIGroupNodes=void 0,this.m_UIFormPools=void 0,this.m_UIForms=void 0,this.m_UIComponent=o,this.m_Canvas=t,this.m_UIRoot=e,this.m_UICamera=s,this.m_UIPoolSize=n,this.m_UIGroups=r,this.m_UIGroupNodes=new Map,this.m_UIFormPools=new Map,this.m_UIForms=new Map,this.m_UIGroups.forEach((function(o){var t=new i;t.name=o,t.setParent(I.m_UIRoot),I.m_UIGroupNodes.set(o,t),t.addComponent(m).setContentSize(I.m_Canvas.getComponent(m).contentSize);var e=t.addComponent(a);e.isAlignTop=!0,e.isAlignBottom=!0,e.isAlignLeft=!0,e.isAlignRight=!0}))}o.GetInstance=function(t,e,s,n,r,i){return null==this.ins&&(this.ins=new o(t,e,s,n,r,i)),this.ins};var t=o.prototype;return t._OpenUIForm=function(o,t,e,i,m){var a=this;return this.m_UIForms.has(o)?Promise.reject(new Error("UIForm is already exist")):null==e||"string"!=typeof e?Promise.reject(new Error("UIFormAssetPath is null")):this.m_UIGroupNodes.has(t)?new Promise((function(l,u){var _=null;if(a.m_UIFormPools.has(e)){var c=a.m_UIFormPools.get(e);if(c.size()>0){_=c.get();var d=h.GetOrAddComponent(_,I);return a.m_UIForms.set(o,d),d.OnInit(o,t,e),d.OnOpen(i),a.m_UIForms.set(o,d),void l(!0)}}else a.m_UIFormPools.set(e,new s);""!=m&&null!=m||(m=U.Resource.m_ResourceBundleName[0]),U.Resource.ResourceBundle.get(m).load(e,n,(function(s,n){if(s)return console.error(s),void l(!1);try{_=r(n)}catch(o){return console.error(o),void l(!1)}var m=_.getComponent(I);if(!m)return console.warn("UIFormLogic not available in UIForm"),_.destroy(),void l(!1);a.m_UIForms.set(o,m),_.setParent(a.m_UIGroupNodes.get(t)),m.OnInit(o,t,e),m.OnOpen(i),l(!0)}))})):Promise.reject(new Error("UIFormGroup is not exist"))},t._CloseUIForm=function(o){if(this.m_UIForms.has(o)){var t=this.m_UIForms.get(o);if(t.node.removeFromParent(),t.OnClose(),this.m_UIForms.delete(o),this.m_UIFormPools.has(t.UIAssetPath)){var e=this.m_UIFormPools.get(t.UIAssetPath);e.size()<this.m_UIPoolSize?e.put(t.node):t.node.destroy()}else this.m_UIFormPools.set(t.UIAssetPath,new s),this.m_UIFormPools.get(t.UIAssetPath).put(t.node)}else console.warn("UIForm is not exist")},o}()).ins=null,l=u))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/JoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./UGuiForm.ts"],(function(t){var i,o,n,c,e,s,r,a,h,y,m,_,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){e=t.cclegacy,s=t._decorator,r=t.Node,a=t.v3,h=t.v2,y=t.NodeEventType,m=t.UITransform},function(t){_=t.GameEntry},function(t){u=t.UGuiForm}],execute:function(){var k,l,S,T,p,J,d,f,O;e._RF.push({},"0ec49adlxxIrooQHakj/ioN","JoyStick",void 0);var v=s.ccclass,C=s.property;t("JoyStick",(k=v("JoyStick"),l=C(r),S=C(r),T=C(r),k((d=i((J=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,n(i,"m_JoyStickBack",d,c(i)),n(i,"m_JoyStickPoint",f,c(i)),n(i,"m_TipJoystick",O,c(i)),i.m_JoyUITransform=void 0,i.m_joyBackTrasnform=void 0,i.m_maxDistance=0,i.m_touchStartPos=a(0,0,0),i.m_dir=h(0,0),i}o(i,t);var e=i.prototype;return e.OnOpen=function(i){t.prototype.OnOpen.call(this,i),_.Control.SetJoySitck(this),this.node.on(y.TOUCH_START,this.OnJoyStickTouchStart,this),this.node.on(y.TOUCH_MOVE,this.OnJoyStickTouchMove,this),this.node.on(y.TOUCH_END,this.OnJoyStickTouchEnd,this),this.node.on(y.TOUCH_CANCEL,this.OnJoyStickTouchEnd,this),this.m_JoyUITransform=this.node.getComponent(m),this.m_joyBackTrasnform=this.m_JoyStickBack.getComponent(m),this.m_maxDistance=this.m_joyBackTrasnform.width/2,this.m_JoyStickBack.active=!1,this.m_JoyStickPoint.active=!1},e.OnUpdate=function(t){},e.OnJoyStickTouchStart=function(t,i,o){null!=this.m_TipJoystick&&(this.m_TipJoystick.destroy(),this.m_TipJoystick=null),this.m_JoyStickBack.active=!0,this.m_JoyStickPoint.active=!0;var n=t.getUILocation(),c=this.m_JoyUITransform.convertToNodeSpaceAR(a(n.x,n.y,0));this.m_JoyStickBack.setPosition(a(c.x,c.y,0)),this.m_JoyStickPoint.setPosition(a(0,0,0)),this.m_touchStartPos=c},e.OnJoyStickTouchMove=function(t,i,o){var n=t.getUILocation(),c=this.m_joyBackTrasnform.convertToNodeSpaceAR(a(n.x,n.y,0)),e=c.length();this.m_dir.x=c.x/e,this.m_dir.y=c.y/e,e>this.m_maxDistance&&(c.x=this.m_dir.x*this.m_maxDistance,c.y=this.m_dir.y*this.m_maxDistance),this.m_JoyStickPoint.setPosition(c)},e.OnJoyStickTouchEnd=function(t,i,o){this.m_JoyStickBack.active=!1,this.m_JoyStickPoint.active=!1,this.m_dir=h(0,0)},e.OnClose=function(){t.prototype.OnClose.call(this),this.node.off(y.TOUCH_START,this.OnJoyStickTouchStart,this),this.node.off(y.TOUCH_MOVE,this.OnJoyStickTouchMove,this),this.node.off(y.TOUCH_END,this.OnJoyStickTouchEnd,this),this.node.off(y.TOUCH_CANCEL,this.OnJoyStickTouchEnd,this)},i}(u)).prototype,"m_JoyStickBack",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(J.prototype,"m_JoyStickPoint",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(J.prototype,"m_TipJoystick",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=J))||p));e._RF.pop()}}}));

System.register("chunks:///_virtual/LeadCircle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./PlayerInteractiveBuyPlane.ts","./AssetUtility.ts"],(function(t){var e,i,r,n,a,o,l,s,c,d,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t._decorator,n=t.BoxCollider,a=t.Prefab,o=t.instantiate,l=t.tween,s=t.v3},function(t){c=t.Entity},function(t){d=t.GameEntry},function(t){u=t.PlayerInteractiveBuyPlane},function(t){h=t.AssetUtility}],execute:function(){var y;i._RF.push({},"91b20vaDM1FxKIEIMJPXvYB","LeadCircle",void 0);var v=r.ccclass;r.property,t("LeadCircle",v("LeadCircle")(y=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).m_LeadCircleData=void 0,e.m_leadArrow=void 0,e.m_circle=void 0,e}e(i,t);var r=i.prototype;return r.OnShow=function(e){var i=this;if(t.prototype.OnShow.call(this,e),this.m_LeadCircleData=e,null!=this.m_LeadCircleData){this.PutIntoPool=!1,this.node.getComponent(n).on("onTriggerEnter",this.onTriggerEnter,this),this.m_circle=this.node.children[1],d.Event.Subscribe(u.EventId,this.onPlayerInteractivePlane,this);var r=h.GetItemAsset("LeadArrow");d.Resource.DefaultBundle.load(r,a,(function(t,e){t?console.error(t):(i.m_leadArrow=e,i.CreatArrow())}))}else console.error("LeadCircleData is null")},r.onTriggerEnter=function(t){},r.OnUpdate=function(t){if(null!=this.m_LeadCircleData.Player){var e=this.m_LeadCircleData.Player.getWorldPosition();this.m_circle.setWorldPosition(e.x,.1,e.z)}},r.onPlayerInteractivePlane=function(t){t.m_name==this.Name&&this.DelayHide(0)},r.CreatArrow=function(){var t=this;this.schedule((function(){t.ArrowToCircle()}),.3,30),this.scheduleOnce((function(){t.DelayHide(0)}),11)},r.ArrowToCircle=function(){if(null!=this.m_leadArrow&&null!=this.m_LeadCircleData.Player){this.m_LeadCircleData.Player.getWorldPosition();var t=o(this.m_leadArrow);t.setParent(this.node),t.setWorldPosition(this.m_LeadCircleData.playerPos);var e=this.m_LeadCircleData.playerPos,i=this.node.worldPosition,r=i.x-e.x,n=i.z-e.z,a=Math.atan2(r,n)/(Math.PI/180)+180;t.setRotationFromEuler(0,a,0),l(t).to(2,{position:s(0,0,0)}).call((function(){t.destroy()})).start()}},r.OnHide=function(){t.prototype.OnHide.call(this),d.Event.UnSubscribe(u.EventId,this.onPlayerInteractivePlane,this)},i}(c))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/LeadCircleData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts","./ProcedureEnum.ts"],(function(t){var e,r,a,n,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t._decorator,n=t.v3},function(t){c=t.EntityData},function(t){i=t.ItemEnum}],execute:function(){var o;r._RF.push({},"c4872Hkp59FqI6KTpPQR0/W","LeadCircleData",void 0);var u=a.ccclass;a.property,t("LeadCircleData",u("LeadCircleData")(o=function(t){function r(e){var r;return(r=t.call(this,e,i.LeadCircle)||this).Player=null,r.playerPos=n(0,0,0),r.arrowInterval=.2,r}return e(r,t),r}(c))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderLine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./GameEntry.ts","./ShowEntitySuccessEventArgs.ts","./CommonUtility.ts","./EntityData.ts","./CharacterEnum.ts","./AssetUtility.ts","./BuyActionSuccess.ts"],(function(t){var e,i,n,r,a,s,o,c,u,l,h,m,d,y,w,_,p,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Vec3,c=t.v3,u=t.instantiate,l=t.tween},function(t){h=t.Entity},function(t){m=t.GameEntry},function(t){d=t.ShowEntitySuccessEventArgs},function(t){y=t.CommonUtility},function(t){w=t.EntityData},function(t){_=t.EntityGroup},function(t){p=t.AssetUtility},function(t){L=t.BuyActionSuccess}],execute:function(){var f,v,E,S;a._RF.push({},"ca17dBw+fdPXIrCqpzZNW3+","LeaderLine",void 0);var A=s.ccclass,D=s.property;t("LeaderLine",A("LeaderLine")((E=e((v=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"m_LeaderLineData",E,r(e)),n(e,"m_arrow",S,r(e)),e.m_Arrows=[],e.m_arrowId=void 0,e}i(e,t);var a=e.prototype;return a.OnShow=function(e){var i=this;if(t.prototype.OnShow.call(this,e),this.m_LeaderLineData=e,null!=this.m_LeaderLineData)if(null!=this.m_LeaderLineData.m_plane&&null!=this.m_LeaderLineData.m_player){this.Name=this.m_LeaderLineData.Name,this.m_arrowId=y.GeneratePermanentId();var n=new w(this.m_arrowId,1009);m.Entity.ShowEntity(h,this.m_arrowId,_.Item,p.GetItemAsset("LeadArrow"),n),m.Event.Subscribe(d.EventId,this.OnShowArrowSuccess,this),m.Event.Subscribe(L.EventId,this.onBuySuccess,this),this.schedule((function(){i.PutLeadArrwo()}),.1)}else console.error("LeaderLineData.m_plane or m_player is null");else console.error("LeaderLineData is null")},a.OnShowArrowSuccess=function(t){var e=t;null!=e&&e.entityId==this.m_arrowId&&(this.m_arrow=e.entity.node,this.m_Arrows.push(this.m_arrow),this.m_arrow.setParent(this.node),m.Event.UnSubscribe(d.EventId,this.OnShowArrowSuccess,this))},a.OnUpdate=function(e){t.prototype.OnUpdate.call(this,e),null!=this.m_arrow&&this.PutLeadArrwo()},a.PutLeadArrwo=function(){if(null!=this.m_arrow){for(var t=this.m_LeaderLineData.m_plane.getPosition(),e=this.m_LeaderLineData.m_player.getPosition(),i=o.distance(t,e),n=Math.floor(.04*i),r=(t.x-e.x)/n,a=(t.z-e.z)/n,s=c(e.x-t.x,0,e.z-t.z),h=Math.atan2(s.x,s.z)/(Math.PI/180)+180,m=1;m<n;m++){var d=void 0;m>=this.m_Arrows.length&&((d=u(this.m_arrow)).setParent(this.node),d.setPosition(e.x+r*m,.01,e.z+a*m),this.m_Arrows.push(d)),(d=this.m_Arrows[m]).active=!0,l(d).to(.1,{position:c(e.x+r*m,.01,e.z+a*m)}).start(),d.setRotationFromEuler(0,h,0)}for(var y=n;y<this.m_Arrows.length;y++)this.m_Arrows[y].active=!1}},a.onBuySuccess=function(t){null!=t&&t.buyPlane==this.m_LeaderLineData.m_plane.name&&(m.Event.UnSubscribe(L.EventId,this.onBuySuccess,this),m.Entity.HideEntity(this))},a.OnHide=function(){t.prototype.OnHide.call(this),this.PutIntoPool=!1,this.node.destroy()},e}(h)).prototype,"m_LeaderLineData",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(v.prototype,"m_arrow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderLineData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,a,i,r,n,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator},function(e){o=e.EntityData}],execute:function(){var c,u,p,s;n._RF.push({},"ad69fu+qN9D7bpSN5WZjiNT","LeaderLineData",void 0);var f=l.ccclass,y=l.property;e("LeaderLineData",f("LeaderLineData")((p=t((u=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,i(n,"m_player",p,r(n)),i(n,"m_plane",s,r(n)),n}return a(t,e),t}(o)).prototype,"m_player",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=t(u.prototype,"m_plane",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BaseComponent.ts","./FrameworkComponent.ts","./FrameworkEntry.ts","./GameEntry.ts","./ControlComponent.ts","./DataTableComponent.ts","./Entity.ts","./EntityComponent.ts","./EntityData.ts","./EntityLogic.ts","./IEntityManager.ts","./ShowEntityFailEventArgs.ts","./ShowEntitySuccessEventArgs.ts","./EventComponent.ts","./GameEventArgs.ts","./GameComponent.ts","./ProcedureBase.ts","./ProcedureChangeScene.ts","./ProcedureComponent.ts","./ProcedurePreload.ts","./ResourceComponent.ts","./SceneComponent.ts","./ISoundManager.ts","./SoundComponent.ts","./IUIManager.ts","./UGuiForm.ts","./UIComponent.ts","./UIFormLogic.ts","./AssetUtility.ts","./CommonUtility.ts","./ConfigReader.ts","./MotionTrail.ts","./ConfigInterface.ts","./CharacterEnum.ts","./ProcedureEnum.ts","./WeaponEnum.ts","./Barracks.ts","./BarracksData.ts","./Building.ts","./BuildingData.ts","./ThirdPersonCamera.ts","./ArrowTower.ts","./ArrowTowerData.ts","./GameCharacter.ts","./GameCharacterData.ts","./GameHero.ts","./GameHeroData.ts","./PlayerHero.ts","./PlayerHeroData.ts","./EntityExtension.ts","./AttachToEntityEffect.ts","./AttachToEntityEffectData.ts","./AttackSpeedUp.ts","./AttackSpeedUpData.ts","./BuyPlane.ts","./BuyPlaneData.ts","./ChoosePlane.ts","./ChoosePlaneData.ts","./DelayHideEffect.ts","./DelayHideEffectData.ts","./DropGold.ts","./DropGoldData.ts","./HPBar.ts","./HPBarData.ts","./LeadCircle.ts","./LeadCircleData.ts","./LeaderLine.ts","./LeaderLineData.ts","./GameBullet.ts","./GameBulletData.ts","./GameWeapon.ts","./GameWeaponData.ts","./PushBackAbility.ts","./PushBackAbilityData.ts","./PushBackBullet.ts","./PushBackBulletData.ts","./BuyActionSuccess.ts","./CharacterDeathEventArgs.ts","./GoldNumberChangeEventArgs.ts","./PlayerInteractiveBuyPlane.ts","./ShowHeroEventArgs.ts","./WeaponFireBulletEventArgs.ts","./AnimFSMState.ts","./AnimFSMSystem.ts","./FSMState.ts","./FSMSystem.ts","./AttackBuildingState.ts","./AttackCharacterState.ts","./IdleState.ts","./PlayerState.ts","./GameProcedure1.ts","./GameProcedure2.ts","./ProcedureExtension.ts","./SoundExtension.ts","./ConfigUI.ts","./CountDownUI.ts","./DrawerButton.ts","./JoyStick.ts","./MainUI.ts","./MoveTipUI.ts","./PopupUI.ts","./UIExtension.ts","./BattleUtility.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./UGuiForm.ts","./GoldNumberChangeEventArgs.ts","./ProcedureEnum.ts","./CommonUtility.ts","./UIExtension.ts"],(function(e){var t,i,l,o,n,r,a,u,m,s,c,d,p,_,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,a=e.Node,u=e.Label,m=e.Button,s=e.ProgressBar},function(e){c=e.GameEntry},function(e){d=e.UGuiForm},function(e){p=e.GoldNumberChangeEventArgs},function(e){_=e.SoundEnum},function(e){f=e.commonVocabulary},function(e){h=e.UIFormId}],execute:function(){var b,g,C,k,y,S,D,w,I,U,A,B,T,v,L,E,G;n._RF.push({},"cfa23tB9sZH94DBcOpStLYg","MainUI",void 0);var O=r.ccclass,z=r.property;e("MainUI",(b=O("MainUI"),g=z(a),C=z(u),k=z(m),y=z(m),S=z(s),b((I=t((w=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,l(t,"m_GoldLab",I,o(t)),l(t,"m_learnMore",U,o(t)),t.goldLabel=void 0,l(t,"m_LinkBtn",A,o(t)),l(t,"m_SkillBut",B,o(t)),l(t,"m_SkillCoolBar",T,o(t)),l(t,"m_buffTime",v,o(t)),l(t,"m_skillCoolTime",L,o(t)),l(t,"m_AddValue",E,o(t)),l(t,"m_AddDamageValue",G,o(t)),t.m_skillCoolDown=0,t}i(t,e);var n=t.prototype;return n.OnOpen=function(t){e.prototype.OnOpen.call(this,t),this.goldLabel=this.m_GoldLab.getComponent(u),this.goldLabel.string=c.Procedure.m_GameProcedure.GoldNum.toString(),c.Event.Subscribe(p.EventId,this.OnGoldNumChange,this);var i=c.DataTable.OtherTable.getDataById(4).configData.split("/");if(4==i.length){this.m_buffTime=parseInt(i[0]),this.m_skillCoolTime=parseInt(i[1]),this.m_AddValue=parseInt(i[2]),this.m_AddDamageValue=parseInt(i[3]),this.m_skillCoolDown=this.m_skillCoolTime;var l=c.UI.GetMultiLanguageString(f.了解更多);this.m_learnMore.string=l}else console.error("OtherTable 4 configData error")},n.OnUpdate=function(e){this.m_skillCoolDown>0?(this.m_skillCoolDown-=e,this.m_SkillCoolBar.progress=this.m_skillCoolDown/this.m_skillCoolTime):(this.m_skillCoolDown=this.m_skillCoolTime,this.UseSkillAuto())},n.OnClickLinkBut=function(){c.UI.OpenUIFormByType(h.PopupUI,"Pause"),c.Sound.PlaySoundByEnum(_.UISound1)},n.OnGoldNumChange=function(e){var t=e;if(null!=t){if(isNaN(t.goldNum))return;this.goldLabel.string=t.goldNum.toString()}},n.UseSkillAuto=function(){null!=c.Control.m_ControlCharacter&&c.Control.m_ControlCharacter.Available&&c.Entity.ShowAttackSpeedUpEffect(c.Control.m_ControlCharacter,this.m_buffTime,this.m_AddValue,this.m_AddDamageValue)},n.OnClickSkillBut=function(){this.m_skillCoolDown>0||(this.m_skillCoolDown=this.m_skillCoolTime,null!=c.Control.m_ControlCharacter&&c.Entity.ShowAttackSpeedUpEffect(c.Control.m_ControlCharacter,this.m_buffTime,this.m_AddValue,this.m_AddDamageValue))},t}(d)).prototype,"m_GoldLab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(w.prototype,"m_learnMore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(w.prototype,"m_LinkBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(w.prototype,"m_SkillBut",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(w.prototype,"m_SkillCoolBar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(w.prototype,"m_buffTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=t(w.prototype,"m_skillCoolTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),E=t(w.prototype,"m_AddValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=t(w.prototype,"m_AddDamageValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=w))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/MotionTrail.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,o,a,n,s,l,u,p,d,h,f,c,y,g,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){n=e.cclegacy,s=e._decorator,l=e.SpriteFrame,u=e.CCInteger,p=e.CurveRange,d=e.GradientRange,h=e.UITransform,f=e.director,c=e.Director,y=e.UIRenderer,g=e.v2,v=e.DynamicAtlasManager}],execute:function(){var m,D,_,b,R,C,x,w,F,O,S,z,M,W,k,P,T,X,Y;n._RF.push({},"b0f6fh4+j1LiokRO0rB1u7g","MotionTrail",void 0);var B=function(){this.x=0,this.y=0,this.dis=0,this.cos=0,this.sin=0},N=s.ccclass,V=s.property,j=s.executeInEditMode,E=s.menu,L=(e("default",(m=E("Comp/MotionTrail"),D=j(),_=V({visible:!1}),b=V({type:l,displayName:"SpriteFrame"}),R=V({displayName:"世界坐标",tooltip:"顶点坐标是世界坐标还是本地坐标"}),C=V({displayName:"偏移"}),x=V({type:u,displayName:"拖尾长度"}),w=V({type:p,displayName:"宽度变化",range:[0,1]}),F=V({type:p,displayName:"宽度变化",range:[0,1]}),O=V({type:d,displayName:"颜色变化"}),S=V({type:d,displayName:"颜色变化"}),N(z=m(z=D((t((M=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_spriteFrame",W,o(t)),i(t,"_isWorldXY",k,o(t)),i(t,"offset",P,o(t)),i(t,"_length",T,o(t)),t.trailData=[],i(t,"_sizeCurveRange",X,o(t)),i(t,"_colorCurveRange",Y,o(t)),t._useVertexOpacity=!0,t}r(t,e);var n=t.prototype;return n._render=function(e){e.commitComp(this,this.renderData,this._spriteFrame,this._assembler,null)},n._flushAssembler=function(){this._assembler=L,this._renderData||(this._renderData=this.requestRenderData(),this._renderData.material=this.getRenderMaterial(0),this.freshBuffer(),this.markForUpdateRenderData(),this._spriteFrame&&this._assembler.updateUVs(this),this._updateColor())},n.freshBuffer=function(){var e=4+2*(this.length-2);this._renderData.dataLength=e,this._renderData.resize(e,3*(e-2))},n.updateLength=function(){var e=this.length,t=e-this.trailData.length;if(t>0)for(var r=0;r<t;++r)this.trailData.push(new B);else t<0&&this.trailData.splice(e)},n.updateWidth=function(){for(var e=this.trailData,t=this.length,r=this.getComponent(h).width/2,i=0;i<t;++i)e[i].dis=this.sizeCurveRange.evaluate(i/(t-1),0)*r},n.resetPos=function(){var e=this.trailData,t=this.offset.x,r=this.offset.y;this.isWorldXY?(t+=this.node.worldPosition.x,r+=this.node.worldPosition.y):(t+=this.node.position.x,r+=this.node.position.y);for(var i=0,o=this.length;i<o;i++)e[i].x=t,e[i].y=r},n.onLoad=function(){this.length=this._length},n.onEnable=function(){e.prototype.onEnable.call(this),f.once(c.EVENT_BEFORE_DRAW,this.resetPos,this)},a(t,[{key:"color",get:function(){return this._color}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e}},{key:"isWorldXY",get:function(){return this._isWorldXY},set:function(e){this._isWorldXY=e}},{key:"length",get:function(){return this._length},set:function(e){this._length=Math.max(e,0),this.updateLength(),this.updateWidth(),this.resetPos(),this.freshBuffer()}},{key:"sizeCurveRange",get:function(){return this._sizeCurveRange},set:function(e){this._sizeCurveRange=e,this.updateWidth()}},{key:"colorCurveRange",get:function(){return this._colorCurveRange},set:function(e){this._colorCurveRange=e,this._updateColor()}}]),t}(y)).prototype,"color",[_],Object.getOwnPropertyDescriptor(M.prototype,"color"),M.prototype),W=t(M.prototype,"_spriteFrame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(M.prototype,"spriteFrame",[b],Object.getOwnPropertyDescriptor(M.prototype,"spriteFrame"),M.prototype),k=t(M.prototype,"_isWorldXY",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(M.prototype,"isWorldXY",[R],Object.getOwnPropertyDescriptor(M.prototype,"isWorldXY"),M.prototype),P=t(M.prototype,"offset",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g(0,0)}}),T=t(M.prototype,"_length",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),t(M.prototype,"length",[x],Object.getOwnPropertyDescriptor(M.prototype,"length"),M.prototype),X=t(M.prototype,"_sizeCurveRange",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),t(M.prototype,"sizeCurveRange",[F],Object.getOwnPropertyDescriptor(M.prototype,"sizeCurveRange"),M.prototype),Y=t(M.prototype,"_colorCurveRange",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),t(M.prototype,"colorCurveRange",[S],Object.getOwnPropertyDescriptor(M.prototype,"colorCurveRange"),M.prototype),z=M))||z)||z)||z)),{updateRenderData:function(e){var t=e.spriteFrame;v.instance.packToDynamicAtlas(e,t),this.updateUVs(e);var r=e.renderData;r&&t&&(r.vertDirty&&this.updateVertexData(e),r.updateRenderData(e,t))},updateWorldVerts:function(e){var t=e.renderData,r=t.chunk.vb,i=e.length;if(!(i<1)){var o=0,a=0,n=e.trailData;e.isWorldXY||(o=e.node.position.x,a=e.node.position.y);for(var s=0,l=0,u=0,p=null,d=null,h=0;h<i;++h){p=n[h];for(var f=h;f<i&&((d=n[f]).x==p.x&&d.y==p.y);++f);if((f-=1)==h)s=p.x-o,l=p.y-a,r[u]=s+p.dis*p.sin,r[u+1]=l-p.dis*p.cos,r[u+2]=0,r[u+=t.floatStride]=s-p.dis*p.sin,r[u+1]=l+p.dis*p.cos,r[u+2]=0,u+=t.floatStride;else for(s=(p=n[f]).x-o,l=p.y-a,r[u]=s+p.dis*p.sin,r[u+1]=l-p.dis*p.cos,r[u+2]=0,r[u+=t.floatStride]=s-p.dis*p.sin,r[u+1]=l+p.dis*p.cos,r[u+2]=0,u+=t.floatStride;h<f;++h)r[u]=r[u-2*t.floatStride],r[u+1]=r[u-2*t.floatStride+1],r[u+2]=0,r[u+=t.floatStride]=r[u-2*t.floatStride],r[u+1]=r[u-2*t.floatStride+1],r[u+2]=0,u+=t.floatStride}}},fillBuffers:function(e){if(null!=e.spriteFrame){var t=e.renderData.chunk;this.update(e),this.updateWorldVerts(e,t);for(var r=t.vertexOffset,i=t.meshBuffer,o=t.meshBuffer.iData,a=i.indexOffset,n=r,s=e.length-1,l=0;l<s;l++)o[a++]=n+0,o[a++]=n+1,o[a++]=n+2,o[a++]=n+1,o[a++]=n+3,o[a++]=n+2,n+=2;i.indexOffset+=6*s}},updateVertexData:function(e){e.renderData.vertDirty=!0},updateUVs:function(e){if(null!=e.spriteFrame){for(var t=e.renderData,r=t.chunk.vb,i=e.spriteFrame.uv,o=e.length-1,a=0==o?0:1/o,n=3,s=i[7]-i[1],l=0;l<o;l++)r[n]=i[0],r[n+1]=i[1]+s*l*a,r[n+=t.floatStride]=i[0],r[n+1]=i[3]+s*l*a,n+=t.floatStride;r[n]=i[0],r[n+1]=i[7],r[n+=t.floatStride]=i[0],r[n+1]=i[5],n+=t.floatStride}},updateColor:function(e){for(var t,r,i=e.renderData,o=i.chunk.vb,a=4+2*(e.length-2),n=e.length,s=-1,l=5,u=0;u<a;u++)u%2==0&&(r=e.colorCurveRange.mode===d.Mode.TwoGradients||e.colorCurveRange.mode===d.Mode.TwoColors?Math.random():0,t=e.colorCurveRange.evaluate(s/n,r),s++),o[l]=t.r/255,o[l+1]=t.g/255,o[l+2]=t.b/255,o[l+3]=t.a/255,l+=i.floatStride},update:function(e){if(0!==e.length){for(var t=e.trailData,r=e.length-1;r>0;--r){var i=t[r],o=t[r-1];i.x=o.x,i.y=o.y,i.sin=o.sin,i.cos=o.cos}var a=null;a=e.isWorldXY?e.node.worldPosition:e.node.position;var n=t[0];n.x=e.offset.x+a.x,n.y=e.offset.y+a.y;var s=t[1],l=Math.atan2(s.y-n.y,s.x-n.x);n.sin=Math.sin(l),n.cos=Math.cos(l)}},updateOpacity:function(e,t){for(var r,i,o=e.renderData,a=o.chunk.vb,n=4+2*(e.length-2),s=e.length,l=-1,u=5,p=0;p<n;p++)p%2==0&&(i=e.colorCurveRange.mode===d.Mode.TwoGradients||e.colorCurveRange.mode===d.Mode.TwoColors?Math.random():0,r=e.colorCurveRange.evaluate(l/s,i),l++),a[u+3]=r.a/255*t,u+=o.floatStride}});n._RF.pop()}}}));

System.register("chunks:///_virtual/MoveTipUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UGuiForm.ts"],(function(t){var o,n,e,i,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.NodeEventType},function(t){r=t.UGuiForm}],execute:function(){var c;n._RF.push({},"848c8a0yl1CdKH5vFlmjRCi","MoveTipUI",void 0);var u=e.ccclass;e.property,t("MoveTipUI",u("MoveTipUI")(c=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.OnOpen=function(t){this.node.on(i.TOUCH_START,this.OnTouchStart,this)},e.OnTouchStart=function(t,o,n){this.Close()},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHero.ts","./CharacterEnum.ts","./GameEntry.ts","./PlayerInteractiveBuyPlane.ts"],(function(e){var a,t,r,n,o,i,l,c,s,m,h,_,A,d,C,y;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,l=e._decorator,c=e.SkeletalAnimation,s=e.tween,m=e.v3,h=e.Node},function(e){_=e.GameHero},function(e){A=e.CharacterState,d=e.CharacterAnim},function(e){C=e.GameEntry},function(e){y=e.PlayerInteractiveBuyPlane}],execute:function(){var P,u,D;i._RF.push({},"2b1d4zjR9RDc67luk1CXReL","PlayerHero",void 0);var k=l.ccclass,v=l.property;e("PlayerHero",k("PlayerHero")((D=a((u=function(e){function a(){for(var a,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return a=e.call.apply(e,[this].concat(o))||this,r(a,"m_PlayerHeroData",D,n(a)),a.m_body=void 0,a.m_dragon=void 0,a.m_InControlMoving=!1,a.m_DragonAnimator=void 0,a.m_AttackState=!1,a.m_attackCircle=void 0,a}t(a,e);var i=a.prototype;return i.OnShow=function(a){if(e.prototype.OnShow.call(this,a),this.m_PlayerHeroData=a,null!=this.m_PlayerHeroData){this.m_PlayerHeroData.PlayerHero=this,this.m_CharacterController.on("onControllerTriggerEnter",this.onCharacterEnter,this),this.m_CharacterController.on("onControllerTriggerExit",this.onCharacterExit,this),this.m_DragonAnimator=this.node.children[2].getComponent(c),null!=this.m_DragonAnimator&&this.m_DragonAnimator.play("idle"),this.m_body=this.node.children[0],this.m_dragon=this.node.children[1],this.m_attackCircle=this.node.children[4];var t=this.m_PlayerHeroData.AttackDistance;this.m_attackCircle.setScale(t,t,t);var r=this.node.parent;this.m_attackCircle.setParent(r)}else console.error("PlayerHeroData is null")},i.OnUpdate=function(a){e.prototype.OnUpdate.call(this,a),this.m_attackCircle.setPosition(this.node.getPosition())},i.onCharacterEnter=function(e){switch(e.collider.node.name){case"SoldierPlane":C.Event.Fire(y.Creat("SoldierPlane",!0));break;case"arrowPlane1":C.Event.Fire(y.Creat("arrowPlane1",!0));break;case"arrowPlane2":C.Event.Fire(y.Creat("arrowPlane2",!0));break;case"wallPlane":C.Event.Fire(y.Creat("wallPlane",!0));break;case"LeadCircle":C.Event.Fire(y.Creat("LeadCircle",!0))}},i.onCharacterExit=function(e){switch(e.collider.node.name){case"SoldierPlane":C.Event.Fire(y.Creat("SoldierPlane",!1));break;case"arrowPlane1":C.Event.Fire(y.Creat("arrowPlane1",!1));break;case"arrowPlane2":C.Event.Fire(y.Creat("arrowPlane2",!1));break;case"wallPlane":C.Event.Fire(y.Creat("wallPlane",!1))}},i.MoveUseCharacterController=function(e){e.normalize();var a=this.m_PlayerHeroData.MoveSpeed;e.multiply3f(a,a,a),this.m_CharacterController.move(e),this.m_InControlMoving=!0,this.m_CharacterState==A.Attack?this.ChangeCharacterAnim(d.MoveAttack):(this.ChangeCharacterAnim(d.Move),this.m_CharacterState=A.Move)},i.CharacterIdle=function(){this.m_InControlMoving=!1,this.m_CharacterState!=A.Attack?this.ChangeCharacterAnim(d.Idle):this.m_PlayerHeroData.DragonAnimState!=d.Idle&&(this.m_DragonAnimator.crossFade(this.m_PlayerHeroData.IdleAnim),this.m_PlayerHeroData.AnimState=d.Idle)},i.AngleBack=function(){this.m_AttackState&&(this.m_AttackState=!1,s(this.m_body).to(.3,{eulerAngles:m(0,0,0)}).start())},i.AttackAction=function(){this.m_CharacterState!=A.Attack&&(this.m_CharacterState=A.Attack),this.m_InControlMoving?this.ChangeCharacterAnim(d.MoveAttack):this.ChangeCharacterAnim(d.Attack)},i.FireBulletAction=function(){e.prototype.FireBulletAction.call(this)},i.ChangeCharacterAnim=function(e,a){var t=this;if(null!=this.m_CharacterSkeletalAnimation&&this.m_PlayerHeroData.AnimState!=e&&this.m_CharacterState!=A.Death){var r=0;this.scheduleOnce((function(){switch(e){case d.Idle:t.m_CharacterSkeletalAnimation.crossFade(t.m_PlayerHeroData.IdleAnim),t.m_DragonAnimator.crossFade(t.m_PlayerHeroData.IdleAnim),t.m_PlayerHeroData.AnimState=e,t.m_PlayerHeroData.DragonAnimState=e;break;case d.Move:t.m_CharacterSkeletalAnimation.crossFade(t.m_PlayerHeroData.MoveAnim),t.m_DragonAnimator.crossFade(t.m_PlayerHeroData.MoveAnim),t.m_PlayerHeroData.AnimState=e,t.m_PlayerHeroData.DragonAnimState=e;break;case d.Attack:r=t.m_PlayerHeroData.AttackSpeed/100,t.m_CharacterSkeletalAnimation.getState(t.m_PlayerHeroData.AttackAnim).speed=r,t.m_CharacterSkeletalAnimation.crossFade(t.m_PlayerHeroData.AttackAnim),t.scheduleOnce((function(){t.m_CharacterState=A.Idle}),.7);break;case d.MoveAttack:r=t.m_PlayerHeroData.AttackSpeed/100,t.m_CharacterSkeletalAnimation.getState(t.m_PlayerHeroData.AttackAnim).speed=r,t.m_CharacterSkeletalAnimation.crossFade(t.m_PlayerHeroData.AttackAnim),t.m_PlayerHeroData.DragonAnimState!=d.Move&&(t.m_DragonAnimator.crossFade(t.m_PlayerHeroData.MoveAnim),t.m_PlayerHeroData.DragonAnimState=d.Move),t.scheduleOnce((function(){t.m_CharacterState=A.Idle}),.7);break;case d.Death:t.m_CharacterSkeletalAnimation.crossFade(t.m_PlayerHeroData.IdleAnim),t.m_DragonAnimator.crossFade(t.m_PlayerHeroData.IdleAnim),t.m_PlayerHeroData.AnimState=e,t.m_PlayerHeroData.DragonAnimState=e}}),a)}},i.CharacterTurnToTarget=function(e){if(null!=e){this.m_AttackState=!0;var a=m(0,0,0);a=e instanceof h?e.position:e;var t=this.CachedNode.position.x-a.x,r=this.CachedNode.position.z-a.z,n=m(t,0,r),o=Math.atan2(n.x,n.z)/(Math.PI/180)+180-(this.m_body.eulerAngles.y+this.node.eulerAngles.y);o>180?o-=360:o<-180&&(o+=360);var i=this.m_PlayerHeroData.TrunSpeed;i=o>0?i:-1*i,Math.abs(o)<Math.abs(o-i)||(this.m_body.eulerAngles=m(0,this.m_body.eulerAngles.y+i,0))}},i.CharacterBeAttack=function(){},o(a,[{key:"playerHeroData",get:function(){return this.m_PlayerHeroData}}]),a}(_)).prototype,"m_PlayerHeroData",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=u))||P);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerHeroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHeroData.ts"],(function(e){var t,r,a,n,o;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){a=e.cclegacy,n=e._decorator},function(e){o=e.GameHeroData}],execute:function(){var i;a._RF.push({},"c2b12gkYmlN6I2QDg4lcSbm","PlayerHeroData",void 0);var c=n.ccclass;n.property,e("PlayerHeroData",c("PlayerHeroData")(i=function(e){function a(t,r){var a;return(a=e.call(this,t,r)||this).m_PlayerHero=void 0,a.m_DragonAnimState=void 0,a}return t(a,e),r(a,[{key:"PlayerHero",get:function(){return this.m_PlayerHero},set:function(e){this.m_PlayerHero=e}},{key:"DragonAnimState",get:function(){return this.m_DragonAnimState},set:function(e){this.m_DragonAnimState=e}}]),a}(o))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInteractiveBuyPlane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(e){var t,n,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){a=e.GameEventArgs}],execute:function(){var c,i;n._RF.push({},"f436cKMgshAxIuiMKf6dIBy","PlayerInteractiveBuyPlane",void 0);var u=r.ccclass;r.property,e("PlayerInteractiveBuyPlane",u("PlayerInteractiveBuyPlane")(((i=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).m_name=void 0,t.m_active=void 0,t}return t(n,e),n.Creat=function(e,t){var r=new n;return r.m_name=e,r.m_active=t,r},n}(a)).EventName="PlayerInteractiveBuyPlane",c=i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSMState.ts","./GameEntry.ts","./CharacterEnum.ts","./BattleUtility.ts"],(function(t){var e,a,r,i,c,n,o,s,l;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,r=t._decorator,i=t.Vec3},function(t){c=t.StateID,n=t.FSMState},function(t){o=t.GameEntry},function(t){s=t.EntityGroup},function(t){l=t.BattleUtility}],execute:function(){var h;a._RF.push({},"bce0dFAIMZN7ouMruhbD4LA","PlayerState",void 0);var u=r.ccclass;r.property,t("PlayerState",u("PlayerState")(h=function(t){function a(e,a){var r;return(r=t.call(this,e,a)||this).m_stateID=c.PlayerState,r}e(a,t);var r=a.prototype;return r.Act=function(t){if(this.CollectGold(),this.m_character.gameHeroData.AttackTarget==this.m_target){if(null!=this.m_target&&this.m_target.Available)this.m_character.CharacterTurnToTarget(this.m_target.node);else if(this.m_target=l.GetClosestEnemyCanAttak(t),null==this.m_target){var e=this.m_character;e&&e.AngleBack()}}else this.m_character.SetAttackTarget(this.m_target)},r.Reason=function(t){if(null!=this.m_target){var e=this.m_character.CachedNode.position,a=this.m_target.node.position;i.distance(e,a)>this.m_character.gameHeroData.AttackDistance&&(this.m_target=null)}},r.CollectGold=function(){var t=this;o.Entity.GetEntityByGroup(s.Item).forEach((function(e,a){if(1004==e.TypeId){var r=e;if(null!=r&&null!=r.node&&r.Available)i.distance(r.node.position,t.m_character.CachedNode.position)<.8*t.m_character.gameHeroData.AttackDistance&&r.flytoHero(t.m_character)}}))},a}(n))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./UGuiForm.ts","./ProcedureEnum.ts","./CommonUtility.ts"],(function(e){var t,a,o,n,i,r,p,l,s,u,c,m,d,g,y,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,p=e.Label,l=e.Node,s=e.Widget,u=e.tween,c=e.sys},function(e){m=e.GameEntry},function(e){d=e.UGuiForm},function(e){g=e.SoundEnum},function(e){y=e.commonVocabulary,b=e.PlatformType,f=e.LanguageType}],execute:function(){var h,_,L,v,w,S,P,B,U,k,G;i._RF.push({},"37399KHP8FKl5WHp0SZieam","PopupUI",void 0);var I=r.ccclass,T=r.property;e("PopupUI",(h=I("PopupUI"),_=T(p),L=T(l),v=T(p),w=T(p),h((B=t((P=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,o(t,"m_TipLabel",B,n(t)),o(t,"m_window",U,n(t)),o(t,"m_returnLab",k,n(t)),o(t,"m_LearnMore",G,n(t)),t}a(t,e);var i=t.prototype;return i.OnOpen=function(t){e.prototype.OnOpen.call(this,t);var a=t;"GameOver"==a?(this.m_TipLabel.string="游戏结束",m.Sound.PlaySoundByEnum(g.GameFail)):"Win"==a?(this.m_TipLabel.string="胜利",m.Sound.PlaySoundByEnum(g.GameSuccess)):"Pause"==a&&(this.m_TipLabel.string="暂停");var o=m.UI.GetMultiLanguageString(y.返回);this.m_returnLab.string=o;var n=m.UI.GetMultiLanguageString(y.了解更多);this.m_LearnMore.string=n,this.m_window.active=!0;var i=this.m_window.getComponent(s);i.verticalCenter=1e3,u(i).to(.3,{verticalCenter:0},{easing:"sineInOut"}).call((function(){m.Base.PauseGame()})).start()},i.Close=function(){m.Sound.PlaySoundByEnum(g.UISound1),m.Base.ResumeGame(),e.prototype.Close.call(this)},i.OnClickLinkBut=function(){var e="";switch(m.Base.m_LanguageType){case f.俄文:e=m.Base.m_platform==b.ios?"https://apps.apple.com/app/id6446389130":"https://play.google.com/store/apps/details?id=com.global.pnckru";break;case f.韩文:e=m.Base.m_platform==b.ios?"https://apps.apple.com/app/id6470448279":"https://play.google.com/store/apps/details?id=com.global.pnckkr";break;case f.中文繁体:e=m.Base.m_platform==b.ios?"https://apps.apple.com/app/id6470185871":"https://play.google.com/store/apps/details?id=com.global.pncktw";break;default:e=m.Base.m_platform==b.ios?"https://apps.apple.com/app/id6446389130":"https://play.google.com/store/apps/details?id=com.global.pnck"}try{"undefined"!=typeof mraid?mraid.open(e):c.openURL(e)}catch(e){console.log(e)}m.Sound.PlaySoundByEnum(g.UISound1)},t}(d)).prototype,"m_TipLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(P.prototype,"m_window",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(P.prototype,"m_returnLab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(P.prototype,"m_LearnMore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=P))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEntry.ts","./GoldNumberChangeEventArgs.ts"],(function(e){var n,t,r,o,i,u,a,c,s,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){u=e.cclegacy,a=e._decorator,c=e.Component},function(e){s=e.GameEntry},function(e){l=e.GoldNumberChangeEventArgs}],execute:function(){var f,m,d,p;u._RF.push({},"a4ebeRID7pG8K9jjk/R+xTn","ProcedureBase",void 0);var h=a.ccclass,g=a.property;e("ProcedureBase",h("ProcedureBase")((d=n((m=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i))||this,r(n,"m_GoldNum",d,o(n)),r(n,"m_gameOver",p,o(n)),n}t(n,e);var u=n.prototype;return u.onLoad=function(){this.Oninit()},u.start=function(){this.OnEnter()},u.NextProcedure=function(){},u.Oninit=function(){},u.OnEnter=function(){},u.OnUpdate=function(){},u.OnLeave=function(){},u.OnDestroy=function(){},u.ChangeGoldNum=function(e){this.GoldNum+=e},i(n,[{key:"GoldNum",get:function(){return this.m_GoldNum},set:function(e){this.m_GoldNum=e,s.Event.Fire(l.Create(this.GoldNum))}}]),n}(c)).prototype,"m_GoldNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=n(m.prototype,"m_gameOver",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=m))||f);u._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureChangeScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProcedureBase.ts"],(function(e){var r,n,c,t;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){t=e.ProcedureBase}],execute:function(){var o;n._RF.push({},"5a295o/twxOj4d5MmNJCYWM","ProcedureChangeScene",void 0);var u=c.ccclass;c.property,e("ProcedureChangeScene",u("ProcedureChangeScene")(o=function(e){function n(){return e.apply(this,arguments)||this}return r(n,e),n.prototype.Oninit=function(){},n}(t))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts"],(function(e){var r,n,o,t;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){t=e.FrameworkComponent}],execute:function(){var c;n._RF.push({},"06af7obEsdHmJ2dxRMTbXen","ProcedureComponent",void 0);var u=o.ccclass;o.property,e("ProcedureComponent",u("ProcedureComponent")(c=function(e){function n(){for(var r,n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return(r=e.call.apply(e,[this].concat(o))||this).m_GameProcedure=null,r.m_CurrentProcedure=null,r.m_CurrentProcedure2=null,r}return r(n,e),n}(t))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureEnum.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"f2d33kaGdhBAr/C/mjFZClD","ProcedureEnum",void 0);e("ProcedureType",function(e){return e[e.CreatBuilding=0]="CreatBuilding",e[e.CreatorPlayerCharacter=1]="CreatorPlayerCharacter",e[e.CreatNormalCharacter=2]="CreatNormalCharacter",e[e.FightStage=3]="FightStage",e[e.ChooseStage=4]="ChooseStage",e}({})),e("ChooseType",function(e){return e[e.Undefined=0]="Undefined",e[e.ChooseHero=1]="ChooseHero",e[e.ChooseTower=2]="ChooseTower",e[e.other=3]="other",e}({})),e("ItemEnum",function(e){return e[e.Undefined=0]="Undefined",e[e.character=1e3]="character",e[e.hero=1001]="hero",e[e.ThirdPersonCamera=1002]="ThirdPersonCamera",e[e.hpBar=1003]="hpBar",e[e.gold=1004]="gold",e[e.speedUpEffect=1005]="speedUpEffect",e[e.HitEffect=1006]="HitEffect",e[e.GetGoldEffect=1007]="GetGoldEffect",e[e.ChoosePlane=1008]="ChoosePlane",e[e.LeadArrow=1009]="LeadArrow",e[e.TrailRed=1010]="TrailRed",e[e.CreatBuildingEffect=1011]="CreatBuildingEffect",e[e.LeadCircle=1012]="LeadCircle",e[e.BuildingDestroyEffect=1013]="BuildingDestroyEffect",e[e.CreatArrowTowerEffect=1014]="CreatArrowTowerEffect",e[e.CreatBarracksEffect=1015]="CreatBarracksEffect",e[e.CreatGateEffect=1016]="CreatGateEffect",e[e.HitEffect_Fire=1017]="HitEffect_Fire",e}({})),e("SoundEnum",function(e){return e[e.DropGold=1e3]="DropGold",e[e.GetGold=1001]="GetGold",e[e.PlayerFire=1002]="PlayerFire",e[e.TowerFire=1003]="TowerFire",e[e.CreatBuilding=1004]="CreatBuilding",e[e.CharacterDeath=1005]="CharacterDeath",e[e.GameSuccess=1006]="GameSuccess",e[e.GameFail=1007]="GameFail",e[e.ThrowGold=1008]="ThrowGold",e[e.CloseAttack=1009]="CloseAttack",e[e.UISound1=1010]="UISound1",e[e.FireArrow=1011]="FireArrow",e[e.bgMusic=1012]="bgMusic",e[e.PlayerFire1=1013]="PlayerFire1",e[e.FireArrow_1=1014]="FireArrow_1",e[e.FireArrow_2=1015]="FireArrow_2",e[e.FireArrow_3=1016]="FireArrow_3",e[e.FireArrow_4=1017]="FireArrow_4",e[e.FireArrow_5=1018]="FireArrow_5",e[e.FireArrow_6=1019]="FireArrow_6",e[e.FireArrow_7=1020]="FireArrow_7",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureExtension.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProcedureEnum.ts","./CommonUtility.ts","./GameEntry.ts","./ShowHeroEventArgs.ts"],(function(e){var r,t,n,o,a,c,u,s,i;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e._decorator,a=e.v3},function(e){c=e.ProcedureType},function(e){u=e.CommonUtility},function(e){s=e.GameEntry},function(e){i=e.ShowHeroEventArgs}],execute:function(){var l;n._RF.push({},"2f9e0TJH2tEbpAm5jbgawEx","ProcedureExtension",void 0);var d=o.ccclass;o.property,e("ProcedureExtension",d("ProcedureExtension")(l=function(){function e(){}return e.StartProcedure=function(){var e=r(t().mark((function e(r,n){var o,i,l,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n,e.t0=r,e.next=e.t0===c.CreatBuilding?4:e.t0===c.CreatorPlayerCharacter?12:e.t0===c.CreatNormalCharacter?19:e.t0===c.FightStage?22:e.t0===c.ChooseStage?24:27;break;case 4:return o=n,i=u.GeneratePermanentId(),e.next=8,s.Entity.ShowBuilding(i,parseInt(o));case 8:return l=e.sent,s.Procedure.m_CurrentProcedure.CreatWalls(),l&&(console.log("创建建筑成功,配置id"+o),s.Procedure.m_CurrentProcedure.m_baseId=i,s.Procedure.m_CurrentProcedure.NextProcedure()),e.abrupt("break",28);case 12:return o=n,d=u.GeneratePermanentId(),e.next=16,s.Entity.ShowPlayerHero(d,parseInt(o),a(40,0,20));case 16:return e.sent?(console.log("创建玩家角色成功,配置id"+o),null!=(p=s.Entity.GetEntity(d))?(s.Control.m_ControlCharacter=p,null!=s.Control.m_ThirdPersonCamera&&(s.Control.m_ThirdPersonCamera.FollowEntity=p),s.Procedure.m_CurrentProcedure.NextProcedure()):console.warn("获取玩家角色失败")):console.log("创建玩家角色失败"),e.abrupt("break",28);case 19:return this.CreatRoundCharacter(o,a(-169,0,-83)),s.Procedure.m_CurrentProcedure.NextProcedure(),e.abrupt("break",28);case 22:return console.log("开始战斗"),e.abrupt("break",28);case 24:return s.Procedure.m_CurrentProcedure.ShowChooseItem(),e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}(),e.CreatRoundCharacter=function(){var e=r(t().mark((function e(r,n){var o,c,l,d,p,h,f,P,m,C,b;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.split(":"),c=0;case 2:if(!(c<o.length)){e.next=25;break}if(2==(l=o[c].split(",")).length){e.next=7;break}return console.warn("数据格式错误"),e.abrupt("continue",22);case 7:for(d=parseInt(l[0]),p=parseInt(l[1]),h=Math.ceil(Math.sqrt(p)),f=[],P=0;P<h;P++)for(m=0;m<h;m++)f.push(a(n.x+20*P,0,n.z+20*m));C=0;case 13:if(!(C<p)){e.next=22;break}return b=u.GeneratePermanentId(),e.next=17,s.Entity.ShowHero(b,d,f[C]);case 17:e.sent?(console.log("创建角色成功,配置id："+d),s.Event.Fire(i.Creat(b))):console.warn("创建角色失败,配置id："+d);case 19:C++,e.next=13;break;case 22:c++,e.next=2;break;case 25:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),e.CreatGroupCharacter=function(e,r){console.log("创建一组角色");for(var t=e.split(":"),n=0;n<t.length;n++){var o=t[n].split(",");if(2==o.length){parseInt(o[0]);for(var c=parseInt(o[1]),i=Math.ceil(Math.sqrt(c)),l=[],d=0;d<i;d++)for(var p=0;p<i;p++)l.push(a(r.x+20*d,0,r.z+20*p));s.Entity.ShowHero(u.GeneratePermanentId(),1002,l[0])}else console.warn("数据格式错误")}},e}())||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedurePreload.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProcedureBase.ts"],(function(e){var r,o,t,c;return{setters:[function(e){r=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator},function(e){c=e.ProcedureBase}],execute:function(){var n;o._RF.push({},"ae411qyoIJGb6axFfOkr80q","ProcedurePreload",void 0);var u=t.ccclass;t.property,e("ProcedurePreload",u("ProcedurePreload")(n=function(e){function o(){return e.apply(this,arguments)||this}return r(o,e),o.prototype.Oninit=function(){},o}(c))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/PushBackAbility.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(a){var t,i,s,h,c,e,l,r,u;return{setters:[function(a){t=a.applyDecoratedDescriptor,i=a.inheritsLoose,s=a.initializerDefineProperty,h=a.assertThisInitialized},function(a){c=a.cclegacy,e=a._decorator,l=a.v3,r=a.Vec3},function(a){u=a.Entity}],execute:function(){var p,n,o;c._RF.push({},"d8ab11Zbc1Hq6sfHh2Ny8SX","PushBackAbility",void 0);var y=e.ccclass,B=e.property;a("PushBackAbility",y("PushBackAbility")((o=t((n=function(a){function t(){for(var t,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return t=a.call.apply(a,[this].concat(c))||this,s(t,"m_pushBackAbilityData",o,h(t)),t}i(t,a);var c=t.prototype;return c.OnShow=function(t){if(a.prototype.OnShow.call(this,t),this.m_pushBackAbilityData=t,null!=this.m_pushBackAbilityData){this.Name="pushBackAbility",null!=this.m_pushBackAbilityData.pushBackCharacter&&(this.m_pushBackAbilityData.pushBackCharacter.BeControl=!0);var i=l(0,0,0);r.subtract(i,this.m_pushBackAbilityData.pushBackCharacter.node.position,this.m_pushBackAbilityData.abilityOwner.node.position),i.normalize(),i.multiplyScalar(10),this.m_pushBackAbilityData.m_pushToPos=i.add(this.m_pushBackAbilityData.pushBackCharacter.node.position)}else console.error("PushBackAbilityData is null")},c.OnUpdate=function(a){this.Available&&null!=this.m_pushBackAbilityData.pushBackCharacter&&0!=this.m_pushBackAbilityData.pushBackCharacter.Available&&(this.m_pushBackAbilityData.pushBackTime>0?(this.m_pushBackAbilityData.pushBackTime-=a,this.pushBackCharacter()):(this.Available=!1,this.DelayHide(0)))},c.pushBackCharacter=function(){null!=this.m_pushBackAbilityData.pushBackCharacter&&0!=this.m_pushBackAbilityData.pushBackCharacter.Available?this.m_pushBackAbilityData.pushBackCharacter.CharacterMoveToTargetBySpeed(this.m_pushBackAbilityData.m_pushToPos,this.m_pushBackAbilityData.pushBackSpeed):this.DelayHide(0)},c.DelayHide=function(t){null!=this.m_pushBackAbilityData.pushBackCharacter&&(this.m_pushBackAbilityData.pushBackCharacter.BeControl=!1),a.prototype.DelayHide.call(this,t)},t}(u)).prototype,"m_pushBackAbilityData",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=n))||p);c._RF.pop()}}}));

System.register("chunks:///_virtual/PushBackAbilityData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityData.ts"],(function(e){var t,i,a,r,n,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){u=e.cclegacy,c=e._decorator},function(e){s=e.EntityData}],execute:function(){var l,o,p,h,m,b;u._RF.push({},"5e6bdxRRLlBi4ejnFu3bbi2","PushBackAbilityData",void 0);var k=c.ccclass,y=c.property;e("PushBackAbilityData",k("PushBackAbilityData")((p=t((o=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,a(n,"m_pushBackTime",p,r(n)),a(n,"m_pushBackSpeed",h,r(n)),a(n,"m_abilityOwner",m,r(n)),a(n,"m_pushBackCharacter",b,r(n)),n.m_pushToPos=void 0,n}return i(t,e),n(t,[{key:"pushBackTime",get:function(){return this.m_pushBackTime},set:function(e){this.m_pushBackTime=e}},{key:"pushBackSpeed",get:function(){return this.m_pushBackSpeed},set:function(e){this.m_pushBackSpeed=e}},{key:"abilityOwner",get:function(){return this.m_abilityOwner},set:function(e){this.m_abilityOwner=e}},{key:"pushBackCharacter",get:function(){return this.m_pushBackCharacter},set:function(e){this.m_pushBackCharacter=e}}]),t}(s)).prototype,"m_pushBackTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(o.prototype,"m_pushBackSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(o.prototype,"m_abilityOwner",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(o.prototype,"m_pushBackCharacter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=o))||l);u._RF.pop()}}}));

System.register("chunks:///_virtual/PushBackBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBullet.ts","./PushBackAbilityData.ts","./CommonUtility.ts","./GameEntry.ts","./PushBackAbility.ts","./CharacterEnum.ts","./AssetUtility.ts"],(function(t){var a,e,n,u,l,i,s,c,o,r;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){u=t.GameBullet},function(t){l=t.PushBackAbilityData},function(t){i=t.CommonUtility},function(t){s=t.GameEntry},function(t){c=t.PushBackAbility},function(t){o=t.EntityGroup},function(t){r=t.AssetUtility}],execute:function(){var h;e._RF.push({},"95a1aypAklBn7yOgh03fnNR","PushBackBullet",void 0);var B=n.ccclass;n.property,t("PushBackBullet",B("PushBackBullet")(h=function(t){function e(){for(var a,e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return(a=t.call.apply(t,[this].concat(n))||this).m_pushBackBulletData=void 0,a}a(e,t);var n=e.prototype;return n.OnShow=function(a){t.prototype.OnShow.call(this,a),this.m_pushBackBulletData=a,null!=this.m_pushBackBulletData||console.error("PushBackBulletData is null")},n.CauseDamage=function(){if(t.prototype.CauseDamage.call(this),this.m_pushBackBulletData.Target.Available){var a=new l(i.GeneratePermanentId(),1e3);a.pushBackTime=.1,a.pushBackSpeed=3,a.abilityOwner=this.m_pushBackBulletData.Owner,a.pushBackCharacter=this.m_pushBackBulletData.Target,s.Entity.ShowEntity(c,a.Id,o.Weapon,r.GetEmptyNode(),a)}},e}(u))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/PushBackBulletData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBulletData.ts"],(function(t){var e,u,a,s,c;return{setters:[function(t){e=t.inheritsLoose,u=t.createClass},function(t){a=t.cclegacy,s=t._decorator},function(t){c=t.GameBulletData}],execute:function(){var n;a._RF.push({},"414b5J8w6VJ/4UXY8FcHRHU","PushBackBulletData",void 0);var r=s.ccclass;s.property,t("PushBackBulletData",r("PushBackBulletData")(n=function(t){function a(e,u){var a;return(a=t.call(this,e,u)||this).m_PushTime=1,a}return e(a,t),u(a,[{key:"PushTime",get:function(){return this.m_PushTime},set:function(t){this.m_PushTime=t}}]),a}(c))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts"],(function(e){var n,t,o,r,u,i,l,a,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){u=e.cclegacy,i=e._decorator,l=e.assetManager,a=e.Prefab},function(e){c=e.FrameworkComponent}],execute:function(){var s,p,f,m,d,B,h;u._RF.push({},"497082Ck5BMWaxCOFCr3eNO","ResourceComponent",void 0);var g=i.ccclass,R=i.property;e("ResourceComponent",(s=g("ResourceComponent"),p=R([String]),f=R({type:String}),s((B=n((d=function(e){function n(){for(var n,t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return n=e.call.apply(e,[this].concat(u))||this,o(n,"m_ResourceBundleName",B,r(n)),n.ResourceBundle=new Map,o(n,"DefaultBundleName",h,r(n)),n.DefaultBundle=null,n}t(n,e);var u=n.prototype;return u.Oninit=function(){var e=this;this.m_ResourceBundleName.forEach((function(n){l.loadBundle(n,(function(t,o){t?console.log(t):e.ResourceBundle.set(n,o)}))})),l.loadBundle(this.DefaultBundleName,(function(n,t){n?console.log(n):e.DefaultBundle=t})),this.m_componentCompleted=!0},u.GetPrefab=function(e,n){void 0===n&&(n=this.m_ResourceBundleName[0]),this.ResourceBundle[n].get(e,a,(function(e,n){return e?(console.log(e),null):n}))},n}(c)).prototype,"m_ResourceBundleName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=n(d.prototype,"DefaultBundleName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),m=d))||m));u._RF.pop()}}}));

System.register("chunks:///_virtual/SceneComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./GameEntry.ts"],(function(e){var n,t,r,o,c,i,a,u,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,a=e.director},function(e){u=e.FrameworkComponent},function(e){s=e.GameEntry}],execute:function(){var p,l,m;c._RF.push({},"cf509xiYMJPwLIddbtYaJ1s","SceneComponent",void 0);var f=i.ccclass,d=i.property;e("SceneComponent",f("SceneComponent")((m=n((l=function(e){function n(){for(var n,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return n=e.call.apply(e,[this].concat(c))||this,r(n,"m_LoadSceneName",m,o(n)),n}t(n,e);var c=n.prototype;return c.Oninit=function(){this.OnChangeScene(this.m_LoadSceneName)},c.OnChangeScene=function(e){a.loadScene(e)&&(s.Procedure.m_CurrentProcedure=null)},n}(u)).prototype,"m_LoadSceneName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MainGame"}}),p=l))||p);c._RF.pop()}}}));

System.register("chunks:///_virtual/ShowEntityFailEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){r=t.GameEventArgs}],execute:function(){var a,o;e._RF.push({},"51f42Nb6P1Be6ZwjG4fbstJ","ShowEntityFailEventArgs",void 0);var s=i.ccclass;i.property,t("ShowEntityFailEventArgs",s("ShowEntityFailEventArgs")(((o=function(t){function e(){var n;return(n=t.call(this)||this).entityId=void 0,n.entityData=void 0,n.entityId=0,n.entityData=null,n}return n(e,t),e.Creat=function(t,n){var i=new e;return i.entityId=t,i.entityData=n,i},e.prototype.clear=function(){this.entityId=0,this.entityData=null},e}(r)).EventName="ShowEntityFailEventArgs",a=o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ShowEntitySuccessEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(t){var n,e,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){s=t.GameEventArgs}],execute:function(){var r,c;e._RF.push({},"e525af3Y1BJnI9yyLQtv/uu","ShowEntitySuccessEventArgs",void 0);var u=i.ccclass;i.property,t("ShowEntitySuccessEventArgs",u("ShowEntitySuccessEventArgs")(((c=function(t){function e(){var n;return(n=t.call(this)||this).entityId=void 0,n.entity=void 0,n.entityData=void 0,n.entityId=0,n.entity=null,n.entityData=null,n}return n(e,t),e.Creat=function(t,n,i){var s=new e;return s.entityId=t,s.entity=n,s.entityData=i,s},e.prototype.clear=function(){this.entityId=0,this.entity=null,this.entityData=null},e}(s)).EventName="ShowEntitySuccessEventArgs",r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/ShowHeroEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(e){var r,t,o;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.GameEventArgs}],execute:function(){t._RF.push({},"38fe4QAMUdAGZbhTD5lVOTr","ShowHeroEventArgs",void 0),e("ShowHeroEventArgs",function(e){function t(){var r;return(r=e.call(this)||this).heroId=void 0,r.hero=void 0,r.heroData=void 0,r.heroId=0,r.hero=null,r.heroData=null,r}return r(t,e),t.Creat=function(e){var r=new t;return r.heroId=e,r},t.prototype.clear=function(){this.heroId=0,this.hero=null,this.heroData=null},t}(o)).EventName="ShowHeroEventArgs",t._RF.pop()}}}));

System.register("chunks:///_virtual/SoundComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./ISoundManager.ts","./FrameworkEntry.ts","./AssetUtility.ts"],(function(o){var n,e,t,i,r,u,a,s,c,d,l,m;return{setters:[function(o){n=o.applyDecoratedDescriptor,e=o.inheritsLoose,t=o.initializerDefineProperty,i=o.assertThisInitialized,r=o.createClass},function(o){u=o.cclegacy,a=o._decorator,s=o.AudioSource},function(o){c=o.FrameworkComponent},function(o){d=o.ISoundManager},function(o){l=o.FrameworkEntry},function(o){m=o.AssetUtility}],execute:function(){var p,S,f;u._RF.push({},"e5844iU+BVCT7cXbAAxDrmY","SoundComponent",void 0);var h=a.ccclass,y=a.property;o("SoundComponent",h("SoundComponent")((f=n((S=function(o){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=o.call.apply(o,[this].concat(r))||this,t(n,"m_SoundVolume",f,i(n)),n.m_AudioSource=void 0,n.m_SoundManager=void 0,n}e(n,o);var u=n.prototype;return u.Oninit=function(){o.prototype.Oninit.call(this),l.RegisterModule("ISoundManager",d.GetInstance(this)),this.m_SoundManager=l.GetModule("ISoundManager"),this.m_AudioSource=this.node.getComponent(s),this.m_componentCompleted=!0},u.PlaySound=function(o,n,e){void 0===n&&(n=this.m_SoundVolume),void 0===e&&(e=!1);var t=m.GetSoundAsset(o);this.m_SoundManager._PlaySound(t,n,e)},r(n,[{key:"soundVolume",get:function(){return this.m_SoundVolume},set:function(o){this.m_SoundVolume=o,this.m_AudioSource.volume=o}}]),n}(c)).prototype,"m_SoundVolume",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=S))||p);u._RF.pop()}}}));

System.register("chunks:///_virtual/SoundExtension.ts",["cc","./GameEntry.ts","./FrameworkEntry.ts","./AssetUtility.ts"],(function(n){var t,e,o,u,r;return{setters:[function(n){t=n.cclegacy,e=n._decorator},function(n){o=n.GameEntry},function(n){u=n.FrameworkEntry},function(n){r=n.AssetUtility}],execute:function(){var a;t._RF.push({},"cae5a6OnNhLX6gjIoAMUtia","SoundExtension",void 0);var s=e.ccclass;e.property,n("SoundExtension",s("SoundExtension")(a=function(){function n(){}return n.prototype.PlaySoundByEnum=function(n,t,e){var a=o.DataTable.SoundTable.getDataById(n);if(null!=a&&null!=a){var s=r.GetSoundAsset(a.AssetName);u.GetModule("ISoundManager")._PlaySound(s,a.Volume,1==a.Loop)}else console.error("SoundEnum:"+n+"not exist")},n}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/ThirdPersonCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./CommonUtility.ts"],(function(t){var e,i,n,o,r,a,l,s,c,u,m,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Camera,c=t.v2,u=t.tween,m=t.Vec3},function(t){f=t.Entity},function(t){y=t.CommonUtility}],execute:function(){var p,h,d,_;a._RF.push({},"92a99bc+XFKKrv3NIvAO669","ThirdPersonCamera",void 0);var v=l.ccclass,w=l.property;t("ThirdPersonCamera",v("ThirdPersonCamera")((d=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"m_FollowEntity",d,o(e)),n(e,"m_OffVector",_,o(e)),e.m_Camera=void 0,e}i(e,t);var a=e.prototype;return a.start=function(){this.m_Camera=this.node.getComponent(s)},a.update=function(t){null!=this.m_FollowEntity&&this.m_FollowEntity.Available&&this.node.setPosition(this.m_FollowEntity.node.getPosition().add(this.m_OffVector))},a.CameraShake=function(t){var e=y.GetRandomVec3(c(-t,t),c(-t,t),c(-t,t));u(this.node).by(.05,{position:e}).start()},r(e,[{key:"FollowEntity",set:function(t){this.m_FollowEntity=t}}]),e}(f)).prototype,"m_FollowEntity",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(h.prototype,"m_OffVector",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new m(-39,93,-59)}}),p=h))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/UGuiForm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIFormLogic.ts","./GameEntry.ts"],(function(n){var o,t,r,e,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator},function(n){e=n.UIFormLogic},function(n){c=n.GameEntry}],execute:function(){var i;t._RF.push({},"e30b869Z3BF1q849F0Jzf9F","UGuiForm",void 0);var u=r.ccclass;r.property,n("UGuiForm",u("UGuiForm")(i=function(n){function t(){for(var o,t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return(o=n.call.apply(n,[this].concat(r))||this).m_MainFont=null,o}o(t,n);var r=t.prototype;return r.OnOpen=function(o){n.prototype.OnOpen.call(this,o)},r.Close=function(){c.UI.CloseUIForm(this.Id)},t}(e))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameworkComponent.ts","./CommonUtility.ts","./UGuiForm.ts","./IUIManager.ts","./FrameworkEntry.ts"],(function(e){var n,t,r,o,i,a,u,m,l,c,s,p,I,U,f,_;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,m=e._decorator,l=e.Node,c=e.Camera,s=e.CCString},function(e){p=e.FrameworkComponent},function(e){I=e.CommonUtility},function(e){U=e.UGuiForm},function(e){f=e.IUIManager},function(e){_=e.FrameworkEntry}],execute:function(){var h,g,y,C,b,d,v,F,w,M,z,G;u._RF.push({},"a95fb/4InRAmb+D0HXcZ3T1","UIComponent",void 0);var R=m.ccclass,k=m.property;e("UIComponent",(h=R("UIComponent"),g=k(l),y=k(l),C=k(c),b=k([s]),h((F=n((v=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(n,"m_Canvas",F,o(n)),r(n,"m_UIRoot",w,o(n)),r(n,"m_UICamera",M,o(n)),r(n,"m_UIGroup",z,o(n)),r(n,"m_UIPoolSize",G,o(n)),n.m_IUIManager=void 0,n}t(n,e);var u=n.prototype;return u.Oninit=function(){e.prototype.Oninit.call(this),_.RegisterModule("IUIManager",f.GetInstance(this,this.m_Canvas,this.m_UIRoot,this.m_UICamera,this.m_UIPoolSize,this.m_UIGroup)),this.m_IUIManager=_.GetModule("IUIManager"),this.m_componentCompleted=!0},u.OnUpdate=function(e){},u.OpenUIForm=function(){var e=i(a().mark((function e(n,t,r,o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==o&&(o=I.GeneratePermanentId()),e.next=3,this.m_IUIManager._OpenUIForm(o,n,t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(n,t,r,o){return e.apply(this,arguments)}}(),u.CloseUIForm=function(e){"number"==typeof e&&this.m_IUIManager._CloseUIForm(e),e instanceof U&&this.m_IUIManager._CloseUIForm(e.Id)},n}(p)).prototype,"m_Canvas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(v.prototype,"m_UIRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(v.prototype,"m_UICamera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"m_UIGroup",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=n(v.prototype,"m_UIPoolSize",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=v))||d));u._RF.pop()}}}));

System.register("chunks:///_virtual/UIExtension.ts",["cc","./FrameworkEntry.ts","./GameEntry.ts","./AssetUtility.ts","./CommonUtility.ts"],(function(e){var r,n,t,i,o,a,u,s;return{setters:[function(e){r=e.cclegacy,n=e._decorator},function(e){t=e.FrameworkEntry},function(e){i=e.GameEntry},function(e){o=e.AssetUtility},function(e){a=e.CommonUtility,u=e.LanguageType,s=e.commonVocabulary}],execute:function(){var c;r._RF.push({},"75f6399BsVMHqM2D7Qwv7Jb","UIExtension",void 0);var f=n.ccclass;n.property,e("UIExtension",f("UIExtension")(c=function(){function e(){}var r=e.prototype;return r.OpenUIFormByType=function(e,r){var n=i.DataTable.UIFormTable.getDataById(e);if(null!=n){var u=a.GeneratePermanentId(),s=o.GetUIFormAsset(n.AssetName);t.GetModule("IUIManager")._OpenUIForm(u,n.Group,s,r)}else console.warn("UIFormId:"+e+"not exist")},r.GetMultiLanguageString=function(e,r){switch(void 0===r&&(r=i.Base.m_LanguageType),r){case u.中文:if(e==s.了解更多)return"了解更多";if(e==s.返回)return"返回";break;case u.中文繁体:if(e==s.了解更多)return"瞭解更多";if(e==s.返回)return"返回";break;case u.英文:if(e==s.了解更多)return"Learn More";if(e==s.返回)return"Return";break;case u.日文:if(e==s.了解更多)return"詳細";if(e==s.返回)return"リターンマッチ";break;case u.韩文:if(e==s.了解更多)return"자세한 내용";if(e==s.返回)return"반환";break;case u.法文:if(e==s.了解更多)return"En savoir plus";if(e==s.返回)return"Retour";break;case u.泰文:if(e==s.了解更多)return"เรียนรู้เพิ่มเติม";if(e==s.返回)return"กลับ";break;case u.俄文:if(e==s.了解更多)return"Узнать больше";if(e==s.返回)return"Возвращение";break;case u.德文:if(e==s.了解更多)return"Erfahren Sie mehr";if(e==s.返回)return"Zurück"}},e}())||c),e("UIFormId",function(e){return e[e.Undefined=0]="Undefined",e[e.PopupUI=1e3]="PopupUI",e[e.MainUI=1001]="MainUI",e[e.JoyStick=1002]="JoyStick",e[e.CountDownUI=1003]="CountDownUI",e[e.ConfigUI=1004]="ConfigUI",e[e.MoveTipUI=1005]="MoveTipUI",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIFormLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,s,o;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,s=t._decorator,o=t.Component}],execute:function(){var a;n._RF.push({},"7f09enmOM9McqKgMZ9EZfDz","UIFormLogic",void 0);var r=s.ccclass;s.property,t("UIFormLogic",r("UIFormLogic")(a=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).m_Id=0,e.m_UIAssetPath="",e.m_Group="",e.m_Available=!1,e.m_Visible=!1,e.m_CachedNode=null,e.m_EnableUpdate=!0,e}e(n,t);var s=n.prototype;return s.OnInit=function(t,e,i){this.m_CachedNode=this.node,this.m_Id=t,this.m_UIAssetPath=e,this.m_Group=i},s.Onrecyle=function(){},s.OnOpen=function(t){this.m_Available=!0,this.m_Visible=!0},s.update=function(t){this.m_EnableUpdate&&this.OnUpdate(t)},s.OnUpdate=function(t){},s.OnClose=function(){this.m_Available=!1,this.m_Visible=!1},s.InternalSetVisible=function(t){this.node.active=t},i(n,[{key:"CachedNode",get:function(){return this.m_CachedNode}},{key:"Id",get:function(){return this.m_Id}},{key:"Available",get:function(){return this.m_Available},set:function(t){this.m_Available=t}},{key:"UIAssetPath",get:function(){return this.m_UIAssetPath}},{key:"Group",get:function(){return this.m_Group}},{key:"Visible",get:function(){return this.m_Visible},set:function(t){this.m_Available?this.m_Visible!=t&&(this.m_Visible=t,this.InternalSetVisible(t)):console.warn("entity{0} is not available",this.node.name)}},{key:"EnableUpdate",get:function(){return this.m_EnableUpdate},set:function(t){this.m_EnableUpdate!=t&&(this.m_EnableUpdate=t)}}]),n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponEnum.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bb850VDKQtPwKf8raCmc4GF","WeaponEnum",void 0);e("WeaponState",function(e){return e[e.UnKnown=0]="UnKnown",e[e.Idle=1]="Idle",e[e.Attacking=2]="Attacking",e[e.Locked=3]="Locked",e}({})),e("WeaponType",function(e){return e[e[void 0]=0]="undefined",e[e.sword=1]="sword",e[e.axe=2]="axe",e[e.bow=3]="bow",e[e.wand=4]="wand",e[e.spear=5]="spear",e[e.staff=6]="staff",e[e.dagger=7]="dagger",e[e.hammer=8]="hammer",e[e.shield=9]="shield",e[e.none=10]="none",e[e.all=11]="all",e}({})),e("BulletType",function(e){return e[e[void 0]=0]="undefined",e[e.Bullet=1e3]="Bullet",e[e.Arrow=1001]="Arrow",e[e.Arrow_s=1002]="Arrow_s",e[e.Arrow_Fire=1003]="Arrow_Fire",e[e.none=1004]="none",e[e.all=1005]="all",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponFireBulletEventArgs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEventArgs.ts"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){o=e.GameEventArgs}],execute:function(){var a,s;n._RF.push({},"35c26NgHCtJiodOaDAdYL1a","WeaponFireBulletEventArgs",void 0);var u=r.ccclass;r.property,e("WeaponFireBulletEventArgs",u("WeaponFireBulletEventArgs")(((s=function(e){function n(){var t;return(t=e.call(this)||this).weaponId=0,t.ownerId=0,t.targetId=0,t.weaponId=0,t}return t(n,e),n.Creat=function(e,t,r){var o=new n;return o.weaponId=e,o.ownerId=t,o.targetId=r,o},n}(o)).EventName="WeaponFireBulletEventArgs",a=s))||a);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});